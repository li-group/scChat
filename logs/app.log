2025-08-20 21:54:37,098 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-08-20 21:54:41,883 | INFO | faiss.loader | Loading faiss.
2025-08-20 21:54:41,913 | INFO | faiss.loader | Successfully loaded faiss.
2025-08-20 21:54:42,673 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-08-20 21:54:46,141 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-20 21:54:46,274 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 21:54:46,282 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 21:54:46,283 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-20 21:54:46,309 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 21:54:46,311 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 21:54:47,619 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-08-20 21:54:47,619 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-08-20 21:54:47,621 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/homebrew/Caskroom/mambaforge/base/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-08-20 21:55:29,564 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-20 23:32:59,937 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-08-20 23:33:05,133 | INFO | faiss.loader | Loading faiss.
2025-08-20 23:33:05,156 | INFO | faiss.loader | Successfully loaded faiss.
2025-08-20 23:33:05,897 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-08-20 23:33:09,682 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-20 23:33:09,803 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:33:09,840 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:33:09,841 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-20 23:33:09,878 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:33:09,883 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:33:12,196 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-08-20 23:33:12,196 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-08-20 23:33:12,199 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/homebrew/Caskroom/mambaforge/base/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-08-20 23:33:55,656 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-20 23:34:13,716 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-20 23:35:01,467 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-08-20 23:35:06,027 | INFO | faiss.loader | Loading faiss.
2025-08-20 23:35:06,049 | INFO | faiss.loader | Successfully loaded faiss.
2025-08-20 23:35:06,723 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-08-20 23:35:10,238 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-20 23:35:10,378 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:35:10,387 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:35:10,387 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-20 23:35:10,415 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:35:10,418 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:35:12,018 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-08-20 23:35:12,019 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-08-20 23:35:12,021 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/homebrew/Caskroom/mambaforge/base/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-08-20 23:35:56,439 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-20 23:36:14,098 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-20 23:36:41,545 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-08-20 23:39:13,325 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-08-20 23:39:18,058 | INFO | faiss.loader | Loading faiss.
2025-08-20 23:39:18,081 | INFO | faiss.loader | Successfully loaded faiss.
2025-08-20 23:39:18,751 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-08-20 23:39:22,925 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-20 23:39:23,042 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:39:23,052 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:39:23,052 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-08-20 23:39:23,053 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-20 23:39:23,080 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:39:23,082 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:39:24,654 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-08-20 23:39:24,654 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-08-20 23:39:24,656 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/homebrew/Caskroom/mambaforge/base/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-08-20 23:40:07,708 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-20 23:40:26,150 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-20 23:45:16,339 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-20 23:45:20,405 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-08-20 23:45:20,405 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-20 23:55:59,643 | INFO | django.utils.autoreload | /Users/ashleyjvarghese/Desktop/scChat_v2/scchatbot/workflow/function_history.py changed, reloading.
2025-08-20 23:56:02,912 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-08-20 23:56:07,731 | INFO | faiss.loader | Loading faiss.
2025-08-20 23:56:07,753 | INFO | faiss.loader | Successfully loaded faiss.
2025-08-20 23:56:08,430 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-08-20 23:56:12,101 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-20 23:56:12,217 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:56:12,227 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:56:12,227 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-08-20 23:56:12,227 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-20 23:56:12,249 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:56:12,251 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:56:12,251 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-08-20 23:56:13,556 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-08-20 23:56:13,556 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-08-20 23:56:13,558 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/homebrew/Caskroom/mambaforge/base/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-08-20 23:56:56,966 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-20 23:57:13,057 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-20 23:58:59,365 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-08-20 23:59:05,498 | INFO | faiss.loader | Loading faiss.
2025-08-20 23:59:05,522 | INFO | faiss.loader | Successfully loaded faiss.
2025-08-20 23:59:06,273 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-08-20 23:59:09,776 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-20 23:59:09,889 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:59:09,896 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:59:09,896 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-08-20 23:59:09,897 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-20 23:59:09,919 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:59:09,921 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-20 23:59:09,921 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-08-20 23:59:11,335 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-08-20 23:59:11,335 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-08-20 23:59:11,337 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/homebrew/Caskroom/mambaforge/base/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-08-20 23:59:55,031 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:00:16,845 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:03:18,291 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:03:20,468 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-08-21 00:03:20,468 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-08-21 00:03:20,468 | INFO | scchatbot.multi_agent_base | 1
2025-08-21 00:03:21,118 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-08-21 00:03:21,118 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-21 00:03:25,158 | INFO | scchatbot.multi_agent_base | 2
2025-08-21 00:03:25,164 | INFO | scchatbot.multi_agent_base | 3
2025-08-21 00:03:25,164 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-08-21 00:08:28,935 | WARNING | django.request | Not Found: /ws/chat/c9957109/
2025-08-21 00:08:31,764 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'c9957109'
2025-08-21 00:08:31,769 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-08-21 00:08:31,769 | INFO | scchatbot.workflow.node_base |    Current message: Hello...
2025-08-21 00:08:32,006 | WARNING | django.request | Not Found: /ws/chat/c9957109/
2025-08-21 00:08:32,484 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:08:32,488 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
[]
```'
2025-08-21 00:08:32,489 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 3 initial cell types
2025-08-21 00:08:32,489 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-08-21 00:08:32,490 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-08-21 00:08:32,490 | INFO | scchatbot.workflow.node_base |    Current message: Hello...
2025-08-21 00:08:32,491 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-08-21 00:08:32,491 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 3
2025-08-21 00:08:32,491 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 3
2025-08-21 00:08:32,491 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-08-21 00:08:32,491 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Hello'
2025-08-21 00:08:34,302 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:08:35,023 | WARNING | django.request | Not Found: /ws/chat/c9957109/
2025-08-21 00:08:36,758 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:08:36,762 | INFO | scchatbot.workflow.nodes.planning | 🔍 No specific cell types identified in question
2025-08-21 00:08:36,762 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-08-21 00:08:36,762 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 1 steps
2025-08-21 00:08:36,762 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 1 steps
2025-08-21 00:08:36,762 | INFO | scchatbot.workflow.nodes.planning |    • 0 process_cells steps
2025-08-21 00:08:36,763 | INFO | scchatbot.workflow.nodes.planning |    • 0 validation steps
2025-08-21 00:08:36,763 | INFO | scchatbot.workflow.nodes.planning |    • 0 analysis steps
2025-08-21 00:08:36,763 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-08-21 00:08:36,763 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-08-21 00:08:36,764 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 00:08:36,764 | INFO | scchatbot.workflow.node_base |    Current message: Hello...
2025-08-21 00:08:36,772 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Respond to the user's greeting.
2025-08-21 00:08:36,772 | INFO | scchatbot.workflow.nodes.execution | ℹ️ No function for this step; treating as direct-answer/no-op.
2025-08-21 00:08:36,772 | INFO | scchatbot.workflow.nodes.execution | 📄 Text storage: direct_answer - Truncated to 500 chars
2025-08-21 00:08:36,772 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-08-21 00:08:36,772 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 00:08:36,774 | INFO | scchatbot.workflow.nodes.evaluation | ℹ️ Evaluator: no callable steps in plan; skipping post-execution evaluation.
2025-08-21 00:08:36,776 | INFO | scchatbot.workflow.nodes.evaluation | ℹ️ Evaluator: no callable steps in plan; skipping post-execution evaluation.
2025-08-21 00:08:36,777 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-08-21 00:08:36,777 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-08-21 00:08:36,778 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 1 execution steps
2025-08-21 00:08:36,778 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: direct_answer for step_0
2025-08-21 00:08:36,778 | INFO | scchatbot.workflow.unified_result_accessor | ⚠️ No accessor found for function: direct_answer
2025-08-21 00:08:36,778 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 1 successful steps
2025-08-21 00:08:36,778 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 64 characters for synthesis
2025-08-21 00:08:36,778 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-08-21 00:08:36,778 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-08-21 00:08:36,778 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-08-21 00:08:36,778 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-08-21 00:08:37,787 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:08:37,791 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 1 execution steps
2025-08-21 00:08:37,791 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: direct_answer, success=True, has_result=True
2025-08-21 00:08:37,791 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: No valid plots found
2025-08-21 00:08:37,791 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 0 individual plots
2025-08-21 00:08:37,791 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (169 chars)
2025-08-21 00:08:37,913 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-08-21 00:08:37,913 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'c9957109' with 3 available cell types
2025-08-21 00:13:02,876 | INFO | scchatbot.multi_agent_base | 🔄 Reusing session state for 'c9957109' with 3 available cell types
2025-08-21 00:13:02,892 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-08-21 00:13:02,892 | INFO | scchatbot.workflow.node_base |    Current message: Regulatory T cells are distinguished from the Conventional memory CD4 T cells by the presence of the...
2025-08-21 00:13:03,916 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:13:03,919 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
[]
```'
2025-08-21 00:13:03,919 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Preserving 3 discovered cell types from previous operations
2025-08-21 00:13:03,919 | INFO | scchatbot.workflow.nodes.input_processing |    Preserved types: ['Glial cell', 'Immune cell', 'Stromal cell']
2025-08-21 00:13:03,919 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-08-21 00:13:03,920 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-08-21 00:13:03,920 | INFO | scchatbot.workflow.node_base |    Current message: Regulatory T cells are distinguished from the Conventional memory CD4 T cells by the presence of the...
2025-08-21 00:13:03,920 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-08-21 00:13:03,920 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 3
2025-08-21 00:13:03,921 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 3
2025-08-21 00:13:03,921 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-08-21 00:13:03,921 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Regulatory T cells are distinguished from the Conventional memory CD4 T cells by the presence of the marker FOXP3, in addition to CD4. While both cell types express CD4, the expression of FOXP3 is specific to Regulatory T cells, setting them apart from Conventional memory CD4 T cells, which are characterized by markers such as CD3D, CD3E, and CD4.'
2025-08-21 00:13:06,821 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:13:09,050 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:13:09,064 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['Regulatory T cell', 'CD4-positive memory T cell']
2025-08-21 00:13:09,064 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Immune cell', 'Stromal cell', 'Glial cell']
2025-08-21 00:13:09,064 | INFO | scchatbot.workflow.nodes.planning | 📋 Preserving LLM analysis step: dea_split_by_condition(Immune cell)
2025-08-21 00:13:09,065 | INFO | scchatbot.workflow.nodes.planning | 📋 Preserving LLM analysis step: dea_split_by_condition(Immune cell)
2025-08-21 00:13:09,065 | INFO | scchatbot.workflow.nodes.planning | 🔧 Fixed cell type name using RAG-validated type: 'Immune cell' → 'Regulatory T cell'
2025-08-21 00:13:09,065 | INFO | scchatbot.workflow.nodes.planning | 🔧 Fixed cell type name using RAG-validated type: 'Immune cell' → 'CD4-positive memory T cell'
2025-08-21 00:13:09,106 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-08-21 00:13:09,116 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'Regulatory T cell': Immune cell → T cell → Regulatory T cell
2025-08-21 00:13:09,126 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'CD4-positive memory T cell': Immune cell → T cell → CD4-positive memory T cell
2025-08-21 00:13:09,127 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-08-21 00:13:09,127 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(T cell) to discover ['Regulatory T cell', 'CD4-positive memory T cell']
2025-08-21 00:13:09,127 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-08-21 00:13:09,127 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(T cell) expecting: ['Regulatory T cell', 'CD4-positive memory T cell']
2025-08-21 00:13:09,127 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-08-21 00:13:09,127 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(T cell) → validation(T cell)
2025-08-21 00:13:09,127 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-08-21 00:13:09,127 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 2
2025-08-21 00:13:09,127 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 2
2025-08-21 00:13:09,127 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 2
2025-08-21 00:13:09,127 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 0
2025-08-21 00:13:09,127 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-08-21 00:13:09,127 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-08-21 00:13:09,127 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 6 steps
2025-08-21 00:13:09,127 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 6 steps
2025-08-21 00:13:09,127 | INFO | scchatbot.workflow.nodes.planning |    • 2 process_cells steps
2025-08-21 00:13:09,127 | INFO | scchatbot.workflow.nodes.planning |    • 2 validation steps
2025-08-21 00:13:09,127 | INFO | scchatbot.workflow.nodes.planning |    • 4 analysis steps
2025-08-21 00:13:09,128 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-08-21 00:13:09,128 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-08-21 00:13:09,129 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 00:13:09,129 | INFO | scchatbot.workflow.node_base |    Current message: Regulatory T cells are distinguished from the Conventional memory CD4 T cells by the presence of the...
2025-08-21 00:13:09,131 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-08-21 00:13:09,131 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-08-21 00:13:33,699 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:13:47,821 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:15:25,542 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:15:25,555 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-08-21 00:15:25,556 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-08-21 00:15:25,558 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['Mononuclear phagocyte', 'T cell', 'Natural killer cell', 'Plasmacytoid dendritic cell', 'B cell']
2025-08-21 00:15:25,694 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mononuclear phagocyte
2025-08-21 00:15:25,695 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: T cell
2025-08-21 00:15:25,695 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Natural killer cell
2025-08-21 00:15:25,695 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Plasmacytoid dendritic cell
2025-08-21 00:15:25,695 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: B cell
2025-08-21 00:15:25,698 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-08-21 00:15:25,698 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-08-21 00:15:25,698 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 00:15:25,698 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 00:15:25,700 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-08-21 00:15:25,701 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-08-21 00:15:25,701 | INFO | scchatbot.workflow.node_base |    Current message: Validating Immune cell -> ['T cell']...
2025-08-21 00:15:25,701 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'T cell'
2025-08-21 00:15:25,701 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-08-21 00:15:25,701 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Validation passed: All 1 expected cell types found successfully
2025-08-21 00:15:25,702 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: success
2025-08-21 00:15:25,702 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['T cell'], found=['T cell'], missing=[]
2025-08-21 00:15:25,702 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'success', 'message': 'All 1 expected cell types found successfully', 'found_children': ['T cell'], 'missing_children': [], 'available_types': ['Mononuclear phagocyte', 'Stromal cell', 'Plasmacytoid dendritic cell', 'Natural killer cell', 'B cell', 'Glial cell', 'T cell']}
2025-08-21 00:15:25,702 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: []
2025-08-21 00:15:25,702 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 4 remaining steps...
2025-08-21 00:15:25,702 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3: process_cells(cell_type='T cell')
2025-08-21 00:15:25,702 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3 cell type 'T cell' not in missing list []
2025-08-21 00:15:25,702 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 4: validate_processing_results(processed_parent='T cell', expected_children=['Regulatory T cell', 'CD4-positive memory T cell'])
2025-08-21 00:15:25,702 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 4 cell type 'None' not in missing list []
2025-08-21 00:15:25,702 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 5: dea_split_by_condition(cell_type='Regulatory T cell')
2025-08-21 00:15:25,702 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 5 cell type 'Regulatory T cell' not in missing list []
2025-08-21 00:15:25,702 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 6: dea_split_by_condition(cell_type='CD4-positive memory T cell')
2025-08-21 00:15:25,702 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 6 cell type 'CD4-positive memory T cell' not in missing list []
2025-08-21 00:15:25,703 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 3
2025-08-21 00:15:25,703 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 00:15:25,703 | INFO | scchatbot.workflow.node_base |    Current message: Regulatory T cells are distinguished from the Conventional memory CD4 T cells by the presence of the...
2025-08-21 00:15:25,704 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Process T cell to discover Regulatory T cell, CD4-positive memory T cell
2025-08-21 00:15:25,705 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-08-21 00:15:37,501 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:15:46,308 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:14,062 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:14,085 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-08-21 00:16:14,086 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-08-21 00:16:14,087 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['Regulatory T cell', 'CD8-positive effector T cell', 'CD4-positive central memory T cell', 'CD8-positive effector memory T cell', 'CD4-positive, alpha-beta T cell', 'NK T cell', 'Exhausted T cell', 'CD4-positive effector T cell']
2025-08-21 00:16:14,176 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Regulatory T cell
2025-08-21 00:16:14,176 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: CD8-positive effector T cell
2025-08-21 00:16:14,176 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: CD4-positive central memory T cell
2025-08-21 00:16:14,176 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: CD8-positive effector memory T cell
2025-08-21 00:16:14,176 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: CD4-positive, alpha-beta T cell
2025-08-21 00:16:14,177 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: NK T cell
2025-08-21 00:16:14,177 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Exhausted T cell
2025-08-21 00:16:14,177 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: CD4-positive effector T cell
2025-08-21 00:16:14,180 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-08-21 00:16:14,180 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-08-21 00:16:14,180 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 00:16:14,180 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 00:16:14,182 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-08-21 00:16:14,182 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-08-21 00:16:14,182 | INFO | scchatbot.workflow.node_base |    Current message: Validating T cell -> ['Regulatory T cell', 'CD4-positive memory T cell']...
2025-08-21 00:16:14,183 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'Regulatory T cell'
2025-08-21 00:16:14,183 | INFO | scchatbot.workflow.nodes.evaluation | ❌ Missing expected cell type: 'CD4-positive memory T cell' (no exact match or valid subtypes)
2025-08-21 00:16:14,183 | INFO | scchatbot.workflow.nodes.evaluation | ⚠️ Validation Warning: Expected children not found: ['CD4-positive memory T cell']
2025-08-21 00:16:14,183 | INFO | scchatbot.workflow.nodes.evaluation |    Available cell types: ['B cell', 'CD4-positive central memory T cell', 'CD4-positive effector T cell', 'CD4-positive, alpha-beta T cell', 'CD8-positive effector T cell', 'CD8-positive effector memory T cell', 'Exhausted T cell', 'Glial cell', 'Mononuclear phagocyte', 'NK T cell', 'Natural killer cell', 'Plasmacytoid dendritic cell', 'Regulatory T cell', 'Stromal cell']
2025-08-21 00:16:14,183 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-08-21 00:16:14,183 | INFO | scchatbot.workflow.nodes.evaluation | ⚠️ Validation partial: Found 1/2 expected cell types. Missing: ['CD4-positive memory T cell']
2025-08-21 00:16:14,183 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Added to unavailable cell types: ['CD4-positive memory T cell']
2025-08-21 00:16:14,183 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: partial_success
2025-08-21 00:16:14,184 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['CD4-positive memory T cell', 'Regulatory T cell'], found=['Regulatory T cell'], missing=['CD4-positive memory T cell']
2025-08-21 00:16:14,184 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'partial_success', 'message': "Found 1/2 expected cell types. Missing: ['CD4-positive memory T cell']", 'found_children': ['Regulatory T cell'], 'missing_children': ['CD4-positive memory T cell'], 'suggestions': ["'CD4-positive memory T cell' → 'Exhausted T cell'", "'CD4-positive memory T cell' → 'Mononuclear phagocyte'", "'CD4-positive memory T cell' → 'CD8-positive effector T cell'", "'CD4-positive memory T cell' → 'CD4-positive central memory T cell'", "'CD4-positive memory T cell' → 'CD4-positive effector T cell'", "'CD4-positive memory T cell' → 'CD4-positive, alpha-beta T cell'", "'CD4-positive memory T cell' → 'Plasmacytoid dendritic cell'", "'CD4-positive memory T cell' → 'Natural killer cell'", "'CD4-positive memory T cell' → 'NK T cell'", "'CD4-positive memory T cell' → 'B cell'", "'CD4-positive memory T cell' → 'Regulatory T cell'", "'CD4-positive memory T cell' → 'CD8-positive effector memory T cell'"], 'available_types': ['Exhausted T cell', 'Mononuclear phagocyte', 'Stromal cell', 'Glial cell', 'CD8-positive effector T cell', 'CD4-positive central memory T cell', 'CD4-positive effector T cell', 'CD4-positive, alpha-beta T cell', 'Plasmacytoid dendritic cell', 'Natural killer cell', 'NK T cell', 'B cell', 'Regulatory T cell', 'CD8-positive effector memory T cell']}
2025-08-21 00:16:14,184 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: ['CD4-positive memory T cell']
2025-08-21 00:16:14,184 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 2 remaining steps...
2025-08-21 00:16:14,184 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 5: dea_split_by_condition(cell_type='Regulatory T cell')
2025-08-21 00:16:14,184 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 5 cell type 'Regulatory T cell' not in missing list ['CD4-positive memory T cell']
2025-08-21 00:16:14,184 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 6: dea_split_by_condition(cell_type='CD4-positive memory T cell')
2025-08-21 00:16:14,184 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 6 references missing cell type 'CD4-positive memory T cell'
2025-08-21 00:16:14,184 | INFO | scchatbot.workflow.nodes.evaluation | ⏭️ Marked step 6 for skipping: dea_split_by_condition(CD4-positive memory T cell)
2025-08-21 00:16:14,184 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Step 6 now has skip_reason: Cell type 'CD4-positive memory T cell' not discovered
2025-08-21 00:16:14,184 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Step update complete: 1 marked for skipping
2025-08-21 00:16:14,184 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 5
2025-08-21 00:16:14,185 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 00:16:14,185 | INFO | scchatbot.workflow.node_base |    Current message: Regulatory T cells are distinguished from the Conventional memory CD4 T cells by the presence of the...
2025-08-21 00:16:14,186 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 5: Perform differential expression analysis to identify genes differentially expressed between cells expressing FOXP3 and those that do not within the Immune cell type.
2025-08-21 00:16:14,186 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'dea_split_by_condition'
2025-08-21 00:16:37,314 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 5 completed successfully
2025-08-21 00:16:37,316 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: dea_split_by_condition - Full data preserved
2025-08-21 00:16:37,316 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 6
2025-08-21 00:16:37,316 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 00:16:37,316 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 00:16:37,318 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Steps still remaining (5/6), skipping post-execution evaluation
2025-08-21 00:16:37,319 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 00:16:37,319 | INFO | scchatbot.workflow.node_base |    Current message: Regulatory T cells are distinguished from the Conventional memory CD4 T cells by the presence of the...
2025-08-21 00:16:37,320 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 6: Perform differential expression analysis to identify genes differentially expressed between cells expressing CD4 and those that do not within the Immune cell type.
2025-08-21 00:16:37,320 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'dea_split_by_condition'
2025-08-21 00:16:37,322 | INFO | scchatbot.multi_agent_base | ❌ Hierarchical DEA failed: Cell type 'CD4-positive memory T cell' not found.
Available types: Exhausted T cell, Mononuclear phagocyte, Stromal cell, Glial cell, CD8-positive effector T cell, CD4-positive central memory T cell, CD4-positive effector T cell, CD4-positive, alpha-beta T cell, Plasmacytoid dendritic cell, Natural killer cell, NK T cell, B cell, Regulatory T cell, CD8-positive effector memory T cell
Suggestions: CD4-positive memory T cell
2025-08-21 00:16:37,322 | INFO | scchatbot.workflow.nodes.execution | ❌ Step 6 failed: dea_split_by_condition() got an unexpected keyword argument 'condition'
2025-08-21 00:16:37,322 | INFO | scchatbot.workflow.nodes.execution | 📄 Text storage: dea_split_by_condition - Truncated to 500 chars
2025-08-21 00:16:37,322 | INFO | scchatbot.workflow.nodes.execution | ❌ Step failed: dea_split_by_condition() got an unexpected keyword argument 'condition'
2025-08-21 00:16:37,322 | INFO | scchatbot.workflow.nodes.execution | 📝 Recording error and advancing to step 7 (no retries for deterministic operations)
2025-08-21 00:16:37,322 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 00:16:37,322 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 00:16:37,323 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (6/6), running post-execution evaluation
2025-08-21 00:16:37,323 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 00:16:37,323 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 00:16:39,177 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:40,706 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:40,709 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-08-21 00:16:40,710 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: Regulatory T cell
2025-08-21 00:16:41,499 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:41,502 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-08-21 00:16:42,216 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:42,218 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for Regulatory T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-08-21 00:16:42,219 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for Regulatory T cell: ['dea_split_by_condition']
2025-08-21 00:16:42,219 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'Regulatory T cell' is in unavailable list: []
2025-08-21 00:16:42,219 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 6 entries
2025-08-21 00:16:42,219 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for Regulatory T cell: dea_split_by_condition (execution 5)
2025-08-21 00:16:42,219 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for Regulatory T cell: ['dea_split_by_condition']
2025-08-21 00:16:42,219 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for Regulatory T cell
2025-08-21 00:16:42,220 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: CD4-positive memory T cell
2025-08-21 00:16:43,035 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:43,037 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-08-21 00:16:43,751 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:43,755 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for CD4-positive memory T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-08-21 00:16:43,755 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for CD4-positive memory T cell: ['dea_split_by_condition']
2025-08-21 00:16:43,755 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'CD4-positive memory T cell' is in unavailable list: []
2025-08-21 00:16:43,755 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 6 entries
2025-08-21 00:16:43,756 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for CD4-positive memory T cell: []
2025-08-21 00:16:43,756 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 No direct matches found for CD4-positive memory T cell, checking for related executions...
2025-08-21 00:16:43,756 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: dea_split_by_condition(CD4-positive memory T cell)
2025-08-21 00:16:43,756 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 1 missing steps for CD4-positive memory T cell
2025-08-21 00:16:43,756 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 1 total supplementary steps
2025-08-21 00:16:43,756 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-08-21 00:16:43,756 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 1 supplementary steps to execution plan (attempt 1/2)
2025-08-21 00:16:43,756 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-08-21 00:16:43,756 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 00:16:43,756 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 6
2025-08-21 00:16:43,757 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 5
2025-08-21 00:16:43,757 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 1
2025-08-21 00:16:43,757 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 1
2025-08-21 00:16:43,757 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 00:16:43,757 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 00:16:43,760 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 00:16:43,761 | INFO | scchatbot.workflow.node_base |    Current message: Regulatory T cells are distinguished from the Conventional memory CD4 T cells by the presence of the...
2025-08-21 00:16:43,763 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 7: Post-evaluation: dea_split_by_condition for CD4-positive memory T cell
2025-08-21 00:16:43,763 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'dea_split_by_condition'
2025-08-21 00:16:43,766 | INFO | scchatbot.multi_agent_base | ❌ Hierarchical DEA failed: Cell type 'CD4-positive memory T cell' not found.
Available types: Exhausted T cell, Mononuclear phagocyte, Stromal cell, Glial cell, CD8-positive effector T cell, CD4-positive central memory T cell, CD4-positive effector T cell, CD4-positive, alpha-beta T cell, Plasmacytoid dendritic cell, Natural killer cell, NK T cell, B cell, Regulatory T cell, CD8-positive effector memory T cell
Suggestions: CD4-positive memory T cell
2025-08-21 00:16:44,148 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 7 completed successfully
2025-08-21 00:16:44,153 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: dea_split_by_condition - Full data preserved
2025-08-21 00:16:44,153 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 8
2025-08-21 00:16:44,153 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 00:16:44,153 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 00:16:44,154 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (7/7), running post-execution evaluation
2025-08-21 00:16:44,154 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 00:16:44,154 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 00:16:46,214 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:47,406 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:47,410 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-08-21 00:16:47,410 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: Regulatory T cell
2025-08-21 00:16:48,159 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:48,163 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-08-21 00:16:48,873 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:48,875 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for Regulatory T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-08-21 00:16:48,875 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for Regulatory T cell: ['dea_split_by_condition']
2025-08-21 00:16:48,875 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'Regulatory T cell' is in unavailable list: []
2025-08-21 00:16:48,875 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 7 entries
2025-08-21 00:16:48,876 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for Regulatory T cell: dea_split_by_condition (execution 5)
2025-08-21 00:16:48,876 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for Regulatory T cell: ['dea_split_by_condition']
2025-08-21 00:16:48,876 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for Regulatory T cell
2025-08-21 00:16:48,876 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: CD4-positive memory T cell
2025-08-21 00:16:49,692 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:49,705 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-08-21 00:16:50,216 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:50,218 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for CD4-positive memory T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-08-21 00:16:50,219 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for CD4-positive memory T cell: ['dea_split_by_condition']
2025-08-21 00:16:50,219 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'CD4-positive memory T cell' is in unavailable list: []
2025-08-21 00:16:50,219 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 7 entries
2025-08-21 00:16:50,219 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for CD4-positive memory T cell: dea_split_by_condition (execution 7)
2025-08-21 00:16:50,219 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for CD4-positive memory T cell: ['dea_split_by_condition']
2025-08-21 00:16:50,220 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for CD4-positive memory T cell
2025-08-21 00:16:50,220 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-08-21 00:16:50,220 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-08-21 00:16:50,220 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 00:16:50,220 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 7
2025-08-21 00:16:50,221 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 6
2025-08-21 00:16:50,221 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 1
2025-08-21 00:16:50,221 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-08-21 00:16:50,221 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 00:16:50,222 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 00:16:50,224 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (7/7), running post-execution evaluation
2025-08-21 00:16:50,224 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 00:16:50,224 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 00:16:52,356 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:53,072 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:53,073 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-08-21 00:16:53,073 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: Regulatory T cell
2025-08-21 00:16:53,875 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:53,879 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-08-21 00:16:54,898 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:54,903 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for Regulatory T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-08-21 00:16:54,903 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for Regulatory T cell: ['dea_split_by_condition']
2025-08-21 00:16:54,903 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'Regulatory T cell' is in unavailable list: []
2025-08-21 00:16:54,903 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 7 entries
2025-08-21 00:16:54,903 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for Regulatory T cell: dea_split_by_condition (execution 5)
2025-08-21 00:16:54,903 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for Regulatory T cell: ['dea_split_by_condition']
2025-08-21 00:16:54,904 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for Regulatory T cell
2025-08-21 00:16:54,904 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: CD4-positive memory T cell
2025-08-21 00:16:55,738 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:55,742 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-08-21 00:16:56,257 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:16:56,259 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for CD4-positive memory T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-08-21 00:16:56,259 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for CD4-positive memory T cell: ['dea_split_by_condition']
2025-08-21 00:16:56,259 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'CD4-positive memory T cell' is in unavailable list: []
2025-08-21 00:16:56,259 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 7 entries
2025-08-21 00:16:56,259 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for CD4-positive memory T cell: dea_split_by_condition (execution 7)
2025-08-21 00:16:56,259 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for CD4-positive memory T cell: ['dea_split_by_condition']
2025-08-21 00:16:56,260 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for CD4-positive memory T cell
2025-08-21 00:16:56,260 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-08-21 00:16:56,260 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-08-21 00:16:56,260 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 00:16:56,260 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 7
2025-08-21 00:16:56,260 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 6
2025-08-21 00:16:56,260 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 1
2025-08-21 00:16:56,260 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-08-21 00:16:56,260 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 00:16:56,260 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 00:16:56,261 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-08-21 00:16:56,262 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-08-21 00:16:56,262 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 7 execution steps
2025-08-21 00:16:56,262 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-08-21 00:16:56,262 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-08-21 00:16:56,262 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-08-21 00:16:56,262 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-08-21 00:16:56,262 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: process_cells for T cell
2025-08-21 00:16:56,262 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-08-21 00:16:56,263 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: validate_processing_results for step_3
2025-08-21 00:16:56,263 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-08-21 00:16:56,263 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 5: dea_split_by_condition for Regulatory T cell
2025-08-21 00:16:56,263 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling dea_split_by_condition with DEAResultAccessor
2025-08-21 00:16:56,264 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 DEA: Loaded 7 conditions from mapping file: ['p6_pre', 'p7_pre', 'p1_post', 'p7_post', 'p1_pre', 'p6_post', 'bulk']
2025-08-21 00:16:56,267 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for p6_pre: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj']
2025-08-21 00:16:56,271 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for p7_pre: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj']
2025-08-21 00:16:56,275 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for p1_post: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj']
2025-08-21 00:16:56,277 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for p7_post: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj']
2025-08-21 00:16:56,280 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for p1_pre: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj']
2025-08-21 00:16:56,283 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for p6_post: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj']
2025-08-21 00:16:56,286 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for bulk: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj']
2025-08-21 00:16:56,287 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 7: dea_split_by_condition for CD4-positive memory T cell
2025-08-21 00:16:56,287 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling dea_split_by_condition with DEAResultAccessor
2025-08-21 00:16:56,287 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 DEA: Loaded 7 conditions from mapping file: ['p6_pre', 'p7_pre', 'p1_post', 'p7_post', 'p1_pre', 'p6_post', 'bulk']
2025-08-21 00:16:56,288 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 6 successful steps
2025-08-21 00:16:56,288 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 14740 characters for synthesis
2025-08-21 00:16:56,288 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-08-21 00:16:56,288 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-08-21 00:16:56,288 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-08-21 00:16:56,288 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-08-21 00:17:02,186 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:17:02,189 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 7 execution steps
2025-08-21 00:17:02,190 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: process_cells, success=True, has_result=True
2025-08-21 00:17:02,190 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: validate_processing_results, success=True, has_result=True
2025-08-21 00:17:02,190 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: process_cells, success=True, has_result=True
2025-08-21 00:17:02,190 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: validate_processing_results, success=True, has_result=True
2025-08-21 00:17:02,190 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 5: dea_split_by_condition, success=True, has_result=True
2025-08-21 00:17:02,190 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 6: dea_split_by_condition, success=False, has_result=True
2025-08-21 00:17:02,190 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 7: dea_split_by_condition, success=True, has_result=True
2025-08-21 00:17:02,190 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: No valid plots found
2025-08-21 00:17:02,191 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 0 individual plots
2025-08-21 00:17:02,191 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (1410 chars)
2025-08-21 00:17:02,316 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-08-21 00:17:02,316 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'c9957109' with 14 available cell types
2025-08-21 00:20:12,400 | INFO | scchatbot.multi_agent_base | 🔄 Reusing session state for 'c9957109' with 14 available cell types
2025-08-21 00:20:12,413 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-08-21 00:20:12,413 | INFO | scchatbot.workflow.node_base |    Current message: Can you show me the UMAP for T cells...
2025-08-21 00:20:13,266 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:20:13,269 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-08-21 00:20:13,269 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-08-21 00:20:13,269 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-08-21 00:20:13,269 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 14 cell types: ['Exhausted T cell', 'Mononuclear phagocyte', 'Stromal cell', 'Glial cell', 'CD8-positive effector T cell', 'CD4-positive central memory T cell', 'CD4-positive effector T cell', 'CD4-positive, alpha-beta T cell', 'Plasmacytoid dendritic cell', 'Natural killer cell', 'NK T cell', 'B cell', 'Regulatory T cell', 'CD8-positive effector memory T cell']
2025-08-21 00:20:13,269 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 463 chars, starts with: 'Cell types currently available in the dataset:
  •...'
2025-08-21 00:20:13,269 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (463 chars)
2025-08-21 00:20:13,269 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'Cell types currently available in the dataset:
  • B cell
  • CD4-positive central memory T cell
  •...'
2025-08-21 00:20:13,270 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (486 chars)
2025-08-21 00:20:13,270 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Preserving 14 discovered cell types from previous operations
2025-08-21 00:20:13,270 | INFO | scchatbot.workflow.nodes.input_processing |    Preserved types: ['B cell', 'CD4-positive central memory T cell', 'CD4-positive effector T cell', 'CD4-positive, alpha-beta T cell', 'CD8-positive effector T cell', 'CD8-positive effector memory T cell', 'Exhausted T cell', 'Glial cell', 'Mononuclear phagocyte', 'NK T cell', 'Natural killer cell', 'Plasmacytoid dendritic cell', 'Regulatory T cell', 'Stromal cell']
2025-08-21 00:20:13,270 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-08-21 00:20:13,271 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-08-21 00:20:13,271 | INFO | scchatbot.workflow.node_base |    Current message: Can you show me the UMAP for T cells...
2025-08-21 00:20:13,271 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-08-21 00:20:13,271 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 3
2025-08-21 00:20:13,271 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 14
2025-08-21 00:20:13,271 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 11
2025-08-21 00:20:13,271 | INFO | scchatbot.workflow.nodes.planning |    • New types discovered: B cell, CD4-positive central memory T cell, CD4-positive effector T cell, CD4-positive, alpha-beta T cell, CD8-positive effector T cell, CD8-positive effector memory T cell, Exhausted T cell, Mononuclear phagocyte, NK T cell, Natural killer cell, Plasmacytoid dendritic cell, Regulatory T cell
2025-08-21 00:20:13,271 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Can you show me the UMAP for T cells'
2025-08-21 00:20:15,518 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:20:17,234 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:20:17,243 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-08-21 00:20:17,243 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Exhausted T cell', 'Mononuclear phagocyte', 'Stromal cell', 'Glial cell', 'CD8-positive effector T cell', 'CD4-positive central memory T cell', 'CD4-positive effector T cell', 'CD4-positive, alpha-beta T cell', 'Plasmacytoid dendritic cell', 'Natural killer cell', 'NK T cell', 'B cell', 'Regulatory T cell', 'CD8-positive effector memory T cell']
2025-08-21 00:20:17,277 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-08-21 00:20:17,283 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Exhausted T cell' to 'T cell': Exhausted T cell
2025-08-21 00:20:17,284 | INFO | scchatbot.workflow.nodes.planning | ⚠️ No processing path found for 'T cell'
2025-08-21 00:20:17,284 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-08-21 00:20:17,284 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 0
2025-08-21 00:20:17,284 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 0
2025-08-21 00:20:17,285 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 0
2025-08-21 00:20:17,285 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-08-21 00:20:17,285 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-08-21 00:20:17,286 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-08-21 00:20:17,286 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 1 steps
2025-08-21 00:20:17,286 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 1 steps
2025-08-21 00:20:17,286 | INFO | scchatbot.workflow.nodes.planning |    • 0 process_cells steps
2025-08-21 00:20:17,287 | INFO | scchatbot.workflow.nodes.planning |    • 0 validation steps
2025-08-21 00:20:17,287 | INFO | scchatbot.workflow.nodes.planning |    • 0 analysis steps
2025-08-21 00:20:17,287 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-08-21 00:20:17,287 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-08-21 00:20:17,289 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 00:20:17,289 | INFO | scchatbot.workflow.node_base |    Current message: Can you show me the UMAP for T cells...
2025-08-21 00:20:17,292 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Display the UMAP visualization that is annotated with cell types, focusing on T cells.
2025-08-21 00:20:17,292 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_processed_umap'
2025-08-21 00:20:17,293 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_processed_umap' with step parameters: {}
2025-08-21 00:20:17,293 | INFO | scchatbot.workflow.nodes.execution | ❌ No suitable cell type found for display_processed_umap
2025-08-21 00:20:17,293 | INFO | scchatbot.workflow.nodes.execution | ❌ Step execution blocked: No processed cell data available for display_processed_umap
2025-08-21 00:20:17,294 | INFO | scchatbot.workflow.nodes.execution | 📄 Text storage: display_processed_umap - Truncated to 500 chars
2025-08-21 00:20:17,294 | INFO | scchatbot.workflow.nodes.execution | ❌ Step failed: No processed cell data available for display_processed_umap
2025-08-21 00:20:17,294 | INFO | scchatbot.workflow.nodes.execution | 📝 Recording error and advancing to step 2 (no retries for deterministic operations)
2025-08-21 00:20:17,294 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 00:20:17,294 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 00:20:17,296 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (1/1), running post-execution evaluation
2025-08-21 00:20:17,296 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 00:20:17,296 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 00:20:19,959 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:20:20,885 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:20:20,892 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 00:20:20,893 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-08-21 00:20:21,610 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:20:21,613 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 00:20:22,892 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:20:22,895 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-08-21 00:20:22,895 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-08-21 00:20:22,896 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-08-21 00:20:22,896 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 1 entries
2025-08-21 00:20:22,896 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: []
2025-08-21 00:20:22,896 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 No direct matches found for T cell, checking for related executions...
2025-08-21 00:20:22,896 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: display_processed_umap(T cell)
2025-08-21 00:20:22,896 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 1 missing steps for T cell
2025-08-21 00:20:22,896 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 1 total supplementary steps
2025-08-21 00:20:22,896 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-08-21 00:20:22,896 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 1 supplementary steps to execution plan (attempt 1/2)
2025-08-21 00:20:22,897 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-08-21 00:20:22,897 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 00:20:22,897 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 1
2025-08-21 00:20:22,897 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 0
2025-08-21 00:20:22,897 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 1
2025-08-21 00:20:22,897 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 1
2025-08-21 00:20:22,897 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 00:20:22,897 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 00:20:22,900 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 00:20:22,900 | INFO | scchatbot.workflow.node_base |    Current message: Can you show me the UMAP for T cells...
2025-08-21 00:20:22,902 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 2: Post-evaluation: display_processed_umap for T cell
2025-08-21 00:20:22,903 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_processed_umap'
2025-08-21 00:20:22,904 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_processed_umap' with step parameters: {'cell_type': 'T cell'}
2025-08-21 00:20:22,904 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_processed_umap called with kwargs: {'cell_type': 'T cell'}
2025-08-21 00:20:23,247 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 2 completed successfully
2025-08-21 00:20:23,248 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_processed_umap - HTML preserved
2025-08-21 00:20:23,248 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 3
2025-08-21 00:20:23,248 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 00:20:23,248 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 00:20:23,249 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (2/2), running post-execution evaluation
2025-08-21 00:20:23,249 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 00:20:23,249 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 00:20:24,733 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:20:25,802 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:20:25,803 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 00:20:25,804 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-08-21 00:20:26,575 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:20:26,578 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 00:20:27,443 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:20:27,444 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-08-21 00:20:27,444 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-08-21 00:20:27,444 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-08-21 00:20:27,444 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 2 entries
2025-08-21 00:20:27,444 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 2)
2025-08-21 00:20:27,444 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_processed_umap']
2025-08-21 00:20:27,444 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-08-21 00:20:27,445 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-08-21 00:20:27,445 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-08-21 00:20:27,445 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 00:20:27,445 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 2
2025-08-21 00:20:27,445 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 1
2025-08-21 00:20:27,445 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 1
2025-08-21 00:20:27,445 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-08-21 00:20:27,445 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 00:20:27,445 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 00:20:27,446 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (2/2), running post-execution evaluation
2025-08-21 00:20:27,446 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 00:20:27,446 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 00:20:28,933 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:20:30,263 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:20:30,265 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 00:20:30,265 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-08-21 00:20:31,081 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:20:31,084 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 00:20:32,006 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:20:32,008 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-08-21 00:20:32,008 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-08-21 00:20:32,008 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-08-21 00:20:32,008 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 2 entries
2025-08-21 00:20:32,008 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 2)
2025-08-21 00:20:32,009 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_processed_umap']
2025-08-21 00:20:32,009 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-08-21 00:20:32,009 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-08-21 00:20:32,009 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-08-21 00:20:32,009 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 00:20:32,009 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 2
2025-08-21 00:20:32,009 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 1
2025-08-21 00:20:32,009 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 1
2025-08-21 00:20:32,009 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-08-21 00:20:32,009 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 00:20:32,009 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 00:20:32,010 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-08-21 00:20:32,010 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-08-21 00:20:32,010 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 2 execution steps
2025-08-21 00:20:32,010 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: display_processed_umap for T cell
2025-08-21 00:20:32,010 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 2 function: display_processed_umap
2025-08-21 00:20:32,010 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell'}
2025-08-21 00:20:32,010 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_processed_umap with VisualizationResultAccessor
2025-08-21 00:20:32,010 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 1 successful steps
2025-08-21 00:20:32,011 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 273 characters for synthesis
2025-08-21 00:20:32,011 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-08-21 00:20:32,011 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-08-21 00:20:32,011 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (486 chars)
2025-08-21 00:20:32,011 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-08-21 00:20:32,011 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-08-21 00:20:34,563 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:20:34,565 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 2 execution steps
2025-08-21 00:20:34,565 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: display_processed_umap, success=False, has_result=True
2025-08-21 00:20:34,565 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: display_processed_umap, success=True, has_result=True
2025-08-21 00:20:34,566 | INFO | scchatbot.workflow.nodes.response | ❌ Error extracting plots: name 'plot_fingerlogger' is not defined
2025-08-21 00:20:34,566 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (486 chars)
2025-08-21 00:20:34,614 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-08-21 00:20:34,614 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'c9957109' with 14 available cell types
2025-08-21 00:23:03,092 | INFO | scchatbot.multi_agent_base | 🔄 Reusing session state for 'c9957109' with 14 available cell types
2025-08-21 00:23:03,096 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-08-21 00:23:03,096 | INFO | scchatbot.workflow.node_base |    Current message: display the umap for T cells...
2025-08-21 00:23:04,683 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:23:04,691 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-08-21 00:23:04,692 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-08-21 00:23:04,692 | INFO | scchatbot.workflow.nodes.input_processing | 🧹 CONTEXT CLEANUP: Removing old context message (486 chars)
2025-08-21 00:23:04,692 | INFO | scchatbot.workflow.nodes.input_processing | 🧹 CONTEXT CLEANUP: Removed 1 old context messages
2025-08-21 00:23:04,692 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-08-21 00:23:04,693 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 14 cell types: ['Exhausted T cell', 'Mononuclear phagocyte', 'Stromal cell', 'Glial cell', 'CD8-positive effector T cell', 'CD4-positive central memory T cell', 'CD4-positive effector T cell', 'CD4-positive, alpha-beta T cell', 'Plasmacytoid dendritic cell', 'Natural killer cell', 'NK T cell', 'B cell', 'Regulatory T cell', 'CD8-positive effector memory T cell']
2025-08-21 00:23:04,693 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 451 chars, starts with: 'Cell types currently available in the dataset:
  •...'
2025-08-21 00:23:04,693 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (451 chars)
2025-08-21 00:23:04,693 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'Cell types currently available in the dataset:
  • B cell
  • CD4-positive central memory T cell
  •...'
2025-08-21 00:23:04,693 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (474 chars)
2025-08-21 00:23:04,693 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Preserving 14 discovered cell types from previous operations
2025-08-21 00:23:04,693 | INFO | scchatbot.workflow.nodes.input_processing |    Preserved types: ['B cell', 'CD4-positive central memory T cell', 'CD4-positive effector T cell', 'CD4-positive, alpha-beta T cell', 'CD8-positive effector T cell', 'CD8-positive effector memory T cell', 'Exhausted T cell', 'Glial cell', 'Mononuclear phagocyte', 'NK T cell', 'Natural killer cell', 'Plasmacytoid dendritic cell', 'Regulatory T cell', 'Stromal cell']
2025-08-21 00:23:04,694 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-08-21 00:23:04,695 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-08-21 00:23:04,696 | INFO | scchatbot.workflow.node_base |    Current message: display the umap for T cells...
2025-08-21 00:23:04,696 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-08-21 00:23:04,696 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 3
2025-08-21 00:23:04,696 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 14
2025-08-21 00:23:04,696 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 11
2025-08-21 00:23:04,696 | INFO | scchatbot.workflow.nodes.planning |    • New types discovered: B cell, CD4-positive central memory T cell, CD4-positive effector T cell, CD4-positive, alpha-beta T cell, CD8-positive effector T cell, CD8-positive effector memory T cell, Exhausted T cell, Mononuclear phagocyte, NK T cell, Natural killer cell, Plasmacytoid dendritic cell, Regulatory T cell
2025-08-21 00:23:04,696 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'display the umap for T cells'
2025-08-21 00:23:06,882 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:23:09,799 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:23:09,800 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-08-21 00:23:09,800 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Exhausted T cell', 'Mononuclear phagocyte', 'Stromal cell', 'Glial cell', 'CD8-positive effector T cell', 'CD4-positive central memory T cell', 'CD4-positive effector T cell', 'CD4-positive, alpha-beta T cell', 'Plasmacytoid dendritic cell', 'Natural killer cell', 'NK T cell', 'B cell', 'Regulatory T cell', 'CD8-positive effector memory T cell']
2025-08-21 00:23:09,832 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-08-21 00:23:09,838 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Exhausted T cell' to 'T cell': Exhausted T cell
2025-08-21 00:23:09,839 | INFO | scchatbot.workflow.nodes.planning | ⚠️ No processing path found for 'T cell'
2025-08-21 00:23:09,839 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-08-21 00:23:09,839 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 0
2025-08-21 00:23:09,839 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 0
2025-08-21 00:23:09,839 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 0
2025-08-21 00:23:09,839 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-08-21 00:23:09,840 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-08-21 00:23:09,840 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-08-21 00:23:09,840 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 1 steps
2025-08-21 00:23:09,844 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 1 steps
2025-08-21 00:23:09,844 | INFO | scchatbot.workflow.nodes.planning |    • 0 process_cells steps
2025-08-21 00:23:09,844 | INFO | scchatbot.workflow.nodes.planning |    • 0 validation steps
2025-08-21 00:23:09,845 | INFO | scchatbot.workflow.nodes.planning |    • 0 analysis steps
2025-08-21 00:23:09,845 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-08-21 00:23:09,845 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-08-21 00:23:09,846 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 00:23:09,846 | INFO | scchatbot.workflow.node_base |    Current message: display the umap for T cells...
2025-08-21 00:23:09,851 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Display the UMAP that is annotated with cell types, focusing on T cells.
2025-08-21 00:23:09,851 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_processed_umap'
2025-08-21 00:23:09,851 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_processed_umap' with step parameters: {}
2025-08-21 00:23:09,851 | INFO | scchatbot.workflow.nodes.execution | ❌ No suitable cell type found for display_processed_umap
2025-08-21 00:23:09,851 | INFO | scchatbot.workflow.nodes.execution | ❌ Step execution blocked: No processed cell data available for display_processed_umap
2025-08-21 00:23:09,852 | INFO | scchatbot.workflow.nodes.execution | 📄 Text storage: display_processed_umap - Truncated to 500 chars
2025-08-21 00:23:09,852 | INFO | scchatbot.workflow.nodes.execution | ❌ Step failed: No processed cell data available for display_processed_umap
2025-08-21 00:23:09,852 | INFO | scchatbot.workflow.nodes.execution | 📝 Recording error and advancing to step 2 (no retries for deterministic operations)
2025-08-21 00:23:09,852 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 00:23:09,852 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 00:23:09,853 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (1/1), running post-execution evaluation
2025-08-21 00:23:09,854 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 00:23:09,854 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 00:23:12,059 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:23:12,878 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:23:12,881 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 00:23:12,882 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-08-21 00:23:13,475 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:23:13,479 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 00:23:14,191 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:23:14,196 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-08-21 00:23:14,196 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-08-21 00:23:14,196 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-08-21 00:23:14,196 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 1 entries
2025-08-21 00:23:14,196 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: []
2025-08-21 00:23:14,196 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 No direct matches found for T cell, checking for related executions...
2025-08-21 00:23:14,196 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: display_processed_umap(T cell)
2025-08-21 00:23:14,196 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 1 missing steps for T cell
2025-08-21 00:23:14,196 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 1 total supplementary steps
2025-08-21 00:23:14,197 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-08-21 00:23:14,197 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 1 supplementary steps to execution plan (attempt 1/2)
2025-08-21 00:23:14,197 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-08-21 00:23:14,197 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 00:23:14,197 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 1
2025-08-21 00:23:14,197 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 0
2025-08-21 00:23:14,197 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 1
2025-08-21 00:23:14,197 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 1
2025-08-21 00:23:14,197 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 00:23:14,197 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 00:23:14,199 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 00:23:14,199 | INFO | scchatbot.workflow.node_base |    Current message: display the umap for T cells...
2025-08-21 00:23:14,200 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 2: Post-evaluation: display_processed_umap for T cell
2025-08-21 00:23:14,200 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_processed_umap'
2025-08-21 00:23:14,201 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_processed_umap' with step parameters: {'cell_type': 'T cell'}
2025-08-21 00:23:14,201 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_processed_umap called with kwargs: {'cell_type': 'T cell'}
2025-08-21 00:23:14,250 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 2 completed successfully
2025-08-21 00:23:14,251 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_processed_umap - HTML preserved
2025-08-21 00:23:14,251 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 3
2025-08-21 00:23:14,251 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 00:23:14,251 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 00:23:14,252 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (2/2), running post-execution evaluation
2025-08-21 00:23:14,252 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 00:23:14,252 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 00:23:16,049 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:23:16,547 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:23:16,550 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 00:23:16,550 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-08-21 00:23:17,522 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:23:17,525 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 00:23:18,507 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:23:18,511 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-08-21 00:23:18,511 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-08-21 00:23:18,511 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-08-21 00:23:18,511 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 2 entries
2025-08-21 00:23:18,512 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 2)
2025-08-21 00:23:18,512 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_processed_umap']
2025-08-21 00:23:18,512 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-08-21 00:23:18,512 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-08-21 00:23:18,512 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-08-21 00:23:18,512 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 00:23:18,512 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 2
2025-08-21 00:23:18,512 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 1
2025-08-21 00:23:18,512 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 1
2025-08-21 00:23:18,512 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-08-21 00:23:18,512 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 00:23:18,513 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 00:23:18,516 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (2/2), running post-execution evaluation
2025-08-21 00:23:18,516 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 00:23:18,516 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 00:23:20,455 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:23:21,015 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:23:21,019 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 00:23:21,020 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-08-21 00:23:21,623 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:23:21,627 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 00:23:22,583 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:23:22,589 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-08-21 00:23:22,590 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-08-21 00:23:22,590 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-08-21 00:23:22,590 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 2 entries
2025-08-21 00:23:22,590 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 2)
2025-08-21 00:23:22,590 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_processed_umap']
2025-08-21 00:23:22,590 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-08-21 00:23:22,591 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-08-21 00:23:22,591 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-08-21 00:23:22,591 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 00:23:22,591 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 2
2025-08-21 00:23:22,591 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 1
2025-08-21 00:23:22,591 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 1
2025-08-21 00:23:22,591 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-08-21 00:23:22,591 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 00:23:22,591 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 00:23:22,593 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-08-21 00:23:22,595 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-08-21 00:23:22,595 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 2 execution steps
2025-08-21 00:23:22,595 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: display_processed_umap for T cell
2025-08-21 00:23:22,595 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 2 function: display_processed_umap
2025-08-21 00:23:22,595 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell'}
2025-08-21 00:23:22,595 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_processed_umap with VisualizationResultAccessor
2025-08-21 00:23:22,596 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 1 successful steps
2025-08-21 00:23:22,596 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 273 characters for synthesis
2025-08-21 00:23:22,596 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-08-21 00:23:22,596 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-08-21 00:23:22,596 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (474 chars)
2025-08-21 00:23:22,596 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-08-21 00:23:22,596 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-08-21 00:23:24,038 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:23:24,043 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 2 execution steps
2025-08-21 00:23:24,043 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: display_processed_umap, success=False, has_result=True
2025-08-21 00:23:24,043 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: display_processed_umap, success=True, has_result=True
2025-08-21 00:23:24,044 | INFO | scchatbot.workflow.nodes.response | ❌ Error extracting plots: name 'plot_fingerlogger' is not defined
2025-08-21 00:23:24,044 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (464 chars)
2025-08-21 00:23:24,098 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-08-21 00:23:24,098 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'c9957109' with 14 available cell types
2025-08-21 00:46:36,546 | INFO | django.utils.autoreload | /Users/ashleyjvarghese/Desktop/scChat_v2/scchatbot/workflow/nodes/execution.py changed, reloading.
2025-08-21 00:46:39,948 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-08-21 00:47:15,877 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-08-21 00:47:20,727 | INFO | faiss.loader | Loading faiss.
2025-08-21 00:47:20,751 | INFO | faiss.loader | Successfully loaded faiss.
2025-08-21 00:47:21,442 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-08-21 00:47:24,965 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-21 00:47:25,090 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 00:47:25,107 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 00:47:25,107 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-08-21 00:47:25,107 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-21 00:47:25,129 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 00:47:25,131 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 00:47:25,132 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-08-21 00:47:26,505 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-08-21 00:47:26,506 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-08-21 00:47:26,508 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/homebrew/Caskroom/mambaforge/base/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-08-21 00:48:06,637 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:48:27,624 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:51:29,982 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:51:32,770 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-08-21 00:51:32,770 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-08-21 00:51:32,770 | INFO | scchatbot.multi_agent_base | 1
2025-08-21 00:51:33,370 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-08-21 00:51:33,370 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-21 00:51:37,283 | INFO | scchatbot.multi_agent_base | 2
2025-08-21 00:51:37,287 | INFO | scchatbot.multi_agent_base | 3
2025-08-21 00:51:37,287 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-08-21 00:56:56,095 | WARNING | django.request | Not Found: /ws/chat/c9957109/
2025-08-21 00:56:58,008 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'c9957109'
2025-08-21 00:56:58,016 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-08-21 00:56:58,017 | INFO | scchatbot.workflow.node_base |    Current message: hi...
2025-08-21 00:56:58,736 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:56:58,749 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
[]
```'
2025-08-21 00:56:58,749 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 3 initial cell types
2025-08-21 00:56:58,749 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-08-21 00:56:58,750 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-08-21 00:56:58,750 | INFO | scchatbot.workflow.node_base |    Current message: hi...
2025-08-21 00:56:58,750 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-08-21 00:56:58,751 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 3
2025-08-21 00:56:58,751 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 3
2025-08-21 00:56:58,751 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-08-21 00:56:58,751 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'hi'
2025-08-21 00:56:59,133 | WARNING | django.request | Not Found: /ws/chat/c9957109/
2025-08-21 00:57:00,414 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:57:01,737 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:57:01,747 | INFO | scchatbot.workflow.nodes.planning | 🔍 No specific cell types identified in question
2025-08-21 00:57:01,747 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-08-21 00:57:01,747 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 1 steps
2025-08-21 00:57:01,747 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 1 steps
2025-08-21 00:57:01,747 | INFO | scchatbot.workflow.nodes.planning |    • 0 process_cells steps
2025-08-21 00:57:01,747 | INFO | scchatbot.workflow.nodes.planning |    • 0 validation steps
2025-08-21 00:57:01,747 | INFO | scchatbot.workflow.nodes.planning |    • 0 analysis steps
2025-08-21 00:57:01,747 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-08-21 00:57:01,747 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-08-21 00:57:01,748 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 00:57:01,748 | INFO | scchatbot.workflow.node_base |    Current message: hi...
2025-08-21 00:57:01,754 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Respond to the user's greeting.
2025-08-21 00:57:01,754 | INFO | scchatbot.workflow.nodes.execution | ℹ️ No function for this step; treating as direct-answer/no-op.
2025-08-21 00:57:01,755 | INFO | scchatbot.workflow.nodes.execution | 📄 Text storage: direct_answer - Truncated to 500 chars
2025-08-21 00:57:01,755 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-08-21 00:57:01,755 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 00:57:01,756 | INFO | scchatbot.workflow.nodes.evaluation | ℹ️ Evaluator: no callable steps in plan; skipping post-execution evaluation.
2025-08-21 00:57:01,757 | INFO | scchatbot.workflow.nodes.evaluation | ℹ️ Evaluator: no callable steps in plan; skipping post-execution evaluation.
2025-08-21 00:57:01,758 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-08-21 00:57:01,758 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-08-21 00:57:01,758 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 1 execution steps
2025-08-21 00:57:01,758 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: direct_answer for step_0
2025-08-21 00:57:01,758 | INFO | scchatbot.workflow.unified_result_accessor | ⚠️ No accessor found for function: direct_answer
2025-08-21 00:57:01,758 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 1 successful steps
2025-08-21 00:57:01,758 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 64 characters for synthesis
2025-08-21 00:57:01,758 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-08-21 00:57:01,758 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-08-21 00:57:01,759 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-08-21 00:57:01,759 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-08-21 00:57:02,372 | WARNING | django.request | Not Found: /ws/chat/c9957109/
2025-08-21 00:57:03,437 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 00:57:03,447 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 1 execution steps
2025-08-21 00:57:03,447 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: direct_answer, success=True, has_result=True
2025-08-21 00:57:03,447 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: No valid plots found
2025-08-21 00:57:03,447 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 0 individual plots
2025-08-21 00:57:03,447 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (237 chars)
2025-08-21 00:57:03,701 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-08-21 00:57:03,701 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'c9957109' with 3 available cell types
2025-08-21 01:01:33,202 | INFO | scchatbot.multi_agent_base | 🔄 Reusing session state for 'c9957109' with 3 available cell types
2025-08-21 01:01:33,225 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-08-21 01:01:33,225 | INFO | scchatbot.workflow.node_base |    Current message: display the umap for t cells...
2025-08-21 01:01:34,056 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:01:34,060 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
[]
```'
2025-08-21 01:01:34,060 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Preserving 3 discovered cell types from previous operations
2025-08-21 01:01:34,061 | INFO | scchatbot.workflow.nodes.input_processing |    Preserved types: ['Glial cell', 'Immune cell', 'Stromal cell']
2025-08-21 01:01:34,061 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-08-21 01:01:34,062 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-08-21 01:01:34,062 | INFO | scchatbot.workflow.node_base |    Current message: display the umap for t cells...
2025-08-21 01:01:34,062 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-08-21 01:01:34,062 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 3
2025-08-21 01:01:34,062 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 3
2025-08-21 01:01:34,063 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-08-21 01:01:34,063 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'display the umap for t cells'
2025-08-21 01:01:36,416 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:01:37,882 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:01:37,894 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-08-21 01:01:37,894 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Immune cell', 'Stromal cell', 'Glial cell']
2025-08-21 01:01:37,942 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-08-21 01:01:37,952 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-08-21 01:01:37,952 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-08-21 01:01:37,952 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-08-21 01:01:37,952 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-08-21 01:01:37,952 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-08-21 01:01:37,952 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-08-21 01:01:37,952 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-08-21 01:01:37,952 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 0
2025-08-21 01:01:37,952 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-08-21 01:01:37,952 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-08-21 01:01:37,952 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-08-21 01:01:37,952 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 3 steps
2025-08-21 01:01:37,952 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 3 steps
2025-08-21 01:01:37,952 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-08-21 01:01:37,952 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-08-21 01:01:37,952 | INFO | scchatbot.workflow.nodes.planning |    • 1 analysis steps
2025-08-21 01:01:37,953 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-08-21 01:01:37,953 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-08-21 01:01:37,953 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 01:01:37,954 | INFO | scchatbot.workflow.node_base |    Current message: display the umap for t cells...
2025-08-21 01:01:37,955 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-08-21 01:01:37,955 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-08-21 01:02:08,978 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:02:26,201 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:05:25,189 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:05:25,208 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-08-21 01:05:25,208 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-08-21 01:05:25,209 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['Mononuclear phagocyte', 'T cell', 'Natural killer cell', 'Plasmacytoid dendritic cell', 'B cell']
2025-08-21 01:05:25,339 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mononuclear phagocyte
2025-08-21 01:05:25,339 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: T cell
2025-08-21 01:05:25,339 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Natural killer cell
2025-08-21 01:05:25,339 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Plasmacytoid dendritic cell
2025-08-21 01:05:25,339 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: B cell
2025-08-21 01:05:25,343 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-08-21 01:05:25,343 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-08-21 01:05:25,343 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 01:05:25,343 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 01:05:25,346 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-08-21 01:05:25,346 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-08-21 01:05:25,346 | INFO | scchatbot.workflow.node_base |    Current message: Validating Immune cell -> ['T cell']...
2025-08-21 01:05:25,347 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'T cell'
2025-08-21 01:05:25,347 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-08-21 01:05:25,347 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Validation passed: All 1 expected cell types found successfully
2025-08-21 01:05:25,347 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: success
2025-08-21 01:05:25,347 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['T cell'], found=['T cell'], missing=[]
2025-08-21 01:05:25,348 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'success', 'message': 'All 1 expected cell types found successfully', 'found_children': ['T cell'], 'missing_children': [], 'available_types': ['Glial cell', 'Plasmacytoid dendritic cell', 'B cell', 'Natural killer cell', 'Stromal cell', 'T cell', 'Mononuclear phagocyte']}
2025-08-21 01:05:25,348 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: []
2025-08-21 01:05:25,348 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 1 remaining steps...
2025-08-21 01:05:25,348 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3: display_processed_umap(params={})
2025-08-21 01:05:25,348 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3 cell type 'None' not in missing list []
2025-08-21 01:05:25,348 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 3
2025-08-21 01:05:25,349 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 01:05:25,349 | INFO | scchatbot.workflow.node_base |    Current message: display the umap for t cells...
2025-08-21 01:05:25,350 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Display the UMAP visualization for the currently annotated cell types.
2025-08-21 01:05:25,350 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_processed_umap'
2025-08-21 01:05:25,351 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_processed_umap' with step parameters: {}
2025-08-21 01:05:25,351 | INFO | scchatbot.workflow.nodes.execution | ✅ Found cell type for display_processed_umap: Immune cell
2025-08-21 01:05:25,351 | INFO | scchatbot.workflow.nodes.execution | 📝 Updating step parameters with enhanced params for execution history tracking
2025-08-21 01:05:25,351 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_processed_umap called with kwargs: {'cell_type': 'Immune cell'}
2025-08-21 01:05:25,656 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-08-21 01:05:25,656 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_processed_umap - HTML preserved
2025-08-21 01:05:25,657 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-08-21 01:05:25,657 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 01:05:25,657 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 01:05:25,658 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (3/3), running post-execution evaluation
2025-08-21 01:05:25,658 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 01:05:25,658 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 01:05:27,652 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:05:28,654 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:05:28,657 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 01:05:28,658 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-08-21 01:05:29,474 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:05:29,477 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 01:05:30,368 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:05:30,377 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-08-21 01:05:30,377 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-08-21 01:05:30,378 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-08-21 01:05:30,378 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 3 entries
2025-08-21 01:05:30,378 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: []
2025-08-21 01:05:30,378 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 No direct matches found for T cell, checking for related executions...
2025-08-21 01:05:30,378 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: display_processed_umap(T cell)
2025-08-21 01:05:30,378 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 1 missing steps for T cell
2025-08-21 01:05:30,379 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 1 total supplementary steps
2025-08-21 01:05:30,379 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-08-21 01:05:30,379 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 1 supplementary steps to execution plan (attempt 1/2)
2025-08-21 01:05:30,379 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-08-21 01:05:30,379 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 01:05:30,379 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 3
2025-08-21 01:05:30,379 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-08-21 01:05:30,380 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-08-21 01:05:30,380 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 1
2025-08-21 01:05:30,380 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 01:05:30,380 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 01:05:30,382 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 01:05:30,382 | INFO | scchatbot.workflow.node_base |    Current message: display the umap for t cells...
2025-08-21 01:05:30,384 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Post-evaluation: display_processed_umap for T cell
2025-08-21 01:05:30,385 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_processed_umap'
2025-08-21 01:05:30,385 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_processed_umap' with step parameters: {'cell_type': 'T cell'}
2025-08-21 01:05:30,385 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_processed_umap called with kwargs: {'cell_type': 'T cell'}
2025-08-21 01:05:30,480 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-08-21 01:05:30,480 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_processed_umap - HTML preserved
2025-08-21 01:05:30,481 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-08-21 01:05:30,481 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 01:05:30,481 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 01:05:30,482 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-08-21 01:05:30,482 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 01:05:30,482 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 01:05:32,652 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:05:33,573 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:05:33,581 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 01:05:33,581 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-08-21 01:05:34,393 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:05:34,396 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 01:05:35,108 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:05:35,120 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-08-21 01:05:35,120 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-08-21 01:05:35,120 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-08-21 01:05:35,120 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-08-21 01:05:35,120 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 4)
2025-08-21 01:05:35,120 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_processed_umap']
2025-08-21 01:05:35,121 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-08-21 01:05:35,121 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-08-21 01:05:35,121 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-08-21 01:05:35,121 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 01:05:35,121 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-08-21 01:05:35,121 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-08-21 01:05:35,121 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-08-21 01:05:35,121 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-08-21 01:05:35,121 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 01:05:35,121 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 01:05:35,124 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-08-21 01:05:35,124 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 01:05:35,125 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 01:05:37,968 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:05:38,753 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:05:38,763 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 01:05:38,764 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-08-21 01:05:39,420 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:05:39,426 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 01:05:40,122 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:05:40,125 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-08-21 01:05:40,125 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-08-21 01:05:40,125 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-08-21 01:05:40,125 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-08-21 01:05:40,125 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 4)
2025-08-21 01:05:40,126 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_processed_umap']
2025-08-21 01:05:40,126 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-08-21 01:05:40,126 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-08-21 01:05:40,126 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-08-21 01:05:40,126 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 01:05:40,126 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-08-21 01:05:40,126 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-08-21 01:05:40,126 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-08-21 01:05:40,126 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-08-21 01:05:40,126 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 01:05:40,126 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 01:05:40,127 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-08-21 01:05:40,128 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-08-21 01:05:40,128 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 4 execution steps
2025-08-21 01:05:40,128 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-08-21 01:05:40,128 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-08-21 01:05:40,128 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-08-21 01:05:40,128 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-08-21 01:05:40,128 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: display_processed_umap for step_2
2025-08-21 01:05:40,128 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 3 function: display_processed_umap
2025-08-21 01:05:40,128 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {}
2025-08-21 01:05:40,128 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_processed_umap with VisualizationResultAccessor
2025-08-21 01:05:40,129 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: display_processed_umap for T cell
2025-08-21 01:05:40,129 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 4 function: display_processed_umap
2025-08-21 01:05:40,129 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell'}
2025-08-21 01:05:40,129 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_processed_umap with VisualizationResultAccessor
2025-08-21 01:05:40,129 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 4 successful steps
2025-08-21 01:05:40,130 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 521 characters for synthesis
2025-08-21 01:05:40,130 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-08-21 01:05:40,130 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-08-21 01:05:40,130 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-08-21 01:05:40,130 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-08-21 01:05:41,215 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:05:41,218 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 4 execution steps
2025-08-21 01:05:41,218 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: process_cells, success=True, has_result=True
2025-08-21 01:05:41,218 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: validate_processing_results, success=True, has_result=True
2025-08-21 01:05:41,218 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: display_processed_umap, success=True, has_result=True
2025-08-21 01:05:41,218 | INFO | scchatbot.workflow.nodes.response | ❌ Error extracting plots: name 'plot_fingerlogger' is not defined
2025-08-21 01:05:41,218 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (198 chars)
2025-08-21 01:05:41,357 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-08-21 01:05:41,358 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'c9957109' with 7 available cell types
2025-08-21 01:18:56,538 | INFO | django.utils.autoreload | /Users/ashleyjvarghese/Desktop/scChat_v2/scchatbot/workflow/nodes/response.py changed, reloading.
2025-08-21 01:18:59,678 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-08-21 01:19:04,405 | INFO | faiss.loader | Loading faiss.
2025-08-21 01:19:04,426 | INFO | faiss.loader | Successfully loaded faiss.
2025-08-21 01:19:05,136 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-08-21 01:19:08,627 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-21 01:19:08,763 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:19:08,771 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:19:08,771 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-08-21 01:19:08,772 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-21 01:19:08,797 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:19:08,800 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:19:08,800 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-08-21 01:19:10,137 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-08-21 01:19:10,137 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-08-21 01:19:10,140 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/homebrew/Caskroom/mambaforge/base/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-08-21 01:19:29,224 | INFO | scchatbot.multi_agent_base | 🧹 Starting cleanup...
2025-08-21 01:19:29,226 | INFO | scchatbot.multi_agent_base | 🧹 Cleared directory: scchatbot/enrichment
2025-08-21 01:19:29,226 | INFO | scchatbot.multi_agent_base | 🧹 Cleared directory: scchatbot/deg_res
2025-08-21 01:19:29,226 | INFO | scchatbot.multi_agent_base | 🧹 Cleared directory: figures
2025-08-21 01:19:29,226 | INFO | scchatbot.multi_agent_base | 🧹 Cleared directory: umaps/annotated
2025-08-21 01:19:29,226 | INFO | scchatbot.multi_agent_base | ✅ Cleanup completed
2025-08-21 01:19:31,314 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-08-21 01:19:36,130 | INFO | faiss.loader | Loading faiss.
2025-08-21 01:19:36,142 | INFO | faiss.loader | Successfully loaded faiss.
2025-08-21 01:19:36,809 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-08-21 01:19:40,343 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-21 01:19:40,451 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:19:40,458 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:19:40,458 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-08-21 01:19:40,459 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-21 01:19:40,491 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:19:40,493 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:19:40,493 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-08-21 01:19:41,874 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-08-21 01:19:41,874 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-08-21 01:19:41,876 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/homebrew/Caskroom/mambaforge/base/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-08-21 01:19:47,689 | INFO | scchatbot.multi_agent_base | 🧹 Starting cleanup...
2025-08-21 01:19:47,690 | INFO | scchatbot.multi_agent_base | 🧹 Cleared directory: scchatbot/enrichment
2025-08-21 01:19:47,690 | INFO | scchatbot.multi_agent_base | 🧹 Cleared directory: scchatbot/deg_res
2025-08-21 01:19:47,690 | INFO | scchatbot.multi_agent_base | 🧹 Cleared directory: figures
2025-08-21 01:19:47,690 | INFO | scchatbot.multi_agent_base | 🧹 Cleared directory: umaps/annotated
2025-08-21 01:19:47,690 | INFO | scchatbot.multi_agent_base | ✅ Cleanup completed
2025-08-21 01:19:49,534 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-08-21 01:19:54,359 | INFO | faiss.loader | Loading faiss.
2025-08-21 01:19:54,370 | INFO | faiss.loader | Successfully loaded faiss.
2025-08-21 01:19:55,034 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-08-21 01:19:59,120 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-21 01:19:59,231 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:19:59,239 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:19:59,240 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-08-21 01:19:59,240 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-21 01:19:59,268 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:19:59,270 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:19:59,270 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-08-21 01:20:00,789 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-08-21 01:20:00,790 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-08-21 01:20:00,792 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/homebrew/Caskroom/mambaforge/base/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-08-21 01:20:49,717 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:21:11,698 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:25:44,197 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:25:46,239 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-08-21 01:25:46,240 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-08-21 01:25:46,240 | INFO | scchatbot.multi_agent_base | 1
2025-08-21 01:25:46,960 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-08-21 01:25:46,960 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-21 01:25:50,769 | INFO | scchatbot.multi_agent_base | 2
2025-08-21 01:25:50,774 | INFO | scchatbot.multi_agent_base | 3
2025-08-21 01:25:50,774 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-08-21 01:25:53,562 | WARNING | django.request | Not Found: /ws/chat/c9957109/
2025-08-21 01:25:55,039 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'c9957109'
2025-08-21 01:25:55,047 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-08-21 01:25:55,047 | INFO | scchatbot.workflow.node_base |    Current message: hi...
2025-08-21 01:25:55,845 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:25:55,849 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
[]
```'
2025-08-21 01:25:55,849 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 3 initial cell types
2025-08-21 01:25:55,849 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-08-21 01:25:55,851 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-08-21 01:25:55,851 | INFO | scchatbot.workflow.node_base |    Current message: hi...
2025-08-21 01:25:55,851 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-08-21 01:25:55,851 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 3
2025-08-21 01:25:55,851 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 3
2025-08-21 01:25:55,851 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-08-21 01:25:55,851 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'hi'
2025-08-21 01:25:56,594 | WARNING | django.request | Not Found: /ws/chat/c9957109/
2025-08-21 01:25:58,169 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:25:59,334 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:25:59,336 | INFO | scchatbot.workflow.nodes.planning | 🔍 No specific cell types identified in question
2025-08-21 01:25:59,337 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-08-21 01:25:59,337 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 1 steps
2025-08-21 01:25:59,337 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 1 steps
2025-08-21 01:25:59,337 | INFO | scchatbot.workflow.nodes.planning |    • 0 process_cells steps
2025-08-21 01:25:59,337 | INFO | scchatbot.workflow.nodes.planning |    • 0 validation steps
2025-08-21 01:25:59,337 | INFO | scchatbot.workflow.nodes.planning |    • 0 analysis steps
2025-08-21 01:25:59,337 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-08-21 01:25:59,337 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-08-21 01:25:59,339 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 01:25:59,339 | INFO | scchatbot.workflow.node_base |    Current message: hi...
2025-08-21 01:25:59,347 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Acknowledge the user's greeting and provide a friendly response.
2025-08-21 01:25:59,347 | INFO | scchatbot.workflow.nodes.execution | ℹ️ No function for this step; treating as direct-answer/no-op.
2025-08-21 01:25:59,348 | INFO | scchatbot.workflow.nodes.execution | 📄 Text storage: direct_answer - Truncated to 500 chars
2025-08-21 01:25:59,348 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-08-21 01:25:59,349 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 01:25:59,351 | INFO | scchatbot.workflow.nodes.evaluation | ℹ️ Evaluator: no callable steps in plan; skipping post-execution evaluation.
2025-08-21 01:25:59,352 | INFO | scchatbot.workflow.nodes.evaluation | ℹ️ Evaluator: no callable steps in plan; skipping post-execution evaluation.
2025-08-21 01:25:59,353 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-08-21 01:25:59,353 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 1 execution steps
2025-08-21 01:25:59,354 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: direct_answer for step_0
2025-08-21 01:25:59,354 | INFO | scchatbot.workflow.unified_result_accessor | ⚠️ No accessor found for function: direct_answer
2025-08-21 01:25:59,354 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 1 successful steps
2025-08-21 01:25:59,354 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 64 characters for synthesis
2025-08-21 01:25:59,604 | WARNING | django.request | Not Found: /ws/chat/c9957109/
2025-08-21 01:26:00,773 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:26:00,883 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-08-21 01:26:00,883 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'c9957109' with 3 available cell types
2025-08-21 01:26:06,861 | INFO | scchatbot.multi_agent_base | 🔄 Reusing session state for 'c9957109' with 3 available cell types
2025-08-21 01:26:06,872 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-08-21 01:26:06,872 | INFO | scchatbot.workflow.node_base |    Current message: can you display the umap for t cells...
2025-08-21 01:26:08,793 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:26:08,797 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-08-21 01:26:08,797 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-08-21 01:26:08,798 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-08-21 01:26:08,798 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 3 cell types: ['Immune cell', 'Stromal cell', 'Glial cell']
2025-08-21 01:26:08,798 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 136 chars, starts with: 'Cell types currently available in the dataset:
  •...'
2025-08-21 01:26:08,798 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (136 chars)
2025-08-21 01:26:08,798 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'Cell types currently available in the dataset:
  • Glial cell
  • Immune cell
  • Stromal cell

Rece...'
2025-08-21 01:26:08,798 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (159 chars)
2025-08-21 01:26:08,798 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Preserving 3 discovered cell types from previous operations
2025-08-21 01:26:08,798 | INFO | scchatbot.workflow.nodes.input_processing |    Preserved types: ['Glial cell', 'Immune cell', 'Stromal cell']
2025-08-21 01:26:08,798 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-08-21 01:26:08,800 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-08-21 01:26:08,800 | INFO | scchatbot.workflow.node_base |    Current message: can you display the umap for t cells...
2025-08-21 01:26:08,800 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-08-21 01:26:08,800 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 3
2025-08-21 01:26:08,800 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 3
2025-08-21 01:26:08,800 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-08-21 01:26:08,800 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'can you display the umap for t cells'
2025-08-21 01:26:10,842 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:26:12,548 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:26:12,552 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-08-21 01:26:12,552 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Immune cell', 'Stromal cell', 'Glial cell']
2025-08-21 01:26:12,617 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-08-21 01:26:12,630 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-08-21 01:26:12,630 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-08-21 01:26:12,630 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-08-21 01:26:12,630 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-08-21 01:26:12,630 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-08-21 01:26:12,630 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-08-21 01:26:12,631 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-08-21 01:26:12,631 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 0
2025-08-21 01:26:12,631 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-08-21 01:26:12,631 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-08-21 01:26:12,631 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-08-21 01:26:12,632 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 3 steps
2025-08-21 01:26:12,633 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 3 steps
2025-08-21 01:26:12,633 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-08-21 01:26:12,633 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-08-21 01:26:12,633 | INFO | scchatbot.workflow.nodes.planning |    • 1 analysis steps
2025-08-21 01:26:12,633 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-08-21 01:26:12,633 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-08-21 01:26:12,634 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 01:26:12,634 | INFO | scchatbot.workflow.node_base |    Current message: can you display the umap for t cells...
2025-08-21 01:26:12,635 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-08-21 01:26:12,635 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-08-21 01:26:38,485 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:26:53,812 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:27:53,408 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:27:53,418 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-08-21 01:27:53,418 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-08-21 01:27:53,421 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['Mononuclear phagocyte', 'T cell', 'Natural killer cell', 'Plasmacytoid dendritic cell', 'B cell']
2025-08-21 01:27:53,574 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mononuclear phagocyte
2025-08-21 01:27:53,575 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: T cell
2025-08-21 01:27:53,575 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Natural killer cell
2025-08-21 01:27:53,575 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Plasmacytoid dendritic cell
2025-08-21 01:27:53,575 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: B cell
2025-08-21 01:27:53,579 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-08-21 01:27:53,579 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-08-21 01:27:53,579 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 01:27:53,579 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 01:27:53,582 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-08-21 01:27:53,582 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-08-21 01:27:53,582 | INFO | scchatbot.workflow.node_base |    Current message: Validating Immune cell -> ['T cell']...
2025-08-21 01:27:53,582 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'T cell'
2025-08-21 01:27:53,583 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-08-21 01:27:53,583 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Validation passed: All 1 expected cell types found successfully
2025-08-21 01:27:53,583 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: success
2025-08-21 01:27:53,583 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['T cell'], found=['T cell'], missing=[]
2025-08-21 01:27:53,583 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'success', 'message': 'All 1 expected cell types found successfully', 'found_children': ['T cell'], 'missing_children': [], 'available_types': ['Plasmacytoid dendritic cell', 'Glial cell', 'T cell', 'Stromal cell', 'Natural killer cell', 'Mononuclear phagocyte', 'B cell']}
2025-08-21 01:27:53,583 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: []
2025-08-21 01:27:53,583 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 1 remaining steps...
2025-08-21 01:27:53,583 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3: display_processed_umap(params={})
2025-08-21 01:27:53,583 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3 cell type 'None' not in missing list []
2025-08-21 01:27:53,583 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 3
2025-08-21 01:27:53,584 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 01:27:53,584 | INFO | scchatbot.workflow.node_base |    Current message: can you display the umap for t cells...
2025-08-21 01:27:53,585 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Display the UMAP visualization annotated with the currently available cell types.
2025-08-21 01:27:53,585 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_processed_umap'
2025-08-21 01:27:53,585 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_processed_umap' with step parameters: {}
2025-08-21 01:27:53,586 | INFO | scchatbot.workflow.nodes.execution | ✅ Found cell type for display_processed_umap: Immune cell
2025-08-21 01:27:53,586 | INFO | scchatbot.workflow.nodes.execution | 📝 Updating step parameters with enhanced params for execution history tracking
2025-08-21 01:27:53,586 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_processed_umap called with kwargs: {'cell_type': 'Immune cell'}
2025-08-21 01:27:53,884 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-08-21 01:27:53,884 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_processed_umap - HTML preserved
2025-08-21 01:27:53,884 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-08-21 01:27:53,884 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 01:27:53,884 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 01:27:53,885 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (3/3), running post-execution evaluation
2025-08-21 01:27:53,885 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 01:27:53,885 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 01:27:55,458 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:27:56,582 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:27:56,584 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 01:27:56,585 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-08-21 01:27:57,300 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:27:57,304 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 01:27:57,993 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:27:57,997 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-08-21 01:27:57,998 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-08-21 01:27:57,998 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-08-21 01:27:57,998 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 3 entries
2025-08-21 01:27:57,999 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: []
2025-08-21 01:27:57,999 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 No direct matches found for T cell, checking for related executions...
2025-08-21 01:27:57,999 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: display_processed_umap(T cell)
2025-08-21 01:27:57,999 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 1 missing steps for T cell
2025-08-21 01:27:57,999 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 1 total supplementary steps
2025-08-21 01:27:57,999 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-08-21 01:27:57,999 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 1 supplementary steps to execution plan (attempt 1/2)
2025-08-21 01:27:57,999 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-08-21 01:27:57,999 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 01:27:58,000 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 3
2025-08-21 01:27:58,000 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-08-21 01:27:58,000 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-08-21 01:27:58,000 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 1
2025-08-21 01:27:58,000 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 01:27:58,000 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 01:27:58,003 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 01:27:58,003 | INFO | scchatbot.workflow.node_base |    Current message: can you display the umap for t cells...
2025-08-21 01:27:58,005 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Post-evaluation: display_processed_umap for T cell
2025-08-21 01:27:58,005 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_processed_umap'
2025-08-21 01:27:58,007 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_processed_umap' with step parameters: {'cell_type': 'T cell'}
2025-08-21 01:27:58,007 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_processed_umap called with kwargs: {'cell_type': 'T cell'}
2025-08-21 01:27:58,102 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-08-21 01:27:58,104 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_processed_umap - HTML preserved
2025-08-21 01:27:58,104 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-08-21 01:27:58,104 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 01:27:58,104 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 01:27:58,105 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-08-21 01:27:58,105 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 01:27:58,105 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 01:28:00,481 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:28:01,194 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:28:01,198 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 01:28:01,198 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-08-21 01:28:02,624 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:28:02,627 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 01:28:04,222 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:28:04,231 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-08-21 01:28:04,231 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-08-21 01:28:04,231 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-08-21 01:28:04,231 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-08-21 01:28:04,231 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 4)
2025-08-21 01:28:04,231 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_processed_umap']
2025-08-21 01:28:04,231 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-08-21 01:28:04,231 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-08-21 01:28:04,232 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-08-21 01:28:04,232 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 01:28:04,232 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-08-21 01:28:04,232 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-08-21 01:28:04,232 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-08-21 01:28:04,232 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-08-21 01:28:04,232 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 01:28:04,232 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 01:28:04,233 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-08-21 01:28:04,233 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 01:28:04,233 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 01:28:06,244 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:28:07,256 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:28:07,261 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 01:28:07,261 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-08-21 01:28:08,057 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:28:08,059 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 01:28:08,767 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:28:08,769 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-08-21 01:28:08,769 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-08-21 01:28:08,770 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-08-21 01:28:08,770 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-08-21 01:28:08,770 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 4)
2025-08-21 01:28:08,770 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_processed_umap']
2025-08-21 01:28:08,770 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-08-21 01:28:08,770 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-08-21 01:28:08,770 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-08-21 01:28:08,770 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 01:28:08,770 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-08-21 01:28:08,770 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-08-21 01:28:08,770 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-08-21 01:28:08,770 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-08-21 01:28:08,770 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 01:28:08,770 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 01:28:08,771 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-08-21 01:28:08,772 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 4 execution steps
2025-08-21 01:28:08,772 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-08-21 01:28:08,772 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-08-21 01:28:08,772 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-08-21 01:28:08,772 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-08-21 01:28:08,772 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: display_processed_umap for step_2
2025-08-21 01:28:08,772 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 3 function: display_processed_umap
2025-08-21 01:28:08,772 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {}
2025-08-21 01:28:08,772 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_processed_umap with VisualizationResultAccessor
2025-08-21 01:28:08,772 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: display_processed_umap for T cell
2025-08-21 01:28:08,773 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 4 function: display_processed_umap
2025-08-21 01:28:08,773 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell'}
2025-08-21 01:28:08,773 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_processed_umap with VisualizationResultAccessor
2025-08-21 01:28:08,773 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 4 successful steps
2025-08-21 01:28:08,773 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 521 characters for synthesis
2025-08-21 01:28:10,388 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:28:10,439 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-08-21 01:28:10,439 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'c9957109' with 7 available cell types
2025-08-21 01:31:09,068 | INFO | django.utils.autoreload | /Users/ashleyjvarghese/Desktop/scChat_v2/scchatbot/workflow/nodes/response.py changed, reloading.
2025-08-21 01:31:11,914 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-08-21 01:31:16,496 | INFO | faiss.loader | Loading faiss.
2025-08-21 01:31:16,517 | INFO | faiss.loader | Successfully loaded faiss.
2025-08-21 01:31:17,208 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-08-21 01:31:20,637 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-21 01:31:20,759 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:31:20,767 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:31:20,767 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-08-21 01:31:20,768 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-21 01:31:20,816 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:31:20,818 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:31:20,818 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-08-21 01:31:22,072 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-08-21 01:31:22,072 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-08-21 01:31:22,074 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/homebrew/Caskroom/mambaforge/base/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-08-21 01:32:07,007 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:32:27,013 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:33:27,933 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-08-21 01:33:31,749 | INFO | faiss.loader | Loading faiss.
2025-08-21 01:33:31,760 | INFO | faiss.loader | Successfully loaded faiss.
2025-08-21 01:33:32,404 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-08-21 01:33:35,923 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-21 01:33:36,028 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:33:36,035 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:33:36,036 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-08-21 01:33:36,036 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-08-21 01:33:36,063 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:33:36,065 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:33:36,065 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-08-21 01:33:37,322 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-08-21 01:33:37,322 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-08-21 01:33:37,324 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/homebrew/Caskroom/mambaforge/base/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-08-21 01:34:13,668 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:34:33,028 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:38:45,550 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:38:47,508 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-08-21 01:38:47,508 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-08-21 01:38:47,509 | INFO | scchatbot.multi_agent_base | 1
2025-08-21 01:38:48,149 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-08-21 01:38:48,149 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-21 01:38:52,538 | INFO | scchatbot.multi_agent_base | 2
2025-08-21 01:38:52,540 | INFO | scchatbot.multi_agent_base | 3
2025-08-21 01:38:52,540 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-08-21 01:39:09,254 | WARNING | django.request | Not Found: /ws/chat/c9957109/
2025-08-21 01:39:11,665 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'c9957109'
2025-08-21 01:39:11,681 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-08-21 01:39:11,681 | INFO | scchatbot.workflow.node_base |    Current message: Hello...
2025-08-21 01:39:12,329 | WARNING | django.request | Not Found: /ws/chat/c9957109/
2025-08-21 01:39:12,462 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:39:12,467 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '[]'
2025-08-21 01:39:12,467 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 3 initial cell types
2025-08-21 01:39:12,468 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-08-21 01:39:12,470 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-08-21 01:39:12,470 | INFO | scchatbot.workflow.node_base |    Current message: Hello...
2025-08-21 01:39:12,470 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-08-21 01:39:12,470 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 3
2025-08-21 01:39:12,470 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 3
2025-08-21 01:39:12,471 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-08-21 01:39:12,471 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Hello'
2025-08-21 01:39:14,607 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:39:15,342 | WARNING | django.request | Not Found: /ws/chat/c9957109/
2025-08-21 01:39:16,144 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:39:16,145 | INFO | scchatbot.workflow.nodes.planning | 🔍 No specific cell types identified in question
2025-08-21 01:39:16,145 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-08-21 01:39:16,146 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 1 steps
2025-08-21 01:39:16,146 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 1 steps
2025-08-21 01:39:16,146 | INFO | scchatbot.workflow.nodes.planning |    • 0 process_cells steps
2025-08-21 01:39:16,146 | INFO | scchatbot.workflow.nodes.planning |    • 0 validation steps
2025-08-21 01:39:16,146 | INFO | scchatbot.workflow.nodes.planning |    • 0 analysis steps
2025-08-21 01:39:16,146 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-08-21 01:39:16,146 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-08-21 01:39:16,147 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 01:39:16,147 | INFO | scchatbot.workflow.node_base |    Current message: Hello...
2025-08-21 01:39:16,155 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Respond to the user's greeting.
2025-08-21 01:39:16,155 | INFO | scchatbot.workflow.nodes.execution | ℹ️ No function for this step; treating as direct-answer/no-op.
2025-08-21 01:39:16,155 | INFO | scchatbot.workflow.nodes.execution | 📄 Text storage: direct_answer - Truncated to 500 chars
2025-08-21 01:39:16,155 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-08-21 01:39:16,156 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 01:39:16,157 | INFO | scchatbot.workflow.nodes.evaluation | ℹ️ Evaluator: no callable steps in plan; skipping post-execution evaluation.
2025-08-21 01:39:16,158 | INFO | scchatbot.workflow.nodes.evaluation | ℹ️ Evaluator: no callable steps in plan; skipping post-execution evaluation.
2025-08-21 01:39:16,159 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-08-21 01:39:16,159 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-08-21 01:39:16,159 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 1 execution steps
2025-08-21 01:39:16,159 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: direct_answer for step_0
2025-08-21 01:39:16,160 | INFO | scchatbot.workflow.unified_result_accessor | ⚠️ No accessor found for function: direct_answer
2025-08-21 01:39:16,160 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 1 successful steps
2025-08-21 01:39:16,160 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 64 characters for synthesis
2025-08-21 01:39:16,160 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-08-21 01:39:16,160 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-08-21 01:39:16,160 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-08-21 01:39:16,160 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-08-21 01:39:17,271 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:39:17,273 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 1 execution steps
2025-08-21 01:39:17,274 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: direct_answer, success=True, has_result=True
2025-08-21 01:39:17,274 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: No valid plots found
2025-08-21 01:39:17,274 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 0 individual plots
2025-08-21 01:39:17,274 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (240 chars)
2025-08-21 01:39:17,361 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-08-21 01:39:17,361 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'c9957109' with 3 available cell types
2025-08-21 01:39:50,904 | INFO | scchatbot.multi_agent_base | 🔄 Reusing session state for 'c9957109' with 3 available cell types
2025-08-21 01:39:50,927 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-08-21 01:39:50,928 | INFO | scchatbot.workflow.node_base |    Current message: display the t cell umap please...
2025-08-21 01:39:52,087 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:39:52,088 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-08-21 01:39:52,088 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-08-21 01:39:52,088 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-08-21 01:39:52,088 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 3 cell types: ['Immune cell', 'Stromal cell', 'Glial cell']
2025-08-21 01:39:52,088 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 136 chars, starts with: 'Cell types currently available in the dataset:
  •...'
2025-08-21 01:39:52,088 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (136 chars)
2025-08-21 01:39:52,089 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'Cell types currently available in the dataset:
  • Glial cell
  • Immune cell
  • Stromal cell

Rece...'
2025-08-21 01:39:52,089 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (159 chars)
2025-08-21 01:39:52,089 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Preserving 3 discovered cell types from previous operations
2025-08-21 01:39:52,089 | INFO | scchatbot.workflow.nodes.input_processing |    Preserved types: ['Glial cell', 'Immune cell', 'Stromal cell']
2025-08-21 01:39:52,089 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-08-21 01:39:52,090 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-08-21 01:39:52,090 | INFO | scchatbot.workflow.node_base |    Current message: display the t cell umap please...
2025-08-21 01:39:52,090 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-08-21 01:39:52,090 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 3
2025-08-21 01:39:52,090 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 3
2025-08-21 01:39:52,090 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-08-21 01:39:52,090 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'display the t cell umap please'
2025-08-21 01:39:54,545 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:39:56,477 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:39:56,479 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-08-21 01:39:56,479 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Immune cell', 'Stromal cell', 'Glial cell']
2025-08-21 01:39:56,508 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-08-21 01:39:56,518 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-08-21 01:39:56,519 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-08-21 01:39:56,519 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-08-21 01:39:56,519 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-08-21 01:39:56,519 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-08-21 01:39:56,519 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-08-21 01:39:56,519 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-08-21 01:39:56,519 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 0
2025-08-21 01:39:56,520 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-08-21 01:39:56,520 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-08-21 01:39:56,520 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-08-21 01:39:56,520 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 3 steps
2025-08-21 01:39:56,520 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 3 steps
2025-08-21 01:39:56,520 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-08-21 01:39:56,520 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-08-21 01:39:56,520 | INFO | scchatbot.workflow.nodes.planning |    • 1 analysis steps
2025-08-21 01:39:56,521 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-08-21 01:39:56,521 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-08-21 01:39:56,523 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 01:39:56,523 | INFO | scchatbot.workflow.node_base |    Current message: display the t cell umap please...
2025-08-21 01:39:56,525 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-08-21 01:39:56,525 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-08-21 01:40:23,323 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:40:42,376 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:41:57,217 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:41:57,225 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-08-21 01:41:57,226 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-08-21 01:41:57,228 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['Mononuclear phagocyte', 'T cell', 'Natural killer cell', 'Plasmacytoid dendritic cell', 'B cell']
2025-08-21 01:41:57,364 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mononuclear phagocyte
2025-08-21 01:41:57,365 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: T cell
2025-08-21 01:41:57,365 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Natural killer cell
2025-08-21 01:41:57,365 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Plasmacytoid dendritic cell
2025-08-21 01:41:57,365 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: B cell
2025-08-21 01:41:57,368 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-08-21 01:41:57,368 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-08-21 01:41:57,368 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 01:41:57,369 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 01:41:57,370 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-08-21 01:41:57,370 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-08-21 01:41:57,370 | INFO | scchatbot.workflow.node_base |    Current message: Validating Immune cell -> ['T cell']...
2025-08-21 01:41:57,371 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'T cell'
2025-08-21 01:41:57,371 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-08-21 01:41:57,371 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Validation passed: All 1 expected cell types found successfully
2025-08-21 01:41:57,371 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: success
2025-08-21 01:41:57,371 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['T cell'], found=['T cell'], missing=[]
2025-08-21 01:41:57,372 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'success', 'message': 'All 1 expected cell types found successfully', 'found_children': ['T cell'], 'missing_children': [], 'available_types': ['Natural killer cell', 'T cell', 'Plasmacytoid dendritic cell', 'Stromal cell', 'Glial cell', 'Mononuclear phagocyte', 'B cell']}
2025-08-21 01:41:57,372 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: []
2025-08-21 01:41:57,372 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 1 remaining steps...
2025-08-21 01:41:57,372 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3: display_processed_umap(params={})
2025-08-21 01:41:57,372 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3 cell type 'None' not in missing list []
2025-08-21 01:41:57,372 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 3
2025-08-21 01:41:57,373 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 01:41:57,373 | INFO | scchatbot.workflow.node_base |    Current message: display the t cell umap please...
2025-08-21 01:41:57,374 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Display the UMAP visualization that is annotated with the available cell types.
2025-08-21 01:41:57,374 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_processed_umap'
2025-08-21 01:41:57,375 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_processed_umap' with step parameters: {}
2025-08-21 01:41:57,375 | INFO | scchatbot.workflow.nodes.execution | ✅ Found cell type for display_processed_umap: Immune cell
2025-08-21 01:41:57,375 | INFO | scchatbot.workflow.nodes.execution | 📝 Updating step parameters with enhanced params for execution history tracking
2025-08-21 01:41:57,375 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_processed_umap called with kwargs: {'cell_type': 'Immune cell'}
2025-08-21 01:41:57,669 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-08-21 01:41:57,670 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_processed_umap - HTML preserved
2025-08-21 01:41:57,670 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-08-21 01:41:57,671 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 01:41:57,671 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 01:41:57,672 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (3/3), running post-execution evaluation
2025-08-21 01:41:57,672 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 01:41:57,672 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 01:41:59,674 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:42:00,748 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:42:00,760 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 01:42:00,761 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-08-21 01:42:01,461 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:42:01,464 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 01:42:02,058 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:42:02,062 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-08-21 01:42:02,062 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-08-21 01:42:02,062 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-08-21 01:42:02,063 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 3 entries
2025-08-21 01:42:02,063 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: []
2025-08-21 01:42:02,063 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 No direct matches found for T cell, checking for related executions...
2025-08-21 01:42:02,063 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: display_processed_umap(T cell)
2025-08-21 01:42:02,063 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 1 missing steps for T cell
2025-08-21 01:42:02,063 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 1 total supplementary steps
2025-08-21 01:42:02,063 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-08-21 01:42:02,063 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 1 supplementary steps to execution plan (attempt 1/2)
2025-08-21 01:42:02,063 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-08-21 01:42:02,063 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 01:42:02,063 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 3
2025-08-21 01:42:02,063 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-08-21 01:42:02,064 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-08-21 01:42:02,064 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 1
2025-08-21 01:42:02,064 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 01:42:02,064 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 01:42:02,066 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 01:42:02,066 | INFO | scchatbot.workflow.node_base |    Current message: display the t cell umap please...
2025-08-21 01:42:02,069 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Post-evaluation: display_processed_umap for T cell
2025-08-21 01:42:02,069 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_processed_umap'
2025-08-21 01:42:02,070 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_processed_umap' with step parameters: {'cell_type': 'T cell'}
2025-08-21 01:42:02,070 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_processed_umap called with kwargs: {'cell_type': 'T cell'}
2025-08-21 01:42:02,176 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-08-21 01:42:02,177 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_processed_umap - HTML preserved
2025-08-21 01:42:02,178 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-08-21 01:42:02,178 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 01:42:02,178 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 01:42:02,179 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-08-21 01:42:02,179 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 01:42:02,179 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 01:42:04,488 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:42:05,204 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:42:05,208 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 01:42:05,208 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-08-21 01:42:06,027 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:42:06,030 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 01:42:06,847 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:42:06,848 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-08-21 01:42:06,848 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-08-21 01:42:06,849 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-08-21 01:42:06,849 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-08-21 01:42:06,849 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 4)
2025-08-21 01:42:06,849 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_processed_umap']
2025-08-21 01:42:06,849 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-08-21 01:42:06,849 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-08-21 01:42:06,850 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-08-21 01:42:06,850 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 01:42:06,850 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-08-21 01:42:06,850 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-08-21 01:42:06,850 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-08-21 01:42:06,850 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-08-21 01:42:06,850 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 01:42:06,850 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 01:42:06,851 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-08-21 01:42:06,851 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 01:42:06,852 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 01:42:08,685 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:42:09,418 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:42:09,421 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 01:42:09,421 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-08-21 01:42:09,957 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:42:09,962 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-08-21 01:42:10,867 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:42:10,869 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-08-21 01:42:10,872 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-08-21 01:42:10,872 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-08-21 01:42:10,872 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-08-21 01:42:10,873 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 4)
2025-08-21 01:42:10,873 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_processed_umap']
2025-08-21 01:42:10,873 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-08-21 01:42:10,873 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-08-21 01:42:10,873 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-08-21 01:42:10,873 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 01:42:10,873 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-08-21 01:42:10,874 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-08-21 01:42:10,874 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-08-21 01:42:10,874 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-08-21 01:42:10,874 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 01:42:10,874 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 01:42:10,875 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-08-21 01:42:10,877 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-08-21 01:42:10,877 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 4 execution steps
2025-08-21 01:42:10,877 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-08-21 01:42:10,877 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-08-21 01:42:10,878 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-08-21 01:42:10,878 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-08-21 01:42:10,878 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: display_processed_umap for step_2
2025-08-21 01:42:10,878 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 3 function: display_processed_umap
2025-08-21 01:42:10,878 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {}
2025-08-21 01:42:10,878 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_processed_umap with VisualizationResultAccessor
2025-08-21 01:42:10,878 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: display_processed_umap for T cell
2025-08-21 01:42:10,879 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 4 function: display_processed_umap
2025-08-21 01:42:10,879 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell'}
2025-08-21 01:42:10,879 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_processed_umap with VisualizationResultAccessor
2025-08-21 01:42:10,879 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 4 successful steps
2025-08-21 01:42:10,879 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 521 characters for synthesis
2025-08-21 01:42:10,879 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-08-21 01:42:10,879 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-08-21 01:42:10,879 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (159 chars)
2025-08-21 01:42:10,879 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-08-21 01:42:10,879 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-08-21 01:42:12,489 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:42:12,492 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 4 execution steps
2025-08-21 01:42:12,493 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: process_cells, success=True, has_result=True
2025-08-21 01:42:12,493 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: validate_processing_results, success=True, has_result=True
2025-08-21 01:42:12,493 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: display_processed_umap, success=True, has_result=True
2025-08-21 01:42:12,493 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added plot plot_1: Annotated UMAP (83377 chars)
2025-08-21 01:42:12,494 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: display_processed_umap, success=True, has_result=True
2025-08-21 01:42:12,494 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Skipping display_processed_umap - duplicate plot detected
2025-08-21 01:42:12,494 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 1 individual plots (total: 83,377 chars)
2025-08-21 01:42:12,495 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 1 plots, total size: 83,377 bytes
2025-08-21 01:42:12,495 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 1 individual plots
2025-08-21 01:42:12,495 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 1 plots + 1 text (plots first)
2025-08-21 01:42:12,495 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 2 total messages (plots first, then text)
2025-08-21 01:42:12,497 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (191 chars)
2025-08-21 01:42:12,596 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-08-21 01:42:12,596 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'c9957109' with 7 available cell types
2025-08-21 01:42:51,840 | INFO | scchatbot.multi_agent_base | 🔄 Reusing session state for 'c9957109' with 7 available cell types
2025-08-21 01:42:51,866 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-08-21 01:42:51,866 | INFO | scchatbot.workflow.node_base |    Current message: ok...
2025-08-21 01:42:52,921 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:42:52,922 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state", "recent analysis results", "what other analyses available"]
```'
2025-08-21 01:42:52,922 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 3 context sources: ['current_session_state', 'recent analysis results', 'what other analyses available']
2025-08-21 01:42:52,922 | INFO | scchatbot.workflow.nodes.input_processing | 🧹 CONTEXT CLEANUP: Removing old context message (159 chars)
2025-08-21 01:42:52,922 | INFO | scchatbot.workflow.nodes.input_processing | 🧹 CONTEXT CLEANUP: Removed 1 old context messages
2025-08-21 01:42:52,923 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-08-21 01:42:52,923 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 7 cell types: ['Natural killer cell', 'T cell', 'Plasmacytoid dendritic cell', 'Stromal cell', 'Glial cell', 'Mononuclear phagocyte', 'B cell']
2025-08-21 01:42:52,923 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 248 chars, starts with: 'Cell types currently available in the dataset:
  •...'
2025-08-21 01:42:52,923 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (248 chars)
2025-08-21 01:42:52,923 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'Cell types currently available in the dataset:
  • B cell
  • Glial cell
  • Mononuclear phagocyte
 ...'
2025-08-21 01:42:52,942 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event CollectionQueryEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:42:52,949 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added conversation context for 'recent analysis results' (586 chars)
2025-08-21 01:42:52,961 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added conversation context for 'what other analyses available' (586 chars)
2025-08-21 01:42:52,961 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (1491 chars)
2025-08-21 01:42:52,961 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Preserving 7 discovered cell types from previous operations
2025-08-21 01:42:52,961 | INFO | scchatbot.workflow.nodes.input_processing |    Preserved types: ['B cell', 'Glial cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Plasmacytoid dendritic cell', 'Stromal cell', 'T cell']
2025-08-21 01:42:52,962 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-08-21 01:42:52,962 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-08-21 01:42:52,962 | INFO | scchatbot.workflow.node_base |    Current message: ok...
2025-08-21 01:42:52,963 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-08-21 01:42:52,963 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 3
2025-08-21 01:42:52,963 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 7
2025-08-21 01:42:52,963 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 4
2025-08-21 01:42:52,963 | INFO | scchatbot.workflow.nodes.planning |    • New types discovered: B cell, Mononuclear phagocyte, Natural killer cell, Plasmacytoid dendritic cell, T cell
2025-08-21 01:42:52,963 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'ok'
2025-08-21 01:42:54,664 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:42:55,811 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:42:55,819 | INFO | scchatbot.workflow.nodes.planning | 🔍 No specific cell types identified in question
2025-08-21 01:42:55,819 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-08-21 01:42:55,819 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 1 steps
2025-08-21 01:42:55,819 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 1 steps
2025-08-21 01:42:55,819 | INFO | scchatbot.workflow.nodes.planning |    • 0 process_cells steps
2025-08-21 01:42:55,819 | INFO | scchatbot.workflow.nodes.planning |    • 0 validation steps
2025-08-21 01:42:55,820 | INFO | scchatbot.workflow.nodes.planning |    • 0 analysis steps
2025-08-21 01:42:55,820 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-08-21 01:42:55,820 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-08-21 01:42:55,822 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 01:42:55,822 | INFO | scchatbot.workflow.node_base |    Current message: ok...
2025-08-21 01:42:55,827 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Provide a conversational response to the user's simple query.
2025-08-21 01:42:55,827 | INFO | scchatbot.workflow.nodes.execution | ℹ️ No function for this step; treating as direct-answer/no-op.
2025-08-21 01:42:55,828 | INFO | scchatbot.workflow.nodes.execution | 📄 Text storage: direct_answer - Truncated to 500 chars
2025-08-21 01:42:55,828 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-08-21 01:42:55,828 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 01:42:55,831 | INFO | scchatbot.workflow.nodes.evaluation | ℹ️ Evaluator: no callable steps in plan; skipping post-execution evaluation.
2025-08-21 01:42:55,833 | INFO | scchatbot.workflow.nodes.evaluation | ℹ️ Evaluator: no callable steps in plan; skipping post-execution evaluation.
2025-08-21 01:42:55,834 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-08-21 01:42:55,835 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-08-21 01:42:55,835 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 1 execution steps
2025-08-21 01:42:55,835 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: direct_answer for step_0
2025-08-21 01:42:55,835 | INFO | scchatbot.workflow.unified_result_accessor | ⚠️ No accessor found for function: direct_answer
2025-08-21 01:42:55,835 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 1 successful steps
2025-08-21 01:42:55,835 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 64 characters for synthesis
2025-08-21 01:42:55,835 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-08-21 01:42:55,835 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-08-21 01:42:55,836 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (1491 chars)
2025-08-21 01:42:55,836 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-08-21 01:42:55,837 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-08-21 01:42:58,565 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:42:58,571 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 1 execution steps
2025-08-21 01:42:58,572 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: direct_answer, success=True, has_result=True
2025-08-21 01:42:58,572 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: No valid plots found
2025-08-21 01:42:58,572 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 0 individual plots
2025-08-21 01:42:58,572 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (244 chars)
2025-08-21 01:42:58,614 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-08-21 01:42:58,614 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'c9957109' with 7 available cell types
2025-08-21 01:44:07,655 | INFO | scchatbot.multi_agent_base | 🔄 Reusing session state for 'c9957109' with 7 available cell types
2025-08-21 01:44:07,676 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-08-21 01:44:07,676 | INFO | scchatbot.workflow.node_base |    Current message: do the GSEA enrichment analysis for T cells...
2025-08-21 01:44:08,592 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:44:08,594 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-08-21 01:44:08,594 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-08-21 01:44:08,594 | INFO | scchatbot.workflow.nodes.input_processing | 🧹 CONTEXT CLEANUP: Removing old context message (1491 chars)
2025-08-21 01:44:08,594 | INFO | scchatbot.workflow.nodes.input_processing | 🧹 CONTEXT CLEANUP: Removed 1 old context messages
2025-08-21 01:44:08,595 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-08-21 01:44:08,595 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 7 cell types: ['Natural killer cell', 'T cell', 'Plasmacytoid dendritic cell', 'Stromal cell', 'Glial cell', 'Mononuclear phagocyte', 'B cell']
2025-08-21 01:44:08,595 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 224 chars, starts with: 'Cell types currently available in the dataset:
  •...'
2025-08-21 01:44:08,595 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (224 chars)
2025-08-21 01:44:08,595 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'Cell types currently available in the dataset:
  • B cell
  • Glial cell
  • Mononuclear phagocyte
 ...'
2025-08-21 01:44:08,595 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (247 chars)
2025-08-21 01:44:08,595 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Preserving 7 discovered cell types from previous operations
2025-08-21 01:44:08,595 | INFO | scchatbot.workflow.nodes.input_processing |    Preserved types: ['B cell', 'Glial cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Plasmacytoid dendritic cell', 'Stromal cell', 'T cell']
2025-08-21 01:44:08,595 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-08-21 01:44:08,597 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-08-21 01:44:08,597 | INFO | scchatbot.workflow.node_base |    Current message: do the GSEA enrichment analysis for T cells...
2025-08-21 01:44:08,597 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-08-21 01:44:08,597 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 3
2025-08-21 01:44:08,597 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 7
2025-08-21 01:44:08,597 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 4
2025-08-21 01:44:08,597 | INFO | scchatbot.workflow.nodes.planning |    • New types discovered: B cell, Mononuclear phagocyte, Natural killer cell, Plasmacytoid dendritic cell, T cell
2025-08-21 01:44:08,597 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'do the GSEA enrichment analysis for T cells'
2025-08-21 01:44:11,307 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:44:14,350 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:44:14,355 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-08-21 01:44:14,355 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Natural killer cell', 'T cell', 'Plasmacytoid dendritic cell', 'Stromal cell', 'Glial cell', 'Mononuclear phagocyte', 'B cell']
2025-08-21 01:44:14,355 | INFO | scchatbot.workflow.nodes.planning | 📋 Preserving LLM analysis step: perform_enrichment_analyses(T cell)
2025-08-21 01:44:14,356 | INFO | scchatbot.workflow.nodes.planning | ✅ 'T cell' already available
2025-08-21 01:44:14,356 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-08-21 01:44:14,356 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 0
2025-08-21 01:44:14,356 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 0
2025-08-21 01:44:14,356 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 1
2025-08-21 01:44:14,356 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-08-21 01:44:14,356 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-08-21 01:44:14,356 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 1 enrichment steps
2025-08-21 01:44:14,356 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 2 steps
2025-08-21 01:44:14,356 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Extracting keywords for step 1: T cell
2025-08-21 01:44:15,351 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:44:15,357 | INFO | scchatbot.workflow.nodes.planning | 🔍 PlannerNode: Using enrichment_checker for pathway keywords: '""'
2025-08-21 01:44:15,357 | INFO | scchatbot.workflow.nodes.planning | ✅ EnrichmentChecker enhanced step:
2025-08-21 01:44:15,357 | INFO | scchatbot.workflow.nodes.planning |    • analyses: ['go']
2025-08-21 01:44:15,358 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 2 steps
2025-08-21 01:44:15,358 | INFO | scchatbot.workflow.nodes.planning |    • 0 process_cells steps
2025-08-21 01:44:15,358 | INFO | scchatbot.workflow.nodes.planning |    • 0 validation steps
2025-08-21 01:44:15,358 | INFO | scchatbot.workflow.nodes.planning |    • 1 analysis steps
2025-08-21 01:44:15,358 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-08-21 01:44:15,358 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-08-21 01:44:15,360 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 01:44:15,360 | INFO | scchatbot.workflow.node_base |    Current message: do the GSEA enrichment analysis for T cells...
2025-08-21 01:44:15,364 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Perform comprehensive Gene Ontology (GO) enrichment analysis.
2025-08-21 01:44:15,364 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'perform_enrichment_analyses'
2025-08-21 01:45:18,393 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-08-21 01:45:21,815 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:45:21,817 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:45:21,817 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-08-21 01:45:21,820 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientStartEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:45:21,821 | ERROR | chromadb.telemetry.product.posthog | Failed to send telemetry event ClientCreateCollectionEvent: capture() takes 1 positional argument but 3 were given
2025-08-21 01:45:21,821 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-08-21 01:45:21,822 | INFO | scchatbot.workflow.function_history | 🔍 Starting enrichment indexing for T cell...
2025-08-21 01:45:21,822 | INFO | scchatbot.workflow.function_history | 🧬 Detected analyses: ['go']
2025-08-21 01:45:21,824 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_bp/results_summary_T cell.csv (476 terms)
2025-08-21 01:45:21,830 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_bp/results_raw_T cell.csv (476 terms)
2025-08-21 01:45:22,799 | INFO | scchatbot.workflow.function_history | 📝 Indexed 476 terms for go_bp/all_combined
2025-08-21 01:45:22,802 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_bulk_bp/results_summary_T cell_bulk.csv (476 terms)
2025-08-21 01:45:22,806 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_bulk_bp/results_raw_T cell_bulk.csv (476 terms)
2025-08-21 01:45:23,904 | INFO | scchatbot.workflow.function_history | 📝 Indexed 476 terms for go_bp/bulk
2025-08-21 01:45:23,907 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_p1_pre_bp/results_summary_T cell_p1_pre.csv (368 terms)
2025-08-21 01:45:23,911 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_p1_pre_bp/results_raw_T cell_p1_pre.csv (368 terms)
2025-08-21 01:45:24,562 | INFO | scchatbot.workflow.function_history | 📝 Indexed 368 terms for go_bp/p1_pre
2025-08-21 01:45:24,565 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_p1_post_bp/results_summary_T cell_p1_post.csv (419 terms)
2025-08-21 01:45:24,569 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_p1_post_bp/results_raw_T cell_p1_post.csv (419 terms)
2025-08-21 01:45:25,343 | INFO | scchatbot.workflow.function_history | 📝 Indexed 419 terms for go_bp/p1_post
2025-08-21 01:45:25,346 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_p6_pre_bp/results_summary_T cell_p6_pre.csv (406 terms)
2025-08-21 01:45:25,350 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_p6_pre_bp/results_raw_T cell_p6_pre.csv (406 terms)
2025-08-21 01:45:26,089 | INFO | scchatbot.workflow.function_history | 📝 Indexed 406 terms for go_bp/p6_pre
2025-08-21 01:45:26,091 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_p6_post_bp/results_summary_T cell_p6_post.csv (445 terms)
2025-08-21 01:45:26,094 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_p6_post_bp/results_raw_T cell_p6_post.csv (445 terms)
2025-08-21 01:45:26,954 | INFO | scchatbot.workflow.function_history | 📝 Indexed 445 terms for go_bp/p6_post
2025-08-21 01:45:26,957 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_p7_pre_bp/results_summary_T cell_p7_pre.csv (502 terms)
2025-08-21 01:45:26,962 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_p7_pre_bp/results_raw_T cell_p7_pre.csv (502 terms)
2025-08-21 01:45:27,889 | INFO | scchatbot.workflow.function_history | 📝 Indexed 502 terms for go_bp/p7_pre
2025-08-21 01:45:27,891 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_p7_post_bp/results_summary_T cell_p7_post.csv (304 terms)
2025-08-21 01:45:27,894 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_p7_post_bp/results_raw_T cell_p7_post.csv (304 terms)
2025-08-21 01:45:28,508 | INFO | scchatbot.workflow.function_history | 📝 Indexed 304 terms for go_bp/p7_post
2025-08-21 01:45:28,510 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_bp/results_summary_T cell.csv (476 terms)
2025-08-21 01:45:28,516 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_bp/results_raw_T cell.csv (476 terms)
2025-08-21 01:45:29,413 | INFO | scchatbot.workflow.function_history | 📝 Indexed 476 terms for go_cc/all_combined
2025-08-21 01:45:29,415 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_bulk_bp/results_summary_T cell_bulk.csv (476 terms)
2025-08-21 01:45:29,422 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_bulk_bp/results_raw_T cell_bulk.csv (476 terms)
2025-08-21 01:45:30,378 | INFO | scchatbot.workflow.function_history | 📝 Indexed 476 terms for go_cc/bulk
2025-08-21 01:45:30,384 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_p1_pre_bp/results_summary_T cell_p1_pre.csv (368 terms)
2025-08-21 01:45:30,389 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_p1_pre_bp/results_raw_T cell_p1_pre.csv (368 terms)
2025-08-21 01:45:31,027 | INFO | scchatbot.workflow.function_history | 📝 Indexed 368 terms for go_cc/p1_pre
2025-08-21 01:45:31,031 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_p1_post_bp/results_summary_T cell_p1_post.csv (419 terms)
2025-08-21 01:45:31,035 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_p1_post_bp/results_raw_T cell_p1_post.csv (419 terms)
2025-08-21 01:45:31,895 | INFO | scchatbot.workflow.function_history | 📝 Indexed 419 terms for go_cc/p1_post
2025-08-21 01:45:31,898 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_p6_pre_bp/results_summary_T cell_p6_pre.csv (406 terms)
2025-08-21 01:45:31,902 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_p6_pre_bp/results_raw_T cell_p6_pre.csv (406 terms)
2025-08-21 01:45:32,671 | INFO | scchatbot.workflow.function_history | 📝 Indexed 406 terms for go_cc/p6_pre
2025-08-21 01:45:32,673 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_p6_post_bp/results_summary_T cell_p6_post.csv (445 terms)
2025-08-21 01:45:32,677 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_p6_post_bp/results_raw_T cell_p6_post.csv (445 terms)
2025-08-21 01:45:33,549 | INFO | scchatbot.workflow.function_history | 📝 Indexed 445 terms for go_cc/p6_post
2025-08-21 01:45:33,551 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_p7_pre_bp/results_summary_T cell_p7_pre.csv (502 terms)
2025-08-21 01:45:33,556 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_p7_pre_bp/results_raw_T cell_p7_pre.csv (502 terms)
2025-08-21 01:45:34,587 | INFO | scchatbot.workflow.function_history | 📝 Indexed 502 terms for go_cc/p7_pre
2025-08-21 01:45:34,589 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_p7_post_bp/results_summary_T cell_p7_post.csv (304 terms)
2025-08-21 01:45:34,592 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_p7_post_bp/results_raw_T cell_p7_post.csv (304 terms)
2025-08-21 01:45:35,250 | INFO | scchatbot.workflow.function_history | 📝 Indexed 304 terms for go_cc/p7_post
2025-08-21 01:45:35,253 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_bp/results_summary_T cell.csv (476 terms)
2025-08-21 01:45:35,258 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_bp/results_raw_T cell.csv (476 terms)
2025-08-21 01:45:36,212 | INFO | scchatbot.workflow.function_history | 📝 Indexed 476 terms for go_mf/all_combined
2025-08-21 01:45:36,214 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_bulk_bp/results_summary_T cell_bulk.csv (476 terms)
2025-08-21 01:45:36,219 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_bulk_bp/results_raw_T cell_bulk.csv (476 terms)
2025-08-21 01:45:37,283 | INFO | scchatbot.workflow.function_history | 📝 Indexed 476 terms for go_mf/bulk
2025-08-21 01:45:37,285 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_p1_pre_bp/results_summary_T cell_p1_pre.csv (368 terms)
2025-08-21 01:45:37,289 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_p1_pre_bp/results_raw_T cell_p1_pre.csv (368 terms)
2025-08-21 01:45:38,030 | INFO | scchatbot.workflow.function_history | 📝 Indexed 368 terms for go_mf/p1_pre
2025-08-21 01:45:38,033 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_p1_post_bp/results_summary_T cell_p1_post.csv (419 terms)
2025-08-21 01:45:38,037 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_p1_post_bp/results_raw_T cell_p1_post.csv (419 terms)
2025-08-21 01:45:38,835 | INFO | scchatbot.workflow.function_history | 📝 Indexed 419 terms for go_mf/p1_post
2025-08-21 01:45:38,838 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_p6_pre_bp/results_summary_T cell_p6_pre.csv (406 terms)
2025-08-21 01:45:38,842 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_p6_pre_bp/results_raw_T cell_p6_pre.csv (406 terms)
2025-08-21 01:45:39,602 | INFO | scchatbot.workflow.function_history | 📝 Indexed 406 terms for go_mf/p6_pre
2025-08-21 01:45:39,604 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_p6_post_bp/results_summary_T cell_p6_post.csv (445 terms)
2025-08-21 01:45:39,607 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_p6_post_bp/results_raw_T cell_p6_post.csv (445 terms)
2025-08-21 01:45:40,566 | INFO | scchatbot.workflow.function_history | 📝 Indexed 445 terms for go_mf/p6_post
2025-08-21 01:45:40,568 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_p7_pre_bp/results_summary_T cell_p7_pre.csv (502 terms)
2025-08-21 01:45:40,573 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_p7_pre_bp/results_raw_T cell_p7_pre.csv (502 terms)
2025-08-21 01:45:41,600 | INFO | scchatbot.workflow.function_history | 📝 Indexed 502 terms for go_mf/p7_pre
2025-08-21 01:45:41,602 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_p7_post_bp/results_summary_T cell_p7_post.csv (304 terms)
2025-08-21 01:45:41,605 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_p7_post_bp/results_raw_T cell_p7_post.csv (304 terms)
2025-08-21 01:45:42,243 | INFO | scchatbot.workflow.function_history | 📝 Indexed 304 terms for go_mf/p7_post
2025-08-21 01:45:42,244 | INFO | scchatbot.workflow.function_history | ✅ Enrichment indexing complete: 10188 terms indexed for T cell
2025-08-21 01:45:42,270 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-08-21 01:45:42,273 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: perform_enrichment_analyses - Full data preserved
2025-08-21 01:45:42,273 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-08-21 01:45:42,273 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 01:45:42,273 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 01:45:42,276 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Steps still remaining (1/2), skipping post-execution evaluation
2025-08-21 01:45:42,277 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 01:45:42,277 | INFO | scchatbot.workflow.node_base |    Current message: do the GSEA enrichment analysis for T cells...
2025-08-21 01:45:42,278 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 2: Visualize the GSEA enrichment results for T cells using both barplot and dotplot.
2025-08-21 01:45:42,278 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_enrichment_visualization'
2025-08-21 01:45:42,278 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_enrichment_visualization' with step parameters: {'analysis': 'gsea', 'plot_type': 'both'}
2025-08-21 01:45:42,279 | INFO | scchatbot.workflow.nodes.execution | ❌ No successful gsea enrichment analysis found to visualize
2025-08-21 01:45:42,279 | INFO | scchatbot.workflow.nodes.execution | ❌ Step execution blocked: No gsea enrichment analysis results available to visualize
2025-08-21 01:45:42,279 | INFO | scchatbot.workflow.nodes.execution | 📄 Text storage: display_enrichment_visualization - Truncated to 500 chars
2025-08-21 01:45:42,279 | INFO | scchatbot.workflow.nodes.execution | ❌ Step failed: No gsea enrichment analysis results available to visualize
2025-08-21 01:45:42,279 | INFO | scchatbot.workflow.nodes.execution | 📝 Recording error and advancing to step 3 (no retries for deterministic operations)
2025-08-21 01:45:42,279 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-08-21 01:45:42,279 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 01:45:42,280 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (2/2), running post-execution evaluation
2025-08-21 01:45:42,280 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 01:45:42,280 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 01:45:44,135 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:45:45,055 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:45:45,058 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-08-21 01:45:45,059 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-08-21 01:45:45,768 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:45:45,772 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-08-21 01:45:46,650 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:45:46,660 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["perform_enrichment_analyses", "search_enrichment_semantic", "display_enrichment_visualization"]
```' (length: 109)
2025-08-21 01:45:46,660 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-08-21 01:45:46,660 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-08-21 01:45:46,660 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 2 entries
2025-08-21 01:45:46,661 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: perform_enrichment_analyses (execution 1)
2025-08-21 01:45:46,661 | INFO | scchatbot.workflow.nodes.evaluation |    → Enrichment analysis had 576 total significant results
2025-08-21 01:45:46,661 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['perform_enrichment_analyses']
2025-08-21 01:45:46,661 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: search_enrichment_semantic(T cell)
2025-08-21 01:45:46,661 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: display_enrichment_visualization(T cell)
2025-08-21 01:45:46,661 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 2 missing steps for T cell
2025-08-21 01:45:46,661 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 2 total supplementary steps
2025-08-21 01:45:46,661 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for pathway_analysis question
2025-08-21 01:45:46,661 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 2 supplementary steps to execution plan (attempt 1/2)
2025-08-21 01:45:46,661 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-08-21 01:45:46,661 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 01:45:46,661 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 2
2025-08-21 01:45:46,661 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 1
2025-08-21 01:45:46,661 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 1
2025-08-21 01:45:46,661 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 2
2025-08-21 01:45:46,661 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 01:45:46,661 | INFO | scchatbot.workflow.nodes.evaluation |    • Enrichment analyses: ['T cell']
2025-08-21 01:45:46,661 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 01:45:46,663 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-08-21 01:45:46,663 | INFO | scchatbot.workflow.node_base |    Current message: do the GSEA enrichment analysis for T cells...
2025-08-21 01:45:46,668 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Post-evaluation: search_enrichment_semantic for T cell
2025-08-21 01:45:46,668 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'search_enrichment_semantic'
2025-08-21 01:45:46,669 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-08-21 01:45:46,670 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: search_enrichment_semantic - Full data preserved
2025-08-21 01:45:46,670 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-08-21 01:45:46,670 | INFO | scchatbot.workflow.nodes.execution | 🚀 Continuing execution - next step is supplementary: display_enrichment_visualization
2025-08-21 01:45:46,670 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Post-evaluation: display_enrichment_visualization for T cell
2025-08-21 01:45:46,671 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_enrichment_visualization'
2025-08-21 01:45:46,671 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_enrichment_visualization' with step parameters: {'cell_type': 'T cell', 'analysis': 'go'}
2025-08-21 01:45:46,672 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_enrichment_visualization called with kwargs: {'cell_type': 'T cell', 'analysis': 'go'}
2025-08-21 01:45:46,672 | INFO | scchatbot.multi_agent_base | 🎨 GO Visualization call: display_enrichment_visualization(analysis='go', cell_type='T cell', plot_type='both', domain='BP')
2025-08-21 01:45:46,755 | INFO | scchatbot.multi_agent_base | 🎨 GO Visualization call: display_enrichment_visualization(analysis='go', cell_type='T cell', plot_type='both', domain='MF')
2025-08-21 01:45:46,798 | INFO | scchatbot.multi_agent_base | 🎨 GO Visualization call: display_enrichment_visualization(analysis='go', cell_type='T cell', plot_type='both', domain='CC')
2025-08-21 01:45:46,841 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-08-21 01:45:46,842 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_enrichment_visualization - HTML preserved
2025-08-21 01:45:46,843 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-08-21 01:45:46,843 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 2 steps
2025-08-21 01:45:46,843 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-08-21 01:45:46,844 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-08-21 01:45:46,844 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 01:45:46,844 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 01:45:49,153 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:45:49,869 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:45:49,871 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-08-21 01:45:49,872 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-08-21 01:45:50,549 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:45:50,551 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-08-21 01:45:51,824 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:45:51,829 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["perform_enrichment_analyses", "search_enrichment_semantic", "display_enrichment_visualization"]
```' (length: 109)
2025-08-21 01:45:51,829 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-08-21 01:45:51,829 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-08-21 01:45:51,829 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-08-21 01:45:51,829 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: perform_enrichment_analyses (execution 1)
2025-08-21 01:45:51,829 | INFO | scchatbot.workflow.nodes.evaluation |    → Enrichment analysis had 576 total significant results
2025-08-21 01:45:51,829 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: search_enrichment_semantic (execution 3)
2025-08-21 01:45:51,830 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_enrichment_visualization (execution 4)
2025-08-21 01:45:51,830 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-08-21 01:45:51,830 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-08-21 01:45:51,830 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-08-21 01:45:51,830 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for pathway_analysis question
2025-08-21 01:45:51,830 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 01:45:51,830 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-08-21 01:45:51,830 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-08-21 01:45:51,830 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 1
2025-08-21 01:45:51,830 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-08-21 01:45:51,830 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 01:45:51,831 | INFO | scchatbot.workflow.nodes.evaluation |    • Enrichment analyses: ['T cell']
2025-08-21 01:45:51,831 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 01:45:51,833 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-08-21 01:45:51,833 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-08-21 01:45:51,833 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-08-21 01:45:53,645 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:45:54,600 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:45:54,603 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-08-21 01:45:54,603 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-08-21 01:45:55,231 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:45:55,234 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-08-21 01:45:55,898 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:45:55,901 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["perform_enrichment_analyses", "search_enrichment_semantic", "display_enrichment_visualization"]
```' (length: 109)
2025-08-21 01:45:55,902 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-08-21 01:45:55,902 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-08-21 01:45:55,902 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-08-21 01:45:55,902 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: perform_enrichment_analyses (execution 1)
2025-08-21 01:45:55,903 | INFO | scchatbot.workflow.nodes.evaluation |    → Enrichment analysis had 576 total significant results
2025-08-21 01:45:55,903 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: search_enrichment_semantic (execution 3)
2025-08-21 01:45:55,903 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_enrichment_visualization (execution 4)
2025-08-21 01:45:55,903 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-08-21 01:45:55,904 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-08-21 01:45:55,904 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-08-21 01:45:55,904 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for pathway_analysis question
2025-08-21 01:45:55,904 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-08-21 01:45:55,904 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-08-21 01:45:55,904 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-08-21 01:45:55,904 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 1
2025-08-21 01:45:55,904 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-08-21 01:45:55,904 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-08-21 01:45:55,905 | INFO | scchatbot.workflow.nodes.evaluation |    • Enrichment analyses: ['T cell']
2025-08-21 01:45:55,905 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-08-21 01:45:55,906 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-08-21 01:45:55,907 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-08-21 01:45:55,907 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 4 execution steps
2025-08-21 01:45:55,907 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: perform_enrichment_analyses for T cell
2025-08-21 01:45:55,907 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling perform_enrichment_analyses with EnrichmentResultAccessor
2025-08-21 01:45:55,909 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 ENRICHMENT: Loaded 6 conditions from mapping file: ['0', '1', '2', '3', '4', '5']
2025-08-21 01:45:55,919 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: search_enrichment_semantic for T cell
2025-08-21 01:45:55,919 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 SEMANTIC DEBUG: Step 3 parameters: {'cell_type': 'T cell'}
2025-08-21 01:45:55,919 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling search_enrichment_semantic with SemanticSearchResultAccessor
2025-08-21 01:45:55,919 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 SEMANTIC SEARCH DEBUG: Extracted cell_type='T cell', query='unknown'
2025-08-21 01:45:55,919 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 SEMANTIC SEARCH DEBUG: Full parameters: {'cell_type': 'T cell'}
2025-08-21 01:45:55,919 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: display_enrichment_visualization for T cell
2025-08-21 01:45:55,919 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 4 function: display_enrichment_visualization
2025-08-21 01:45:55,919 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell', 'analysis': 'go'}
2025-08-21 01:45:55,919 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_enrichment_visualization with VisualizationResultAccessor
2025-08-21 01:45:55,920 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 3 successful steps
2025-08-21 01:45:55,920 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 1043 characters for synthesis
2025-08-21 01:45:55,920 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-08-21 01:45:55,920 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-08-21 01:45:55,920 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (247 chars)
2025-08-21 01:45:55,920 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-08-21 01:45:55,920 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-08-21 01:46:01,034 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-21 01:46:01,037 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 4 execution steps
2025-08-21 01:46:01,038 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: perform_enrichment_analyses, success=True, has_result=True
2025-08-21 01:46:01,038 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: display_enrichment_visualization, success=False, has_result=True
2025-08-21 01:46:01,038 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: search_enrichment_semantic, success=True, has_result=True
2025-08-21 01:46:01,038 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: display_enrichment_visualization, success=True, has_result=True
2025-08-21 01:46:01,038 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Found multiple plots structure in display_enrichment_visualization
2025-08-21 01:46:01,038 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added bar plot plot_1: Top 10 GO_BP Terms - Bar Plot (T cell) (8904 chars)
2025-08-21 01:46:01,038 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added dot plot plot_2: Top 10 GO_BP Terms - Dot Plot (T cell) (9599 chars)
2025-08-21 01:46:01,038 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added bar plot plot_3: Top 10 GO_MF Terms - Bar Plot (T cell) (8877 chars)
2025-08-21 01:46:01,038 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added dot plot plot_4: Top 10 GO_MF Terms - Dot Plot (T cell) (9566 chars)
2025-08-21 01:46:01,038 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added bar plot plot_5: Top 10 GO_CC Terms - Bar Plot (T cell) (8899 chars)
2025-08-21 01:46:01,038 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added dot plot plot_6: Top 10 GO_CC Terms - Dot Plot (T cell) (9588 chars)
2025-08-21 01:46:01,038 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 6 individual plots (total: 55,433 chars)
2025-08-21 01:46:01,038 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 6 plots, total size: 55,433 bytes
2025-08-21 01:46:01,038 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 6 individual plots
2025-08-21 01:46:01,038 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 6 plots + 1 text (plots first)
2025-08-21 01:46:01,038 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 7 total messages (plots first, then text)
2025-08-21 01:46:01,039 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (1336 chars)
2025-08-21 01:46:01,103 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-08-21 01:46:01,103 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'c9957109' with 7 available cell types
