2025-09-16 21:38:03,158 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 21:38:03,160 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 3 entries
2025-09-16 21:38:03,161 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_violin_plot (execution 3)
2025-09-16 21:38:03,161 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_violin_plot']
2025-09-16 21:38:03,161 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: dea_split_by_condition(T cell)
2025-09-16 21:38:03,161 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 1 missing steps for T cell
2025-09-16 21:38:03,161 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 1 total supplementary steps
2025-09-16 21:38:03,161 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 21:38:03,161 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 1 supplementary steps to execution plan (attempt 1/2)
2025-09-16 21:38:03,161 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-09-16 21:38:03,161 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 21:38:03,162 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 3
2025-09-16 21:38:03,162 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-09-16 21:38:03,162 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 21:38:03,162 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 1
2025-09-16 21:38:03,162 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 21:38:03,162 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 21:38:03,167 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 21:38:03,167 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 21:38:03,168 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Post-evaluation: dea_split_by_condition for T cell
2025-09-16 21:38:03,168 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'dea_split_by_condition'
2025-09-16 21:38:13,190 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-09-16 21:38:13,191 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: dea_split_by_condition - Full data preserved
2025-09-16 21:38:13,191 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-09-16 21:38:13,191 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 21:38:13,191 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 21:38:13,191 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-16 21:38:13,191 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 21:38:13,191 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 21:38:15,116 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:38:15,801 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:38:15,813 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 21:38:15,814 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 21:38:16,395 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:38:16,407 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 21:38:17,003 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:38:17,010 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-09-16 21:38:17,010 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['dea_split_by_condition']
2025-09-16 21:38:17,012 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 21:38:17,013 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-16 21:38:17,013 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_violin_plot (execution 3)
2025-09-16 21:38:17,013 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: dea_split_by_condition (execution 4)
2025-09-16 21:38:17,013 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_violin_plot', 'dea_split_by_condition']
2025-09-16 21:38:17,013 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-16 21:38:17,013 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-16 21:38:17,013 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 21:38:17,013 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 21:38:17,013 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-16 21:38:17,013 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-16 21:38:17,013 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 21:38:17,014 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-16 21:38:17,014 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 21:38:17,014 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 21:38:17,015 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-16 21:38:17,015 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 21:38:17,016 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 21:38:19,038 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:38:19,622 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:38:19,633 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 21:38:19,634 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 21:38:20,187 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:38:20,198 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 21:38:20,739 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:38:20,742 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-09-16 21:38:20,742 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['dea_split_by_condition']
2025-09-16 21:38:20,743 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 21:38:20,743 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-16 21:38:20,743 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_violin_plot (execution 3)
2025-09-16 21:38:20,743 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: dea_split_by_condition (execution 4)
2025-09-16 21:38:20,743 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_violin_plot', 'dea_split_by_condition']
2025-09-16 21:38:20,743 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-16 21:38:20,743 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-16 21:38:20,743 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 21:38:20,743 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 21:38:20,744 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-16 21:38:20,744 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-16 21:38:20,744 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 21:38:20,744 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-16 21:38:20,744 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 21:38:20,744 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 21:38:20,745 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-16 21:38:20,747 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-16 21:38:20,748 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 4 execution steps
2025-09-16 21:38:20,748 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-09-16 21:38:20,748 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-09-16 21:38:20,748 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-09-16 21:38:20,748 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-09-16 21:38:20,748 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: display_violin_plot for T cell
2025-09-16 21:38:20,748 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 3 function: display_violin_plot
2025-09-16 21:38:20,748 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell', 'genes': ['CD3D']}
2025-09-16 21:38:20,749 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_violin_plot with VisualizationResultAccessor
2025-09-16 21:38:20,749 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: dea_split_by_condition for T cell
2025-09-16 21:38:20,749 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling dea_split_by_condition with DEAResultAccessor
2025-09-16 21:38:20,749 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 DEA: Loaded 4 conditions from mapping file: ['basal laminar drusen', 'age related macular degeneration', 'cataract', 'bulk']
2025-09-16 21:38:20,752 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for basal laminar drusen: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 21:38:20,757 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for age related macular degeneration: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 21:38:20,761 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for cataract: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 21:38:20,765 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for bulk: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 21:38:20,767 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 4 successful steps
2025-09-16 21:38:20,768 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 16912 characters for synthesis
2025-09-16 21:38:20,768 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-16 21:38:20,768 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-16 21:38:20,768 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (56 chars)
2025-09-16 21:38:20,768 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-16 21:38:20,768 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-16 21:38:20,768 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-16 21:38:25,195 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:38:25,198 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 4 execution steps
2025-09-16 21:38:25,198 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: process_cells, success=True, has_result=True
2025-09-16 21:38:25,198 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: validate_processing_results, success=True, has_result=True
2025-09-16 21:38:25,198 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: display_violin_plot, success=True, has_result=True
2025-09-16 21:38:25,198 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added plot plot_1: Violin Plot - T cell (542 chars)
2025-09-16 21:38:25,198 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: dea_split_by_condition, success=True, has_result=True
2025-09-16 21:38:25,199 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 1 individual plots (total: 542 chars)
2025-09-16 21:38:25,199 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 1 plots, total size: 542 bytes
2025-09-16 21:38:25,199 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 1 individual plots
2025-09-16 21:38:25,199 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 1 plots + 1 text (plots first)
2025-09-16 21:38:25,199 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 2 total messages (plots first, then text)
2025-09-16 21:38:25,199 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (479 chars)
2025-09-16 21:38:25,286 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-16 21:38:25,286 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-16 21:42:58,984 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-16 21:43:03,365 | INFO | faiss.loader | Loading faiss.
2025-09-16 21:43:03,387 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-16 21:43:04,185 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-16 21:43:06,010 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-16 21:43:06,099 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-16 21:43:06,100 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-16 21:43:06,110 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-16 21:43:07,065 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-16 21:43:07,065 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-16 21:43:07,066 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-16 21:43:21,108 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:43:24,142 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:45:56,768 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:45:57,778 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-09-16 21:45:57,779 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-09-16 21:45:57,779 | INFO | scchatbot.multi_agent_base | 1
2025-09-16 21:45:58,236 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-09-16 21:45:58,236 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-16 21:45:59,733 | INFO | scchatbot.multi_agent_base | 2
2025-09-16 21:45:59,736 | INFO | scchatbot.multi_agent_base | 3
2025-09-16 21:45:59,736 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-09-16 21:46:25,433 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-16 21:46:28,535 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-16 21:46:31,399 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'b05944ce'
2025-09-16 21:46:31,401 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-16 21:46:31,401 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 21:46:31,549 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-16 21:46:33,311 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:46:33,314 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-16 21:46:33,314 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-16 21:46:33,314 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-16 21:46:33,315 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 0 cell types: []
2025-09-16 21:46:33,315 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 33 chars, starts with: 'No current session data available...'
2025-09-16 21:46:33,315 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (33 chars)
2025-09-16 21:46:33,315 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'No current session data available...'
2025-09-16 21:46:33,315 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (56 chars)
2025-09-16 21:46:33,315 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 4 initial cell types
2025-09-16 21:46:33,315 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-16 21:46:33,317 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-16 21:46:33,319 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 21:46:33,319 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-16 21:46:33,319 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-16 21:46:33,319 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 4
2025-09-16 21:46:33,319 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-09-16 21:46:33,319 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Plot the violin plot for T cell with CD3D'
2025-09-16 21:46:36,620 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:46:38,246 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:46:38,272 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-09-16 21:46:38,273 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Epithelial cell', 'Stromal cell', 'Glial cell', 'Immune cell']
2025-09-16 21:46:38,407 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-09-16 21:46:38,431 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-09-16 21:46:38,431 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-09-16 21:46:38,432 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-09-16 21:46:38,432 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-09-16 21:46:38,432 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-09-16 21:46:38,433 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-09-16 21:46:38,433 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-09-16 21:46:38,433 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 0
2025-09-16 21:46:38,434 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-09-16 21:46:38,434 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-09-16 21:46:38,434 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-09-16 21:46:38,434 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 3 steps
2025-09-16 21:46:38,434 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 3 steps
2025-09-16 21:46:38,434 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-09-16 21:46:38,434 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-09-16 21:46:38,434 | INFO | scchatbot.workflow.nodes.planning |    • 1 analysis steps
2025-09-16 21:46:38,435 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-16 21:46:38,435 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-16 21:46:38,436 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 21:46:38,436 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 21:46:38,438 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-09-16 21:46:38,438 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-09-16 21:46:42,446 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:46:49,286 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:47:28,184 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:47:28,189 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-09-16 21:47:28,189 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-09-16 21:47:28,191 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['T cell', 'B cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Mast cell']
2025-09-16 21:47:28,215 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: T cell
2025-09-16 21:47:28,215 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: B cell
2025-09-16 21:47:28,215 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mononuclear phagocyte
2025-09-16 21:47:28,215 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Natural killer cell
2025-09-16 21:47:28,215 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mast cell
2025-09-16 21:47:28,217 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-09-16 21:47:28,218 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-09-16 21:47:28,218 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 21:47:28,218 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 21:47:28,218 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-09-16 21:47:28,219 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-09-16 21:47:28,219 | INFO | scchatbot.workflow.node_base |    Current message: Validating Immune cell -> ['T cell']...
2025-09-16 21:47:28,219 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'T cell'
2025-09-16 21:47:28,219 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-09-16 21:47:28,219 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Validation passed: All 1 expected cell types found successfully
2025-09-16 21:47:28,219 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: success
2025-09-16 21:47:28,219 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['T cell'], found=['T cell'], missing=[]
2025-09-16 21:47:28,219 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'success', 'message': 'All 1 expected cell types found successfully', 'found_children': ['T cell'], 'missing_children': [], 'available_types': ['B cell', 'Glial cell', 'Stromal cell', 'Mast cell', 'Epithelial cell', 'T cell', 'Mononuclear phagocyte', 'Natural killer cell']}
2025-09-16 21:47:28,219 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: []
2025-09-16 21:47:28,219 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 1 remaining steps...
2025-09-16 21:47:28,219 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3: display_violin_plot(cell_type='T cell')
2025-09-16 21:47:28,219 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3 cell type 'T cell' not in missing list []
2025-09-16 21:47:28,219 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 3
2025-09-16 21:47:28,220 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 21:47:28,220 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 21:47:28,221 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Create an interactive violin plot showing the distribution of CD3D gene expression across leiden clusters for T cells.
2025-09-16 21:47:28,221 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_violin_plot'
2025-09-16 21:47:28,221 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_violin_plot' with step parameters: {'cell_type': 'T cell', 'genes': ['CD3D']}
2025-09-16 21:47:28,222 | INFO | scchatbot.multi_agent_base | 🔍 VIZ ADATA WRAPPER DEBUG: display_violin_plot called with kwargs: {'cell_type': 'T cell', 'genes': ['CD3D']}
2025-09-16 21:47:28,721 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-16 21:47:28,724 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-16 21:47:28,724 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmphker411f.
2025-09-16 21:47:28,724 | INFO | choreographer.browser_async | Opening browser.
2025-09-16 21:47:28,724 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp1n7tcqfc.
2025-09-16 21:47:28,725 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp1n7tcqfc
2025-09-16 21:47:29,321 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmphker411f/index.html
2025-09-16 21:47:29,322 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-16 21:47:29,903 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-16 21:47:29,904 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-16 21:47:29,904 | INFO | kaleido.kaleido | Got 07E7
2025-09-16 21:47:29,904 | INFO | kaleido._kaleido_tab | Processing CD3D_Expression_in_T_cell_by_Leiden_Cluster.png
2025-09-16 21:47:29,904 | INFO | kaleido._kaleido_tab | Sending big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.png.
2025-09-16 21:47:29,972 | INFO | kaleido._kaleido_tab | Sent big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.png.
2025-09-16 21:47:29,973 | INFO | kaleido.kaleido | Reloading tab 07E7 before return.
2025-09-16 21:47:30,056 | INFO | kaleido.kaleido | Putting tab 07E7 back (queue size: 0).
2025-09-16 21:47:30,057 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-16 21:47:30,057 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-16 21:47:30,057 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 21:47:30,057 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 21:47:30,057 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 21:47:30,057 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 21:47:30,057 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 21:47:30,058 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 21:47:30,058 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 21:47:30,058 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 21:47:30,058 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 21:47:30,059 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 21:47:30,144 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 21:47:30,144 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 21:47:30,146 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-16 21:47:30,147 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-16 21:47:30,147 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp3nt6efk6.
2025-09-16 21:47:30,147 | INFO | choreographer.browser_async | Opening browser.
2025-09-16 21:47:30,147 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpfx88n95j.
2025-09-16 21:47:30,148 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpfx88n95j
2025-09-16 21:47:30,610 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp3nt6efk6/index.html
2025-09-16 21:47:30,612 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-16 21:47:31,167 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-16 21:47:31,167 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-16 21:47:31,167 | INFO | kaleido.kaleido | Got 5B7D
2025-09-16 21:47:31,167 | INFO | kaleido._kaleido_tab | Processing CD3D_Expression_in_T_cell_by_Leiden_Cluster.pdf
2025-09-16 21:47:31,167 | INFO | kaleido._kaleido_tab | Sending big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.pdf.
2025-09-16 21:47:31,210 | INFO | kaleido._kaleido_tab | Sent big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.pdf.
2025-09-16 21:47:31,266 | INFO | kaleido.kaleido | Reloading tab 5B7D before return.
2025-09-16 21:47:31,352 | INFO | kaleido.kaleido | Putting tab 5B7D back (queue size: 0).
2025-09-16 21:47:31,352 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-16 21:47:31,352 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-16 21:47:31,352 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 21:47:31,353 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 21:47:31,353 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 21:47:31,353 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 21:47:31,353 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 21:47:31,354 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 21:47:31,354 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 21:47:31,354 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 21:47:31,354 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 21:47:31,354 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 21:47:31,440 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 21:47:31,440 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 21:47:31,460 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 21:47:31,465 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 21:47:31,467 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-09-16 21:47:31,470 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_violin_plot - HTML preserved
2025-09-16 21:47:31,470 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-09-16 21:47:31,470 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 21:47:31,471 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 21:47:31,471 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (3/3), running post-execution evaluation
2025-09-16 21:47:31,475 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 21:47:31,475 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 21:47:33,483 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:47:34,074 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:47:34,167 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 21:47:34,168 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 21:47:34,688 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:47:34,690 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 21:47:36,110 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:47:36,119 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-09-16 21:47:36,120 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['dea_split_by_condition']
2025-09-16 21:47:36,120 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 21:47:36,121 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 3 entries
2025-09-16 21:47:36,121 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_violin_plot (execution 3)
2025-09-16 21:47:36,121 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_violin_plot']
2025-09-16 21:47:36,121 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: dea_split_by_condition(T cell)
2025-09-16 21:47:36,121 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 1 missing steps for T cell
2025-09-16 21:47:36,121 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 1 total supplementary steps
2025-09-16 21:47:36,121 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 21:47:36,121 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 1 supplementary steps to execution plan (attempt 1/2)
2025-09-16 21:47:36,121 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-09-16 21:47:36,121 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 21:47:36,121 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 3
2025-09-16 21:47:36,121 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-09-16 21:47:36,121 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 21:47:36,121 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 1
2025-09-16 21:47:36,122 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 21:47:36,122 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 21:47:36,123 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 21:47:36,123 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 21:47:36,124 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Post-evaluation: dea_split_by_condition for T cell
2025-09-16 21:47:36,124 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'dea_split_by_condition'
2025-09-16 21:47:46,272 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-09-16 21:47:46,273 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: dea_split_by_condition - Full data preserved
2025-09-16 21:47:46,273 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-09-16 21:47:46,273 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 21:47:46,273 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 21:47:46,274 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-16 21:47:46,274 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 21:47:46,274 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 21:47:47,628 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:47:48,235 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:47:48,247 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 21:47:48,248 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 21:47:49,268 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:47:49,284 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 21:47:49,935 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:47:49,944 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-09-16 21:47:49,944 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['dea_split_by_condition']
2025-09-16 21:47:49,944 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 21:47:49,944 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-16 21:47:49,944 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_violin_plot (execution 3)
2025-09-16 21:47:49,945 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: dea_split_by_condition (execution 4)
2025-09-16 21:47:49,945 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_violin_plot', 'dea_split_by_condition']
2025-09-16 21:47:49,945 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-16 21:47:49,945 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-16 21:47:49,945 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 21:47:49,945 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 21:47:49,945 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-16 21:47:49,945 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-16 21:47:49,945 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 21:47:49,945 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-16 21:47:49,945 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 21:47:49,945 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 21:47:49,946 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-16 21:47:49,946 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 21:47:49,946 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 21:47:51,387 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:47:52,177 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:47:52,187 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 21:47:52,188 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 21:47:52,794 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:47:52,804 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 21:47:53,274 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:47:53,277 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-09-16 21:47:53,277 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['dea_split_by_condition']
2025-09-16 21:47:53,277 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 21:47:53,277 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-16 21:47:53,278 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_violin_plot (execution 3)
2025-09-16 21:47:53,278 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: dea_split_by_condition (execution 4)
2025-09-16 21:47:53,278 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_violin_plot', 'dea_split_by_condition']
2025-09-16 21:47:53,278 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-16 21:47:53,278 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-16 21:47:53,278 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 21:47:53,278 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 21:47:53,279 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-16 21:47:53,279 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-16 21:47:53,279 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 21:47:53,279 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-16 21:47:53,279 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 21:47:53,279 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 21:47:53,279 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-16 21:47:53,280 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-16 21:47:53,280 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 4 execution steps
2025-09-16 21:47:53,281 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-09-16 21:47:53,281 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-09-16 21:47:53,281 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-09-16 21:47:53,281 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-09-16 21:47:53,281 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: display_violin_plot for T cell
2025-09-16 21:47:53,281 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 3 function: display_violin_plot
2025-09-16 21:47:53,281 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell', 'genes': ['CD3D']}
2025-09-16 21:47:53,281 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_violin_plot with VisualizationResultAccessor
2025-09-16 21:47:53,281 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: dea_split_by_condition for T cell
2025-09-16 21:47:53,281 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling dea_split_by_condition with DEAResultAccessor
2025-09-16 21:47:53,282 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 DEA: Loaded 4 conditions from mapping file: ['cataract', 'age related macular degeneration', 'bulk', 'basal laminar drusen']
2025-09-16 21:47:53,286 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for cataract: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 21:47:53,292 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for age related macular degeneration: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 21:47:53,295 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for bulk: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 21:47:53,298 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for basal laminar drusen: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 21:47:53,300 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 4 successful steps
2025-09-16 21:47:53,301 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 16915 characters for synthesis
2025-09-16 21:47:53,301 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-16 21:47:53,301 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-16 21:47:53,301 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (56 chars)
2025-09-16 21:47:53,301 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-16 21:47:53,301 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-16 21:47:53,301 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-16 21:47:58,112 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:47:58,125 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 4 execution steps
2025-09-16 21:47:58,125 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: process_cells, success=True, has_result=True
2025-09-16 21:47:58,125 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: validate_processing_results, success=True, has_result=True
2025-09-16 21:47:58,125 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: display_violin_plot, success=True, has_result=True
2025-09-16 21:47:58,125 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added plot plot_1: Violin Plot - T cell (18127 chars)
2025-09-16 21:47:58,125 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: dea_split_by_condition, success=True, has_result=True
2025-09-16 21:47:58,125 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 1 individual plots (total: 18,127 chars)
2025-09-16 21:47:58,126 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 1 plots, total size: 18,127 bytes
2025-09-16 21:47:58,126 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 1 individual plots
2025-09-16 21:47:58,126 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 1 plots + 1 text (plots first)
2025-09-16 21:47:58,126 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 2 total messages (plots first, then text)
2025-09-16 21:47:58,126 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (375 chars)
2025-09-16 21:47:58,207 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-16 21:47:58,207 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-16 21:50:30,992 | INFO | django.utils.autoreload | /Users/seanchiu/Desktop/scchat_fin/scChat/scchatbot/analysis/visualizations.py changed, reloading.
2025-09-16 21:50:32,066 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 21:50:32,066 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 21:50:34,023 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-16 21:50:39,194 | INFO | faiss.loader | Loading faiss.
2025-09-16 21:50:39,208 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-16 21:50:40,115 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-16 21:50:41,911 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-16 21:50:41,961 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-16 21:50:41,962 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-16 21:50:41,974 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-16 21:50:42,879 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-16 21:50:42,879 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-16 21:50:42,881 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-16 21:50:56,152 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:51:00,570 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:51:44,122 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:51:45,124 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-09-16 21:51:45,124 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-09-16 21:51:45,125 | INFO | scchatbot.multi_agent_base | 1
2025-09-16 21:51:45,582 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-09-16 21:51:45,582 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-16 21:51:46,905 | INFO | scchatbot.multi_agent_base | 2
2025-09-16 21:51:46,908 | INFO | scchatbot.multi_agent_base | 3
2025-09-16 21:51:46,908 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-09-16 21:52:36,488 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-16 21:52:39,541 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-16 21:52:41,996 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'b05944ce'
2025-09-16 21:52:42,000 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-16 21:52:42,000 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 21:52:42,552 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-16 21:52:42,959 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:52:42,963 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-16 21:52:42,964 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-16 21:52:42,964 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-16 21:52:42,964 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 0 cell types: []
2025-09-16 21:52:42,964 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 33 chars, starts with: 'No current session data available...'
2025-09-16 21:52:42,964 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (33 chars)
2025-09-16 21:52:42,964 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'No current session data available...'
2025-09-16 21:52:42,965 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (56 chars)
2025-09-16 21:52:42,965 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 4 initial cell types
2025-09-16 21:52:42,965 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-16 21:52:42,967 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-16 21:52:42,968 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 21:52:42,968 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-16 21:52:42,968 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-16 21:52:42,968 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 4
2025-09-16 21:52:42,968 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-09-16 21:52:42,968 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Plot the violin plot for T cell with CD3D'
2025-09-16 21:52:46,047 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:52:48,116 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:52:48,127 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-09-16 21:52:48,128 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Epithelial cell', 'Stromal cell', 'Immune cell', 'Glial cell']
2025-09-16 21:52:48,165 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-09-16 21:52:48,185 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-09-16 21:52:48,188 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-09-16 21:52:48,189 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-09-16 21:52:48,189 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-09-16 21:52:48,189 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-09-16 21:52:48,189 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-09-16 21:52:48,189 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-09-16 21:52:48,190 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 0
2025-09-16 21:52:48,190 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-09-16 21:52:48,190 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-09-16 21:52:48,190 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-09-16 21:52:48,190 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 3 steps
2025-09-16 21:52:48,190 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 3 steps
2025-09-16 21:52:48,190 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-09-16 21:52:48,190 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-09-16 21:52:48,190 | INFO | scchatbot.workflow.nodes.planning |    • 1 analysis steps
2025-09-16 21:52:48,190 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-16 21:52:48,190 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-16 21:52:48,191 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 21:52:48,191 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 21:52:48,192 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-09-16 21:52:48,192 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-09-16 21:52:52,505 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:52:55,077 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:53:31,779 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:53:31,794 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-09-16 21:53:31,795 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-09-16 21:53:31,795 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['T cell', 'B cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Mast cell']
2025-09-16 21:53:31,820 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: T cell
2025-09-16 21:53:31,820 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: B cell
2025-09-16 21:53:31,820 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mononuclear phagocyte
2025-09-16 21:53:31,820 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Natural killer cell
2025-09-16 21:53:31,820 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mast cell
2025-09-16 21:53:31,822 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-09-16 21:53:31,822 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-09-16 21:53:31,822 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 21:53:31,822 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 21:53:31,823 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-09-16 21:53:31,823 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-09-16 21:53:31,823 | INFO | scchatbot.workflow.node_base |    Current message: Validating Immune cell -> ['T cell']...
2025-09-16 21:53:31,823 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'T cell'
2025-09-16 21:53:31,823 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-09-16 21:53:31,823 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Validation passed: All 1 expected cell types found successfully
2025-09-16 21:53:31,824 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: success
2025-09-16 21:53:31,824 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['T cell'], found=['T cell'], missing=[]
2025-09-16 21:53:31,824 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'success', 'message': 'All 1 expected cell types found successfully', 'found_children': ['T cell'], 'missing_children': [], 'available_types': ['Natural killer cell', 'Glial cell', 'B cell', 'Epithelial cell', 'Mast cell', 'Mononuclear phagocyte', 'Stromal cell', 'T cell']}
2025-09-16 21:53:31,824 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: []
2025-09-16 21:53:31,824 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 1 remaining steps...
2025-09-16 21:53:31,824 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3: display_violin_plot(cell_type='T cell')
2025-09-16 21:53:31,824 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3 cell type 'T cell' not in missing list []
2025-09-16 21:53:31,824 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 3
2025-09-16 21:53:31,824 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 21:53:31,824 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 21:53:31,825 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Create an interactive violin plot to show the distribution of CD3D gene expression across leiden clusters for T cells, with pre/post treatment comparison if available.
2025-09-16 21:53:31,825 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_violin_plot'
2025-09-16 21:53:31,825 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_violin_plot' with step parameters: {'cell_type': 'T cell', 'genes': ['CD3D']}
2025-09-16 21:53:31,825 | INFO | scchatbot.multi_agent_base | 🔍 VIZ ADATA WRAPPER DEBUG: display_violin_plot called with kwargs: {'cell_type': 'T cell', 'genes': ['CD3D']}
2025-09-16 21:53:32,318 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-16 21:53:32,319 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-16 21:53:32,319 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpj1czgxgf.
2025-09-16 21:53:32,319 | INFO | choreographer.browser_async | Opening browser.
2025-09-16 21:53:32,320 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp1zsmk1gs.
2025-09-16 21:53:32,320 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp1zsmk1gs
2025-09-16 21:53:32,877 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpj1czgxgf/index.html
2025-09-16 21:53:32,882 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-16 21:53:33,424 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-16 21:53:33,425 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-16 21:53:33,425 | INFO | kaleido.kaleido | Got 7410
2025-09-16 21:53:33,425 | INFO | kaleido._kaleido_tab | Processing CD3D_Expression_in_T_cell_by_Leiden_Cluster.png
2025-09-16 21:53:33,425 | INFO | kaleido._kaleido_tab | Sending big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.png.
2025-09-16 21:53:33,497 | INFO | kaleido._kaleido_tab | Sent big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.png.
2025-09-16 21:53:33,498 | INFO | kaleido.kaleido | Reloading tab 7410 before return.
2025-09-16 21:53:33,583 | INFO | kaleido.kaleido | Putting tab 7410 back (queue size: 0).
2025-09-16 21:53:33,583 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-16 21:53:33,583 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-16 21:53:33,583 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 21:53:33,583 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 21:53:33,584 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 21:53:33,584 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 21:53:33,584 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 21:53:33,584 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 21:53:33,584 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 21:53:33,585 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 21:53:33,585 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 21:53:33,585 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 21:53:33,676 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 21:53:33,677 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 21:53:33,679 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-16 21:53:33,679 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-16 21:53:33,687 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp48kmhmco.
2025-09-16 21:53:33,688 | INFO | choreographer.browser_async | Opening browser.
2025-09-16 21:53:33,689 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpz268z29t.
2025-09-16 21:53:33,689 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpz268z29t
2025-09-16 21:53:34,165 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp48kmhmco/index.html
2025-09-16 21:53:34,184 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-16 21:53:34,738 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-16 21:53:34,739 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-16 21:53:34,739 | INFO | kaleido.kaleido | Got 7992
2025-09-16 21:53:34,739 | INFO | kaleido._kaleido_tab | Processing CD3D_Expression_in_T_cell_by_Leiden_Cluster.pdf
2025-09-16 21:53:34,739 | INFO | kaleido._kaleido_tab | Sending big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.pdf.
2025-09-16 21:53:34,781 | INFO | kaleido._kaleido_tab | Sent big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.pdf.
2025-09-16 21:53:34,834 | INFO | kaleido.kaleido | Reloading tab 7992 before return.
2025-09-16 21:53:34,917 | INFO | kaleido.kaleido | Putting tab 7992 back (queue size: 0).
2025-09-16 21:53:34,917 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-16 21:53:34,917 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-16 21:53:34,918 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 21:53:34,918 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 21:53:34,918 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 21:53:34,918 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 21:53:34,918 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 21:53:34,919 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 21:53:34,920 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 21:53:34,920 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 21:53:34,920 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 21:53:34,920 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 21:53:35,080 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 21:53:35,080 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 21:53:35,092 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-09-16 21:53:35,093 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_violin_plot - HTML preserved
2025-09-16 21:53:35,094 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-09-16 21:53:35,094 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 21:53:35,094 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 21:53:35,094 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (3/3), running post-execution evaluation
2025-09-16 21:53:35,094 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 21:53:35,095 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 21:53:35,983 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 21:53:35,983 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 21:53:37,261 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:53:37,775 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:53:37,780 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 21:53:37,781 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 21:53:38,472 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:53:38,474 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 21:53:39,139 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:53:39,149 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-09-16 21:53:39,149 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['dea_split_by_condition']
2025-09-16 21:53:39,150 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 21:53:39,150 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 3 entries
2025-09-16 21:53:39,150 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_violin_plot (execution 3)
2025-09-16 21:53:39,150 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_violin_plot']
2025-09-16 21:53:39,150 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: dea_split_by_condition(T cell)
2025-09-16 21:53:39,150 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 1 missing steps for T cell
2025-09-16 21:53:39,150 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 1 total supplementary steps
2025-09-16 21:53:39,151 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 21:53:39,151 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 1 supplementary steps to execution plan (attempt 1/2)
2025-09-16 21:53:39,151 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-09-16 21:53:39,151 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 21:53:39,151 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 3
2025-09-16 21:53:39,152 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-09-16 21:53:39,152 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 21:53:39,152 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 1
2025-09-16 21:53:39,152 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 21:53:39,152 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 21:53:39,153 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 21:53:39,153 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 21:53:39,158 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Post-evaluation: dea_split_by_condition for T cell
2025-09-16 21:53:39,159 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'dea_split_by_condition'
2025-09-16 21:53:49,401 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-09-16 21:53:49,402 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: dea_split_by_condition - Full data preserved
2025-09-16 21:53:49,402 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-09-16 21:53:49,402 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 21:53:49,402 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 21:53:49,402 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-16 21:53:49,402 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 21:53:49,402 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 21:53:51,292 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:53:51,914 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:53:51,916 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 21:53:51,916 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 21:53:52,724 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:53:52,732 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 21:53:53,373 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:53:53,373 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-09-16 21:53:53,374 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['dea_split_by_condition']
2025-09-16 21:53:53,374 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 21:53:53,374 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-16 21:53:53,374 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_violin_plot (execution 3)
2025-09-16 21:53:53,374 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: dea_split_by_condition (execution 4)
2025-09-16 21:53:53,374 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_violin_plot', 'dea_split_by_condition']
2025-09-16 21:53:53,374 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-16 21:53:53,374 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-16 21:53:53,374 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 21:53:53,374 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 21:53:53,374 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-16 21:53:53,374 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-16 21:53:53,374 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 21:53:53,374 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-16 21:53:53,374 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 21:53:53,374 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 21:53:53,374 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-16 21:53:53,375 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 21:53:53,375 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 21:53:56,156 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:53:56,679 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:53:56,693 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 21:53:56,694 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 21:53:57,507 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:53:57,512 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 21:53:57,982 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:53:57,991 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-09-16 21:53:57,992 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['dea_split_by_condition']
2025-09-16 21:53:57,992 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 21:53:57,992 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-16 21:53:57,993 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_violin_plot (execution 3)
2025-09-16 21:53:57,993 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: dea_split_by_condition (execution 4)
2025-09-16 21:53:57,993 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_violin_plot', 'dea_split_by_condition']
2025-09-16 21:53:57,994 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-16 21:53:57,994 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-16 21:53:57,994 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 21:53:57,994 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 21:53:57,994 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-16 21:53:57,996 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-16 21:53:57,996 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 21:53:57,996 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-16 21:53:57,996 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 21:53:57,996 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 21:53:57,996 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-16 21:53:57,997 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-16 21:53:57,997 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 4 execution steps
2025-09-16 21:53:57,997 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-09-16 21:53:57,998 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-09-16 21:53:57,998 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-09-16 21:53:57,998 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-09-16 21:53:57,998 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: display_violin_plot for T cell
2025-09-16 21:53:57,998 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 3 function: display_violin_plot
2025-09-16 21:53:57,998 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell', 'genes': ['CD3D']}
2025-09-16 21:53:57,999 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_violin_plot with VisualizationResultAccessor
2025-09-16 21:53:57,999 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: dea_split_by_condition for T cell
2025-09-16 21:53:57,999 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling dea_split_by_condition with DEAResultAccessor
2025-09-16 21:53:58,000 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 DEA: Loaded 4 conditions from mapping file: ['basal laminar drusen', 'bulk', 'age related macular degeneration', 'cataract']
2025-09-16 21:53:58,002 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for basal laminar drusen: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 21:53:58,005 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for bulk: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 21:53:58,007 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for age related macular degeneration: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 21:53:58,009 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for cataract: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 21:53:58,010 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 4 successful steps
2025-09-16 21:53:58,011 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 16915 characters for synthesis
2025-09-16 21:53:58,011 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-16 21:53:58,011 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-16 21:53:58,011 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (56 chars)
2025-09-16 21:53:58,011 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-16 21:53:58,011 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-16 21:53:58,011 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-16 21:54:02,935 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:54:02,938 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 4 execution steps
2025-09-16 21:54:02,938 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: process_cells, success=True, has_result=True
2025-09-16 21:54:02,938 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: validate_processing_results, success=True, has_result=True
2025-09-16 21:54:02,938 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: display_violin_plot, success=True, has_result=True
2025-09-16 21:54:02,938 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added plot plot_1: Violin Plot - T cell (18127 chars)
2025-09-16 21:54:02,938 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: dea_split_by_condition, success=True, has_result=True
2025-09-16 21:54:02,938 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 1 individual plots (total: 18,127 chars)
2025-09-16 21:54:02,938 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 1 plots, total size: 18,127 bytes
2025-09-16 21:54:02,938 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 1 individual plots
2025-09-16 21:54:02,938 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 1 plots + 1 text (plots first)
2025-09-16 21:54:02,938 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 2 total messages (plots first, then text)
2025-09-16 21:54:02,939 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (508 chars)
2025-09-16 21:54:02,996 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-16 21:54:02,996 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-16 21:57:00,659 | INFO | django.utils.autoreload | /Users/seanchiu/Desktop/scchat_fin/scChat/scchatbot/analysis/visualizations.py changed, reloading.
2025-09-16 21:57:01,307 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 21:57:01,308 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 21:57:03,087 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-16 21:57:57,960 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-16 21:58:02,854 | INFO | faiss.loader | Loading faiss.
2025-09-16 21:58:02,880 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-16 21:58:03,836 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-16 21:58:05,606 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-16 21:58:05,680 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-16 21:58:05,680 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-16 21:58:05,689 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-16 21:58:06,825 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-16 21:58:06,825 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-16 21:58:06,828 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-16 21:58:23,089 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 21:58:29,477 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:01:52,275 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-16 22:01:57,141 | INFO | faiss.loader | Loading faiss.
2025-09-16 22:01:57,155 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-16 22:01:58,054 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-16 22:01:59,711 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-16 22:01:59,799 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-16 22:01:59,799 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-16 22:01:59,808 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-16 22:02:00,889 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-16 22:02:00,889 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-16 22:02:00,891 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-16 22:02:30,927 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:03:01,978 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:07:52,476 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:07:53,479 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-09-16 22:07:53,480 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-09-16 22:07:53,480 | INFO | scchatbot.multi_agent_base | 1
2025-09-16 22:07:54,083 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-09-16 22:07:54,083 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-16 22:07:55,674 | INFO | scchatbot.multi_agent_base | 2
2025-09-16 22:07:55,676 | INFO | scchatbot.multi_agent_base | 3
2025-09-16 22:07:55,676 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-09-16 22:08:26,957 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-16 22:08:30,547 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-16 22:08:33,240 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'b05944ce'
2025-09-16 22:08:33,241 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-16 22:08:33,241 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 22:08:33,567 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-16 22:08:34,460 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:08:34,465 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-16 22:08:34,466 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-16 22:08:34,466 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-16 22:08:34,467 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 0 cell types: []
2025-09-16 22:08:34,468 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 33 chars, starts with: 'No current session data available...'
2025-09-16 22:08:34,468 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (33 chars)
2025-09-16 22:08:34,468 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'No current session data available...'
2025-09-16 22:08:34,468 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (56 chars)
2025-09-16 22:08:34,468 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 4 initial cell types
2025-09-16 22:08:34,469 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-16 22:08:34,470 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-16 22:08:34,470 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 22:08:34,470 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-16 22:08:34,470 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-16 22:08:34,470 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 4
2025-09-16 22:08:34,470 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-09-16 22:08:34,471 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Plot the violin plot for T cell with CD3D'
2025-09-16 22:08:41,655 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:08:43,553 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:08:43,557 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-09-16 22:08:43,558 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Epithelial cell', 'Stromal cell', 'Immune cell', 'Glial cell']
2025-09-16 22:08:43,589 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-09-16 22:08:43,607 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-09-16 22:08:43,607 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-09-16 22:08:43,607 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-09-16 22:08:43,608 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-09-16 22:08:43,608 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-09-16 22:08:43,608 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-09-16 22:08:43,608 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-09-16 22:08:43,608 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 0
2025-09-16 22:08:43,608 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-09-16 22:08:43,609 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-09-16 22:08:43,609 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-09-16 22:08:43,609 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 3 steps
2025-09-16 22:08:43,609 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 3 steps
2025-09-16 22:08:43,609 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-09-16 22:08:43,609 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-09-16 22:08:43,609 | INFO | scchatbot.workflow.nodes.planning |    • 1 analysis steps
2025-09-16 22:08:43,609 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-16 22:08:43,610 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-16 22:08:43,610 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 22:08:43,610 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 22:08:43,612 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-09-16 22:08:43,612 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-09-16 22:08:48,938 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:09:02,650 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:09:38,467 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:09:38,473 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-09-16 22:09:38,481 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-09-16 22:09:38,482 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['T cell', 'B cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Mast cell']
2025-09-16 22:09:38,506 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: T cell
2025-09-16 22:09:38,506 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: B cell
2025-09-16 22:09:38,506 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mononuclear phagocyte
2025-09-16 22:09:38,506 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Natural killer cell
2025-09-16 22:09:38,507 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mast cell
2025-09-16 22:09:38,508 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-09-16 22:09:38,508 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-09-16 22:09:38,508 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 22:09:38,508 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 22:09:38,509 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-09-16 22:09:38,509 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-09-16 22:09:38,509 | INFO | scchatbot.workflow.node_base |    Current message: Validating Immune cell -> ['T cell']...
2025-09-16 22:09:38,509 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'T cell'
2025-09-16 22:09:38,509 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-09-16 22:09:38,509 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Validation passed: All 1 expected cell types found successfully
2025-09-16 22:09:38,509 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: success
2025-09-16 22:09:38,510 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['T cell'], found=['T cell'], missing=[]
2025-09-16 22:09:38,510 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'success', 'message': 'All 1 expected cell types found successfully', 'found_children': ['T cell'], 'missing_children': [], 'available_types': ['Mast cell', 'Mononuclear phagocyte', 'B cell', 'Natural killer cell', 'T cell', 'Epithelial cell', 'Glial cell', 'Stromal cell']}
2025-09-16 22:09:38,510 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: []
2025-09-16 22:09:38,510 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 1 remaining steps...
2025-09-16 22:09:38,510 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3: display_violin_plot(cell_type='T cell')
2025-09-16 22:09:38,510 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3 cell type 'T cell' not in missing list []
2025-09-16 22:09:38,510 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 3
2025-09-16 22:09:38,510 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 22:09:38,510 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 22:09:38,511 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Create an interactive violin plot to show the distribution of CD3D gene expression across leiden clusters for T cells.
2025-09-16 22:09:38,511 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_violin_plot'
2025-09-16 22:09:38,512 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_violin_plot' with step parameters: {'cell_type': 'T cell', 'genes': ['CD3D']}
2025-09-16 22:09:38,512 | INFO | scchatbot.multi_agent_base | 🔍 VIZ ADATA WRAPPER DEBUG: display_violin_plot called with kwargs: {'cell_type': 'T cell', 'genes': ['CD3D']}
2025-09-16 22:09:38,928 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-16 22:09:38,928 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-16 22:09:38,929 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpz5ru4twt.
2025-09-16 22:09:38,929 | INFO | choreographer.browser_async | Opening browser.
2025-09-16 22:09:38,929 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp3iokxyrx.
2025-09-16 22:09:38,930 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp3iokxyrx
2025-09-16 22:09:39,525 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpz5ru4twt/index.html
2025-09-16 22:09:39,527 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-16 22:09:40,048 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-16 22:09:40,049 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-16 22:09:40,049 | INFO | kaleido.kaleido | Got 6B54
2025-09-16 22:09:40,049 | INFO | kaleido._kaleido_tab | Processing CD3D_Expression_in_T_cell_by_Leiden_Cluster.png
2025-09-16 22:09:40,049 | INFO | kaleido._kaleido_tab | Sending big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.png.
2025-09-16 22:09:40,109 | INFO | kaleido._kaleido_tab | Sent big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.png.
2025-09-16 22:09:40,111 | INFO | kaleido.kaleido | Reloading tab 6B54 before return.
2025-09-16 22:09:40,184 | INFO | kaleido.kaleido | Putting tab 6B54 back (queue size: 0).
2025-09-16 22:09:40,184 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-16 22:09:40,184 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-16 22:09:40,184 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:09:40,184 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:09:40,185 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 22:09:40,185 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 22:09:40,185 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 22:09:40,185 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:09:40,186 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:09:40,186 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 22:09:40,186 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 22:09:40,186 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 22:09:40,269 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:09:40,269 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:09:40,271 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-16 22:09:40,272 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-16 22:09:40,272 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp4hnyp6le.
2025-09-16 22:09:40,273 | INFO | choreographer.browser_async | Opening browser.
2025-09-16 22:09:40,273 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp3bhljaao.
2025-09-16 22:09:40,273 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp3bhljaao
2025-09-16 22:09:40,705 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp4hnyp6le/index.html
2025-09-16 22:09:40,706 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-16 22:09:41,249 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-16 22:09:41,249 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-16 22:09:41,250 | INFO | kaleido.kaleido | Got 4225
2025-09-16 22:09:41,250 | INFO | kaleido._kaleido_tab | Processing CD3D_Expression_in_T_cell_by_Leiden_Cluster.pdf
2025-09-16 22:09:41,250 | INFO | kaleido._kaleido_tab | Sending big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.pdf.
2025-09-16 22:09:41,289 | INFO | kaleido._kaleido_tab | Sent big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.pdf.
2025-09-16 22:09:41,338 | INFO | kaleido.kaleido | Reloading tab 4225 before return.
2025-09-16 22:09:41,411 | INFO | kaleido.kaleido | Putting tab 4225 back (queue size: 0).
2025-09-16 22:09:41,412 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-16 22:09:41,412 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-16 22:09:41,412 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:09:41,412 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:09:41,412 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 22:09:41,412 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 22:09:41,412 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 22:09:41,413 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:09:41,413 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:09:41,413 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 22:09:41,413 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 22:09:41,413 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 22:09:41,503 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:09:41,503 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:09:41,515 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-09-16 22:09:41,516 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_violin_plot - HTML preserved
2025-09-16 22:09:41,516 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-09-16 22:09:41,516 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 22:09:41,516 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 22:09:41,516 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (3/3), running post-execution evaluation
2025-09-16 22:09:41,516 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 22:09:41,516 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 22:09:42,259 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:09:42,259 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:09:43,457 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:09:44,099 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:09:44,124 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 22:09:44,124 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 22:09:44,882 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:09:44,893 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 22:09:45,426 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:09:45,428 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-09-16 22:09:45,429 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['dea_split_by_condition']
2025-09-16 22:09:45,429 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 22:09:45,429 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 3 entries
2025-09-16 22:09:45,429 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_violin_plot (execution 3)
2025-09-16 22:09:45,429 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_violin_plot']
2025-09-16 22:09:45,429 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: dea_split_by_condition(T cell)
2025-09-16 22:09:45,429 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 1 missing steps for T cell
2025-09-16 22:09:45,429 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 1 total supplementary steps
2025-09-16 22:09:45,429 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 22:09:45,429 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 1 supplementary steps to execution plan (attempt 1/2)
2025-09-16 22:09:45,430 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-09-16 22:09:45,430 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 22:09:45,430 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 3
2025-09-16 22:09:45,430 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-09-16 22:09:45,430 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 22:09:45,430 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 1
2025-09-16 22:09:45,431 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 22:09:45,431 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 22:09:45,432 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 22:09:45,432 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 22:09:45,434 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Post-evaluation: dea_split_by_condition for T cell
2025-09-16 22:09:45,435 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'dea_split_by_condition'
2025-09-16 22:09:55,021 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-09-16 22:09:55,022 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: dea_split_by_condition - Full data preserved
2025-09-16 22:09:55,022 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-09-16 22:09:55,022 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 22:09:55,022 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 22:09:55,023 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-16 22:09:55,023 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 22:09:55,023 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 22:09:57,235 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:09:57,964 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:09:57,979 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 22:09:57,980 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 22:09:58,521 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:09:58,521 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 22:09:59,165 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:09:59,168 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-09-16 22:09:59,168 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['dea_split_by_condition']
2025-09-16 22:09:59,169 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 22:09:59,169 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-16 22:09:59,170 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_violin_plot (execution 3)
2025-09-16 22:09:59,170 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: dea_split_by_condition (execution 4)
2025-09-16 22:09:59,171 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_violin_plot', 'dea_split_by_condition']
2025-09-16 22:09:59,171 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-16 22:09:59,172 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-16 22:09:59,172 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 22:09:59,172 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 22:09:59,172 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-16 22:09:59,172 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-16 22:09:59,172 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 22:09:59,172 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-16 22:09:59,172 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 22:09:59,173 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 22:09:59,174 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-16 22:09:59,174 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 22:09:59,174 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 22:10:01,549 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:10:02,233 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:10:02,239 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 22:10:02,240 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 22:10:03,155 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:10:03,158 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 22:10:03,679 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:10:03,688 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-09-16 22:10:03,689 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['dea_split_by_condition']
2025-09-16 22:10:03,689 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 22:10:03,689 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-16 22:10:03,689 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_violin_plot (execution 3)
2025-09-16 22:10:03,689 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: dea_split_by_condition (execution 4)
2025-09-16 22:10:03,689 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_violin_plot', 'dea_split_by_condition']
2025-09-16 22:10:03,689 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-16 22:10:03,690 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-16 22:10:03,690 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 22:10:03,690 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 22:10:03,690 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-16 22:10:03,690 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-16 22:10:03,690 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 22:10:03,690 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-16 22:10:03,691 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 22:10:03,692 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 22:10:03,693 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-16 22:10:03,694 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-16 22:10:03,695 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 4 execution steps
2025-09-16 22:10:03,695 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-09-16 22:10:03,695 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-09-16 22:10:03,695 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-09-16 22:10:03,695 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-09-16 22:10:03,695 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: display_violin_plot for T cell
2025-09-16 22:10:03,695 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 3 function: display_violin_plot
2025-09-16 22:10:03,695 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell', 'genes': ['CD3D']}
2025-09-16 22:10:03,696 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_violin_plot with VisualizationResultAccessor
2025-09-16 22:10:03,696 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: dea_split_by_condition for T cell
2025-09-16 22:10:03,696 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling dea_split_by_condition with DEAResultAccessor
2025-09-16 22:10:03,696 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 DEA: Loaded 4 conditions from mapping file: ['basal laminar drusen', 'age related macular degeneration', 'cataract', 'bulk']
2025-09-16 22:10:03,698 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for basal laminar drusen: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 22:10:03,702 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for age related macular degeneration: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 22:10:03,707 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for cataract: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 22:10:03,715 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for bulk: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 22:10:03,718 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 4 successful steps
2025-09-16 22:10:03,718 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 16915 characters for synthesis
2025-09-16 22:10:03,719 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-16 22:10:03,719 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-16 22:10:03,719 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (56 chars)
2025-09-16 22:10:03,719 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-16 22:10:03,719 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-16 22:10:03,720 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-16 22:10:08,380 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:10:08,382 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 4 execution steps
2025-09-16 22:10:08,383 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: process_cells, success=True, has_result=True
2025-09-16 22:10:08,383 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: validate_processing_results, success=True, has_result=True
2025-09-16 22:10:08,383 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: display_violin_plot, success=True, has_result=True
2025-09-16 22:10:08,383 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added plot plot_1: Violin Plot - T cell (18370 chars)
2025-09-16 22:10:08,383 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: dea_split_by_condition, success=True, has_result=True
2025-09-16 22:10:08,384 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 1 individual plots (total: 18,370 chars)
2025-09-16 22:10:08,384 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 1 plots, total size: 18,370 bytes
2025-09-16 22:10:08,384 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 1 individual plots
2025-09-16 22:10:08,384 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 1 plots + 1 text (plots first)
2025-09-16 22:10:08,384 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 2 total messages (plots first, then text)
2025-09-16 22:10:08,385 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (554 chars)
2025-09-16 22:10:08,497 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-16 22:10:08,497 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-16 22:15:34,421 | INFO | django.utils.autoreload | /Users/seanchiu/Desktop/scchat_fin/scChat/scchatbot/analysis/visualizations.py changed, reloading.
2025-09-16 22:15:34,984 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:15:34,986 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:15:36,814 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-16 22:17:18,144 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-16 22:17:22,874 | INFO | faiss.loader | Loading faiss.
2025-09-16 22:17:22,899 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-16 22:17:23,737 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-16 22:17:25,602 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-16 22:17:25,688 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-16 22:17:25,688 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-16 22:17:25,697 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-16 22:17:26,657 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-16 22:17:26,657 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-16 22:17:26,660 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-16 22:17:50,383 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:18:07,954 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:20:39,727 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:20:40,820 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-09-16 22:20:40,821 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-09-16 22:20:40,821 | INFO | scchatbot.multi_agent_base | 1
2025-09-16 22:20:41,220 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-09-16 22:20:41,220 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-16 22:20:42,998 | INFO | scchatbot.multi_agent_base | 2
2025-09-16 22:20:43,001 | INFO | scchatbot.multi_agent_base | 3
2025-09-16 22:20:43,001 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-09-16 22:20:58,449 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-16 22:21:01,524 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-16 22:21:04,508 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'b05944ce'
2025-09-16 22:21:04,510 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-16 22:21:04,511 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 22:21:04,531 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-16 22:21:06,296 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:21:06,307 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-16 22:21:06,307 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-16 22:21:06,308 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-16 22:21:06,308 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 0 cell types: []
2025-09-16 22:21:06,308 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 33 chars, starts with: 'No current session data available...'
2025-09-16 22:21:06,309 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (33 chars)
2025-09-16 22:21:06,309 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'No current session data available...'
2025-09-16 22:21:06,310 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (56 chars)
2025-09-16 22:21:06,311 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 4 initial cell types
2025-09-16 22:21:06,311 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-16 22:21:06,312 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-16 22:21:06,313 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 22:21:06,314 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-16 22:21:06,314 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-16 22:21:06,314 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 4
2025-09-16 22:21:06,314 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-09-16 22:21:06,314 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Plot the violin plot for T cell with CD3D'
2025-09-16 22:21:09,644 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:21:11,513 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:21:11,513 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-09-16 22:21:11,514 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Epithelial cell', 'Stromal cell', 'Immune cell', 'Glial cell']
2025-09-16 22:21:11,544 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-09-16 22:21:11,559 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-09-16 22:21:11,559 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-09-16 22:21:11,559 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-09-16 22:21:11,559 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-09-16 22:21:11,559 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-09-16 22:21:11,559 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-09-16 22:21:11,559 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-09-16 22:21:11,559 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 0
2025-09-16 22:21:11,559 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-09-16 22:21:11,559 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-09-16 22:21:11,560 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-09-16 22:21:11,560 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 3 steps
2025-09-16 22:21:11,560 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 3 steps
2025-09-16 22:21:11,560 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-09-16 22:21:11,560 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-09-16 22:21:11,560 | INFO | scchatbot.workflow.nodes.planning |    • 1 analysis steps
2025-09-16 22:21:11,560 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-16 22:21:11,560 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-16 22:21:11,560 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 22:21:11,560 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 22:21:11,561 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-09-16 22:21:11,561 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-09-16 22:21:15,243 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:21:25,076 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:21:59,362 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:21:59,366 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-09-16 22:21:59,366 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-09-16 22:21:59,368 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['T cell', 'B cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Mast cell']
2025-09-16 22:21:59,398 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: T cell
2025-09-16 22:21:59,398 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: B cell
2025-09-16 22:21:59,398 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mononuclear phagocyte
2025-09-16 22:21:59,398 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Natural killer cell
2025-09-16 22:21:59,398 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mast cell
2025-09-16 22:21:59,399 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-09-16 22:21:59,400 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-09-16 22:21:59,400 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 22:21:59,400 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 22:21:59,400 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-09-16 22:21:59,400 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-09-16 22:21:59,400 | INFO | scchatbot.workflow.node_base |    Current message: Validating Immune cell -> ['T cell']...
2025-09-16 22:21:59,400 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'T cell'
2025-09-16 22:21:59,401 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-09-16 22:21:59,401 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Validation passed: All 1 expected cell types found successfully
2025-09-16 22:21:59,401 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: success
2025-09-16 22:21:59,401 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['T cell'], found=['T cell'], missing=[]
2025-09-16 22:21:59,401 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'success', 'message': 'All 1 expected cell types found successfully', 'found_children': ['T cell'], 'missing_children': [], 'available_types': ['T cell', 'B cell', 'Glial cell', 'Mononuclear phagocyte', 'Stromal cell', 'Mast cell', 'Natural killer cell', 'Epithelial cell']}
2025-09-16 22:21:59,401 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: []
2025-09-16 22:21:59,401 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 1 remaining steps...
2025-09-16 22:21:59,401 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3: display_violin_plot(cell_type='T cell')
2025-09-16 22:21:59,401 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3 cell type 'T cell' not in missing list []
2025-09-16 22:21:59,401 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 3
2025-09-16 22:21:59,401 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 22:21:59,401 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 22:21:59,402 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Create an interactive violin plot to show the distribution of CD3D gene expression across T cell clusters.
2025-09-16 22:21:59,402 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_violin_plot'
2025-09-16 22:21:59,402 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_violin_plot' with step parameters: {'cell_type': 'T cell', 'genes': ['CD3D']}
2025-09-16 22:21:59,402 | INFO | scchatbot.multi_agent_base | 🔍 VIZ ADATA WRAPPER DEBUG: display_violin_plot called with kwargs: {'cell_type': 'T cell', 'genes': ['CD3D']}
2025-09-16 22:21:59,836 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-16 22:21:59,836 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-16 22:21:59,836 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp68luww0s.
2025-09-16 22:21:59,837 | INFO | choreographer.browser_async | Opening browser.
2025-09-16 22:21:59,837 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmplozlvsif.
2025-09-16 22:21:59,837 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmplozlvsif
2025-09-16 22:22:00,354 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp68luww0s/index.html
2025-09-16 22:22:00,354 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-16 22:22:00,912 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-16 22:22:00,913 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-16 22:22:00,913 | INFO | kaleido.kaleido | Got 9D19
2025-09-16 22:22:00,913 | INFO | kaleido._kaleido_tab | Processing CD3D_Expression_in_T_cell_by_Leiden_Cluster.png
2025-09-16 22:22:00,913 | INFO | kaleido._kaleido_tab | Sending big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.png.
2025-09-16 22:22:00,980 | INFO | kaleido._kaleido_tab | Sent big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.png.
2025-09-16 22:22:00,982 | INFO | kaleido.kaleido | Reloading tab 9D19 before return.
2025-09-16 22:22:01,058 | INFO | kaleido.kaleido | Putting tab 9D19 back (queue size: 0).
2025-09-16 22:22:01,058 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-16 22:22:01,058 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-16 22:22:01,059 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:22:01,059 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:22:01,059 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 22:22:01,059 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 22:22:01,059 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 22:22:01,060 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:22:01,060 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:22:01,060 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 22:22:01,060 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 22:22:01,060 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 22:22:01,143 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:22:01,143 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:22:01,146 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-16 22:22:01,146 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-16 22:22:01,146 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpqf1y3xdd.
2025-09-16 22:22:01,146 | INFO | choreographer.browser_async | Opening browser.
2025-09-16 22:22:01,147 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp50kmbwum.
2025-09-16 22:22:01,147 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp50kmbwum
2025-09-16 22:22:01,552 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpqf1y3xdd/index.html
2025-09-16 22:22:01,552 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-16 22:22:02,222 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-16 22:22:02,224 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-16 22:22:02,224 | INFO | kaleido.kaleido | Got 15B3
2025-09-16 22:22:02,224 | INFO | kaleido._kaleido_tab | Processing CD3D_Expression_in_T_cell_by_Leiden_Cluster.pdf
2025-09-16 22:22:02,224 | INFO | kaleido._kaleido_tab | Sending big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.pdf.
2025-09-16 22:22:02,271 | INFO | kaleido._kaleido_tab | Sent big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.pdf.
2025-09-16 22:22:02,326 | INFO | kaleido.kaleido | Reloading tab 15B3 before return.
2025-09-16 22:22:02,403 | INFO | kaleido.kaleido | Putting tab 15B3 back (queue size: 0).
2025-09-16 22:22:02,403 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-16 22:22:02,403 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-16 22:22:02,403 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:22:02,403 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:22:02,403 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 22:22:02,403 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 22:22:02,403 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 22:22:02,404 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:22:02,404 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:22:02,404 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 22:22:02,404 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 22:22:02,404 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 22:22:02,493 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:22:02,493 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:22:02,507 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-09-16 22:22:02,508 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_violin_plot - HTML preserved
2025-09-16 22:22:02,508 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-09-16 22:22:02,508 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 22:22:02,508 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 22:22:02,509 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (3/3), running post-execution evaluation
2025-09-16 22:22:02,510 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 22:22:02,510 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 22:22:03,314 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:22:03,314 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:22:04,254 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:22:05,318 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:22:05,321 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 22:22:05,321 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 22:22:05,984 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:22:05,987 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 22:22:06,594 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:22:06,597 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-09-16 22:22:06,598 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['dea_split_by_condition']
2025-09-16 22:22:06,598 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 22:22:06,598 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 3 entries
2025-09-16 22:22:06,598 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_violin_plot (execution 3)
2025-09-16 22:22:06,598 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_violin_plot']
2025-09-16 22:22:06,598 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: dea_split_by_condition(T cell)
2025-09-16 22:22:06,598 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 1 missing steps for T cell
2025-09-16 22:22:06,598 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 1 total supplementary steps
2025-09-16 22:22:06,599 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 22:22:06,599 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 1 supplementary steps to execution plan (attempt 1/2)
2025-09-16 22:22:06,599 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-09-16 22:22:06,599 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 22:22:06,599 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 3
2025-09-16 22:22:06,599 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-09-16 22:22:06,599 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 22:22:06,599 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 1
2025-09-16 22:22:06,599 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 22:22:06,599 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 22:22:06,601 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 22:22:06,601 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 22:22:06,603 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Post-evaluation: dea_split_by_condition for T cell
2025-09-16 22:22:06,604 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'dea_split_by_condition'
2025-09-16 22:22:16,168 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-09-16 22:22:16,169 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: dea_split_by_condition - Full data preserved
2025-09-16 22:22:16,169 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-09-16 22:22:16,169 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 22:22:16,169 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 22:22:16,170 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-16 22:22:16,170 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 22:22:16,170 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 22:22:18,078 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:22:18,797 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:22:18,803 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 22:22:18,803 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 22:22:19,590 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:22:19,595 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 22:22:20,290 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:22:20,294 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-09-16 22:22:20,294 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['dea_split_by_condition']
2025-09-16 22:22:20,295 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 22:22:20,295 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-16 22:22:20,295 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_violin_plot (execution 3)
2025-09-16 22:22:20,295 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: dea_split_by_condition (execution 4)
2025-09-16 22:22:20,295 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_violin_plot', 'dea_split_by_condition']
2025-09-16 22:22:20,295 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-16 22:22:20,295 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-16 22:22:20,295 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 22:22:20,295 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 22:22:20,295 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-16 22:22:20,295 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-16 22:22:20,295 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 22:22:20,296 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-16 22:22:20,296 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 22:22:20,296 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 22:22:20,297 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-16 22:22:20,297 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 22:22:20,297 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 22:22:22,200 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:22:22,819 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:22:22,823 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 22:22:22,823 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 22:22:23,478 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:22:23,481 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 22:22:24,729 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:22:24,731 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-09-16 22:22:24,731 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['dea_split_by_condition']
2025-09-16 22:22:24,731 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 22:22:24,731 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-16 22:22:24,732 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_violin_plot (execution 3)
2025-09-16 22:22:24,732 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: dea_split_by_condition (execution 4)
2025-09-16 22:22:24,732 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_violin_plot', 'dea_split_by_condition']
2025-09-16 22:22:24,732 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-16 22:22:24,732 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-16 22:22:24,732 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 22:22:24,732 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 22:22:24,732 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-16 22:22:24,732 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-16 22:22:24,732 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 22:22:24,732 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-16 22:22:24,733 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 22:22:24,733 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 22:22:24,733 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-16 22:22:24,734 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-16 22:22:24,734 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 4 execution steps
2025-09-16 22:22:24,734 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-09-16 22:22:24,734 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-09-16 22:22:24,734 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-09-16 22:22:24,734 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-09-16 22:22:24,735 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: display_violin_plot for T cell
2025-09-16 22:22:24,735 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 3 function: display_violin_plot
2025-09-16 22:22:24,735 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell', 'genes': ['CD3D']}
2025-09-16 22:22:24,735 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_violin_plot with VisualizationResultAccessor
2025-09-16 22:22:24,735 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: dea_split_by_condition for T cell
2025-09-16 22:22:24,736 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling dea_split_by_condition with DEAResultAccessor
2025-09-16 22:22:24,736 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 DEA: Loaded 4 conditions from mapping file: ['basal laminar drusen', 'cataract', 'bulk', 'age related macular degeneration']
2025-09-16 22:22:24,738 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for basal laminar drusen: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 22:22:24,743 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for cataract: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 22:22:24,745 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for bulk: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 22:22:24,746 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for age related macular degeneration: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 22:22:24,747 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 4 successful steps
2025-09-16 22:22:24,748 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 16915 characters for synthesis
2025-09-16 22:22:24,748 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-16 22:22:24,748 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-16 22:22:24,748 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (56 chars)
2025-09-16 22:22:24,748 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-16 22:22:24,748 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-16 22:22:24,748 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-16 22:22:28,111 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:22:28,111 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 4 execution steps
2025-09-16 22:22:28,112 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: process_cells, success=True, has_result=True
2025-09-16 22:22:28,112 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: validate_processing_results, success=True, has_result=True
2025-09-16 22:22:28,112 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: display_violin_plot, success=True, has_result=True
2025-09-16 22:22:28,112 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added plot plot_1: Violin Plot - T cell (18430 chars)
2025-09-16 22:22:28,112 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: dea_split_by_condition, success=True, has_result=True
2025-09-16 22:22:28,112 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 1 individual plots (total: 18,430 chars)
2025-09-16 22:22:28,112 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 1 plots, total size: 18,430 bytes
2025-09-16 22:22:28,112 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 1 individual plots
2025-09-16 22:22:28,112 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 1 plots + 1 text (plots first)
2025-09-16 22:22:28,112 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 2 total messages (plots first, then text)
2025-09-16 22:22:28,113 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (450 chars)
2025-09-16 22:22:28,195 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-16 22:22:28,195 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-16 22:33:29,628 | INFO | django.utils.autoreload | /Users/seanchiu/Desktop/scchat_fin/scChat/scchatbot/analysis/visualizations.py changed, reloading.
2025-09-16 22:33:30,358 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:33:30,359 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:33:32,231 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-16 22:34:42,156 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-16 22:34:47,064 | INFO | faiss.loader | Loading faiss.
2025-09-16 22:34:47,091 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-16 22:34:47,961 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-16 22:34:50,355 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-16 22:34:50,432 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-16 22:34:50,433 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-16 22:34:50,440 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-16 22:34:51,328 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-16 22:34:51,328 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-16 22:34:51,331 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-16 22:35:08,431 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:35:34,244 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:38:41,158 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:38:42,146 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-09-16 22:38:42,146 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-09-16 22:38:42,146 | INFO | scchatbot.multi_agent_base | 1
2025-09-16 22:38:42,580 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-09-16 22:38:42,581 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-16 22:38:44,432 | INFO | scchatbot.multi_agent_base | 2
2025-09-16 22:38:44,434 | INFO | scchatbot.multi_agent_base | 3
2025-09-16 22:38:44,434 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-09-16 22:40:32,308 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-16 22:40:35,521 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-16 22:40:38,127 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'b05944ce'
2025-09-16 22:40:38,128 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-16 22:40:38,128 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 22:40:38,529 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-16 22:40:39,431 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:40:39,440 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-16 22:40:39,441 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-16 22:40:39,441 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-16 22:40:39,441 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 0 cell types: []
2025-09-16 22:40:39,442 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 33 chars, starts with: 'No current session data available...'
2025-09-16 22:40:39,442 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (33 chars)
2025-09-16 22:40:39,442 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'No current session data available...'
2025-09-16 22:40:39,442 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (56 chars)
2025-09-16 22:40:39,442 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 4 initial cell types
2025-09-16 22:40:39,443 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-16 22:40:39,446 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-16 22:40:39,446 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 22:40:39,446 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-16 22:40:39,446 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-16 22:40:39,446 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 4
2025-09-16 22:40:39,446 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-09-16 22:40:39,446 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Plot the violin plot for T cell with CD3D'
2025-09-16 22:40:49,590 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:40:52,380 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:40:52,393 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-09-16 22:40:52,399 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Epithelial cell', 'Stromal cell', 'Immune cell', 'Glial cell']
2025-09-16 22:40:52,440 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-09-16 22:40:52,459 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-09-16 22:40:52,460 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-09-16 22:40:52,460 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-09-16 22:40:52,460 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-09-16 22:40:52,460 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-09-16 22:40:52,460 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-09-16 22:40:52,460 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-09-16 22:40:52,460 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 0
2025-09-16 22:40:52,460 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-09-16 22:40:52,460 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-09-16 22:40:52,460 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-09-16 22:40:52,460 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 3 steps
2025-09-16 22:40:52,460 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 3 steps
2025-09-16 22:40:52,460 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-09-16 22:40:52,460 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-09-16 22:40:52,460 | INFO | scchatbot.workflow.nodes.planning |    • 1 analysis steps
2025-09-16 22:40:52,461 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-16 22:40:52,461 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-16 22:40:52,461 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 22:40:52,462 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 22:40:52,463 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-09-16 22:40:52,463 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-09-16 22:40:56,135 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:41:13,588 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:41:54,776 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:41:54,779 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-09-16 22:41:54,780 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-09-16 22:41:54,780 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['T cell', 'B cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Mast cell']
2025-09-16 22:41:54,808 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: T cell
2025-09-16 22:41:54,808 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: B cell
2025-09-16 22:41:54,808 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mononuclear phagocyte
2025-09-16 22:41:54,808 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Natural killer cell
2025-09-16 22:41:54,808 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mast cell
2025-09-16 22:41:54,810 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-09-16 22:41:54,810 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-09-16 22:41:54,810 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 22:41:54,811 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 22:41:54,811 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-09-16 22:41:54,811 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-09-16 22:41:54,811 | INFO | scchatbot.workflow.node_base |    Current message: Validating Immune cell -> ['T cell']...
2025-09-16 22:41:54,812 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'T cell'
2025-09-16 22:41:54,812 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-09-16 22:41:54,812 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Validation passed: All 1 expected cell types found successfully
2025-09-16 22:41:54,812 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: success
2025-09-16 22:41:54,812 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['T cell'], found=['T cell'], missing=[]
2025-09-16 22:41:54,812 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'success', 'message': 'All 1 expected cell types found successfully', 'found_children': ['T cell'], 'missing_children': [], 'available_types': ['B cell', 'Mast cell', 'Mononuclear phagocyte', 'Natural killer cell', 'T cell', 'Glial cell', 'Stromal cell', 'Epithelial cell']}
2025-09-16 22:41:54,812 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: []
2025-09-16 22:41:54,812 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 1 remaining steps...
2025-09-16 22:41:54,812 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3: display_violin_plot(cell_type='T cell')
2025-09-16 22:41:54,812 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3 cell type 'T cell' not in missing list []
2025-09-16 22:41:54,812 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 3
2025-09-16 22:41:54,813 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 22:41:54,813 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 22:41:54,814 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Create an interactive violin plot to show the distribution of CD3D gene expression across leiden clusters for T cells.
2025-09-16 22:41:54,814 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_violin_plot'
2025-09-16 22:41:54,814 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_violin_plot' with step parameters: {'cell_type': 'T cell', 'genes': ['CD3D']}
2025-09-16 22:41:54,814 | INFO | scchatbot.multi_agent_base | 🔍 VIZ ADATA WRAPPER DEBUG: display_violin_plot called with kwargs: {'cell_type': 'T cell', 'genes': ['CD3D']}
2025-09-16 22:41:55,348 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-16 22:41:55,350 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-16 22:41:55,350 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp7n6gqyhq.
2025-09-16 22:41:55,351 | INFO | choreographer.browser_async | Opening browser.
2025-09-16 22:41:55,351 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmptql91wd7.
2025-09-16 22:41:55,351 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmptql91wd7
2025-09-16 22:41:55,893 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp7n6gqyhq/index.html
2025-09-16 22:41:55,895 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-16 22:41:56,429 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-16 22:41:56,430 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-16 22:41:56,430 | INFO | kaleido.kaleido | Got 3828
2025-09-16 22:41:56,430 | INFO | kaleido._kaleido_tab | Processing CD3D_Expression_in_T_cell_by_Leiden_Cluster.png
2025-09-16 22:41:56,430 | INFO | kaleido._kaleido_tab | Sending big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.png.
2025-09-16 22:41:56,500 | INFO | kaleido._kaleido_tab | Sent big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.png.
2025-09-16 22:41:56,502 | INFO | kaleido.kaleido | Reloading tab 3828 before return.
2025-09-16 22:41:56,584 | INFO | kaleido.kaleido | Putting tab 3828 back (queue size: 0).
2025-09-16 22:41:56,584 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-16 22:41:56,584 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-16 22:41:56,584 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:41:56,585 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:41:56,585 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 22:41:56,585 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 22:41:56,585 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 22:41:56,586 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:41:56,586 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:41:56,586 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 22:41:56,586 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 22:41:56,587 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 22:41:56,682 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:41:56,683 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:41:56,686 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-16 22:41:56,688 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-16 22:41:56,689 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmplec8xx90.
2025-09-16 22:41:56,689 | INFO | choreographer.browser_async | Opening browser.
2025-09-16 22:41:56,690 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpid39rdtr.
2025-09-16 22:41:56,690 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpid39rdtr
2025-09-16 22:41:57,096 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmplec8xx90/index.html
2025-09-16 22:41:57,096 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-16 22:41:57,899 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-16 22:41:57,899 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-16 22:41:57,899 | INFO | kaleido.kaleido | Got CD8D
2025-09-16 22:41:57,899 | INFO | kaleido._kaleido_tab | Processing CD3D_Expression_in_T_cell_by_Leiden_Cluster.pdf
2025-09-16 22:41:57,900 | INFO | kaleido._kaleido_tab | Sending big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.pdf.
2025-09-16 22:41:57,944 | INFO | kaleido._kaleido_tab | Sent big command for CD3D_Expression_in_T_cell_by_Leiden_Cluster.pdf.
2025-09-16 22:41:57,996 | INFO | kaleido.kaleido | Reloading tab CD8D before return.
2025-09-16 22:41:58,072 | INFO | kaleido.kaleido | Putting tab CD8D back (queue size: 0).
2025-09-16 22:41:58,072 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-16 22:41:58,072 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-16 22:41:58,073 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:41:58,073 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:41:58,073 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 22:41:58,073 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 22:41:58,073 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 22:41:58,074 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:41:58,074 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:41:58,074 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 22:41:58,074 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 22:41:58,074 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 22:41:58,166 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 22:41:58,166 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 22:41:58,181 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-09-16 22:41:58,182 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_violin_plot - HTML preserved
2025-09-16 22:41:58,182 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-09-16 22:41:58,182 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 22:41:58,182 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 22:41:58,183 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (3/3), running post-execution evaluation
2025-09-16 22:41:58,183 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 22:41:58,183 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 22:42:00,509 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:42:01,492 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:42:01,499 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 22:42:01,499 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 22:42:02,478 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:42:02,489 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 22:42:03,212 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:42:03,214 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-09-16 22:42:03,214 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['dea_split_by_condition']
2025-09-16 22:42:03,214 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 22:42:03,214 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 3 entries
2025-09-16 22:42:03,214 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_violin_plot (execution 3)
2025-09-16 22:42:03,214 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_violin_plot']
2025-09-16 22:42:03,215 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: dea_split_by_condition(T cell)
2025-09-16 22:42:03,215 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 1 missing steps for T cell
2025-09-16 22:42:03,215 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 1 total supplementary steps
2025-09-16 22:42:03,215 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 22:42:03,215 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 1 supplementary steps to execution plan (attempt 1/2)
2025-09-16 22:42:03,215 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-09-16 22:42:03,215 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 22:42:03,215 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 3
2025-09-16 22:42:03,216 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-09-16 22:42:03,216 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 22:42:03,216 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 1
2025-09-16 22:42:03,216 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 22:42:03,216 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 22:42:03,217 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 22:42:03,217 | INFO | scchatbot.workflow.node_base |    Current message: Plot the violin plot for T cell with CD3D...
2025-09-16 22:42:03,218 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Post-evaluation: dea_split_by_condition for T cell
2025-09-16 22:42:03,218 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'dea_split_by_condition'
2025-09-16 22:42:13,250 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-09-16 22:42:13,253 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: dea_split_by_condition - Full data preserved
2025-09-16 22:42:13,253 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-09-16 22:42:13,253 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 22:42:13,253 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 22:42:13,253 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-16 22:42:13,253 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 22:42:13,253 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 22:42:15,380 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:42:15,984 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:42:16,001 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 22:42:16,001 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 22:42:16,591 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:42:16,593 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 22:42:17,289 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:42:17,300 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-09-16 22:42:17,300 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['dea_split_by_condition']
2025-09-16 22:42:17,300 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 22:42:17,300 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-16 22:42:17,300 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_violin_plot (execution 3)
2025-09-16 22:42:17,301 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: dea_split_by_condition (execution 4)
2025-09-16 22:42:17,301 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_violin_plot', 'dea_split_by_condition']
2025-09-16 22:42:17,301 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-16 22:42:17,301 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-16 22:42:17,301 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 22:42:17,301 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 22:42:17,301 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-16 22:42:17,302 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-16 22:42:17,302 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 22:42:17,302 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-16 22:42:17,302 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 22:42:17,302 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 22:42:17,303 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-16 22:42:17,303 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 22:42:17,303 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 22:42:19,145 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:42:19,932 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:42:19,935 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 22:42:19,936 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 22:42:20,902 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:42:20,907 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 22:42:22,173 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:42:22,182 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["dea_split_by_condition"]
```' (length: 38)
2025-09-16 22:42:22,182 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['dea_split_by_condition']
2025-09-16 22:42:22,183 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 22:42:22,183 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-16 22:42:22,183 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_violin_plot (execution 3)
2025-09-16 22:42:22,183 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: dea_split_by_condition (execution 4)
2025-09-16 22:42:22,183 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_violin_plot', 'dea_split_by_condition']
2025-09-16 22:42:22,183 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-16 22:42:22,184 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-16 22:42:22,184 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 22:42:22,184 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 22:42:22,184 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-16 22:42:22,185 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-16 22:42:22,185 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 22:42:22,185 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-16 22:42:22,185 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 22:42:22,186 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 22:42:22,186 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-16 22:42:22,187 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-16 22:42:22,188 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 4 execution steps
2025-09-16 22:42:22,188 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-09-16 22:42:22,189 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-09-16 22:42:22,189 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-09-16 22:42:22,189 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-09-16 22:42:22,189 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: display_violin_plot for T cell
2025-09-16 22:42:22,189 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 3 function: display_violin_plot
2025-09-16 22:42:22,189 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell', 'genes': ['CD3D']}
2025-09-16 22:42:22,190 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_violin_plot with VisualizationResultAccessor
2025-09-16 22:42:22,190 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: dea_split_by_condition for T cell
2025-09-16 22:42:22,190 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling dea_split_by_condition with DEAResultAccessor
2025-09-16 22:42:22,190 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 DEA: Loaded 4 conditions from mapping file: ['age related macular degeneration', 'cataract', 'basal laminar drusen', 'bulk']
2025-09-16 22:42:22,192 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for age related macular degeneration: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 22:42:22,197 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for cataract: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 22:42:22,202 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for basal laminar drusen: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 22:42:22,206 | INFO | scchatbot.workflow.unified_result_accessor | 📊 DEA CSV columns for bulk: ['names', 'scores', 'logfoldchanges', 'pvals', 'pvals_adj', 'direction']
2025-09-16 22:42:22,208 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 4 successful steps
2025-09-16 22:42:22,209 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 16915 characters for synthesis
2025-09-16 22:42:22,209 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-16 22:42:22,209 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-16 22:42:22,209 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (56 chars)
2025-09-16 22:42:22,209 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-16 22:42:22,209 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-16 22:42:22,209 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-16 22:42:26,855 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 22:42:26,856 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 4 execution steps
2025-09-16 22:42:26,856 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: process_cells, success=True, has_result=True
2025-09-16 22:42:26,856 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: validate_processing_results, success=True, has_result=True
2025-09-16 22:42:26,857 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: display_violin_plot, success=True, has_result=True
2025-09-16 22:42:26,857 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added plot plot_1: Violin Plot - T cell (17025 chars)
2025-09-16 22:42:26,857 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: dea_split_by_condition, success=True, has_result=True
2025-09-16 22:42:26,857 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 1 individual plots (total: 17,025 chars)
2025-09-16 22:42:26,857 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 1 plots, total size: 17,025 bytes
2025-09-16 22:42:26,858 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 1 individual plots
2025-09-16 22:42:26,858 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 1 plots + 1 text (plots first)
2025-09-16 22:42:26,858 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 2 total messages (plots first, then text)
2025-09-16 22:42:26,858 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (589 chars)
2025-09-16 22:42:26,941 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-16 22:42:26,941 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-16 23:39:40,262 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-16 23:39:45,322 | INFO | faiss.loader | Loading faiss.
2025-09-16 23:39:45,349 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-16 23:39:46,205 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-16 23:39:47,991 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-16 23:39:48,077 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-16 23:39:48,077 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-16 23:39:48,085 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-16 23:39:49,032 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-16 23:39:49,032 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-16 23:39:49,034 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-16 23:40:05,381 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:40:24,542 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:43:21,244 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:43:22,090 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-09-16 23:43:22,091 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-09-16 23:43:22,091 | INFO | scchatbot.multi_agent_base | 1
2025-09-16 23:43:22,584 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-09-16 23:43:22,584 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-16 23:43:24,163 | INFO | scchatbot.multi_agent_base | 2
2025-09-16 23:43:24,165 | INFO | scchatbot.multi_agent_base | 3
2025-09-16 23:43:24,165 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-09-16 23:45:34,867 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-16 23:45:37,892 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-16 23:45:40,905 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-16 23:45:43,972 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'b05944ce'
2025-09-16 23:45:43,978 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-16 23:45:43,979 | INFO | scchatbot.workflow.node_base |    Current message: Plot the UMAP with T cell on it....
2025-09-16 23:45:44,810 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:45:44,814 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-16 23:45:44,814 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-16 23:45:44,815 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-16 23:45:44,815 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 0 cell types: []
2025-09-16 23:45:44,815 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 33 chars, starts with: 'No current session data available...'
2025-09-16 23:45:44,815 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (33 chars)
2025-09-16 23:45:44,815 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'No current session data available...'
2025-09-16 23:45:44,815 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (56 chars)
2025-09-16 23:45:44,815 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 4 initial cell types
2025-09-16 23:45:44,815 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-16 23:45:44,817 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-16 23:45:44,817 | INFO | scchatbot.workflow.node_base |    Current message: Plot the UMAP with T cell on it....
2025-09-16 23:45:44,817 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-16 23:45:44,821 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-16 23:45:44,821 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 4
2025-09-16 23:45:44,822 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-09-16 23:45:44,822 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Plot the UMAP with T cell on it.'
2025-09-16 23:45:53,157 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:45:55,302 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:45:55,309 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-09-16 23:45:55,309 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Epithelial cell', 'Stromal cell', 'Glial cell', 'Immune cell']
2025-09-16 23:45:55,341 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-09-16 23:45:55,360 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-09-16 23:45:55,360 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-09-16 23:45:55,360 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-09-16 23:45:55,360 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-09-16 23:45:55,360 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-09-16 23:45:55,360 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-09-16 23:45:55,360 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-09-16 23:45:55,360 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 0
2025-09-16 23:45:55,361 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-09-16 23:45:55,361 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-09-16 23:45:55,361 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-09-16 23:45:55,361 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 3 steps
2025-09-16 23:45:55,361 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 3 steps
2025-09-16 23:45:55,361 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-09-16 23:45:55,361 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-09-16 23:45:55,361 | INFO | scchatbot.workflow.nodes.planning |    • 1 analysis steps
2025-09-16 23:45:55,361 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-16 23:45:55,361 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-16 23:45:55,361 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 23:45:55,361 | INFO | scchatbot.workflow.node_base |    Current message: Plot the UMAP with T cell on it....
2025-09-16 23:45:55,362 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-09-16 23:45:55,362 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-09-16 23:46:03,379 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:46:15,376 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:46:59,393 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:46:59,395 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-09-16 23:46:59,395 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-09-16 23:46:59,396 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['T cell', 'B cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Mast cell']
2025-09-16 23:46:59,416 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: T cell
2025-09-16 23:46:59,416 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: B cell
2025-09-16 23:46:59,416 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mononuclear phagocyte
2025-09-16 23:46:59,416 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Natural killer cell
2025-09-16 23:46:59,416 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mast cell
2025-09-16 23:46:59,417 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-09-16 23:46:59,417 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-09-16 23:46:59,418 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 23:46:59,418 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 23:46:59,418 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-09-16 23:46:59,418 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-09-16 23:46:59,418 | INFO | scchatbot.workflow.node_base |    Current message: Validating Immune cell -> ['T cell']...
2025-09-16 23:46:59,418 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'T cell'
2025-09-16 23:46:59,418 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-09-16 23:46:59,418 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Validation passed: All 1 expected cell types found successfully
2025-09-16 23:46:59,418 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: success
2025-09-16 23:46:59,418 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['T cell'], found=['T cell'], missing=[]
2025-09-16 23:46:59,419 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'success', 'message': 'All 1 expected cell types found successfully', 'found_children': ['T cell'], 'missing_children': [], 'available_types': ['Mast cell', 'Stromal cell', 'Epithelial cell', 'Glial cell', 'Natural killer cell', 'B cell', 'Mononuclear phagocyte', 'T cell']}
2025-09-16 23:46:59,419 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: []
2025-09-16 23:46:59,419 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 1 remaining steps...
2025-09-16 23:46:59,419 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3: display_processed_umap(params={})
2025-09-16 23:46:59,419 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3 cell type 'None' not in missing list []
2025-09-16 23:46:59,419 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 3
2025-09-16 23:46:59,419 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 23:46:59,419 | INFO | scchatbot.workflow.node_base |    Current message: Plot the UMAP with T cell on it....
2025-09-16 23:46:59,419 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Display the UMAP visualization with annotated cell types.
2025-09-16 23:46:59,420 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_processed_umap'
2025-09-16 23:46:59,420 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_processed_umap' with step parameters: {}
2025-09-16 23:46:59,420 | INFO | scchatbot.workflow.nodes.execution | ✅ Found cell type for display_processed_umap: Immune cell
2025-09-16 23:46:59,420 | INFO | scchatbot.workflow.nodes.execution | 📝 Updating step parameters with enhanced params for execution history tracking
2025-09-16 23:46:59,420 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_processed_umap called with kwargs: {'cell_type': 'Immune cell'}
2025-09-16 23:46:59,933 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-16 23:46:59,936 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-16 23:46:59,936 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmprz9cww70.
2025-09-16 23:46:59,936 | INFO | choreographer.browser_async | Opening browser.
2025-09-16 23:46:59,937 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp0x9uo0xq.
2025-09-16 23:46:59,938 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp0x9uo0xq
2025-09-16 23:47:00,503 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmprz9cww70/index.html
2025-09-16 23:47:00,503 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-16 23:47:01,079 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-16 23:47:01,080 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-16 23:47:01,080 | INFO | kaleido.kaleido | Got 7FD3
2025-09-16 23:47:01,080 | INFO | kaleido._kaleido_tab | Processing Immune_cell_Subtypes_UMAP_Plot.png
2025-09-16 23:47:01,080 | INFO | kaleido._kaleido_tab | Sending big command for Immune_cell_Subtypes_UMAP_Plot.png.
2025-09-16 23:47:01,181 | INFO | kaleido._kaleido_tab | Sent big command for Immune_cell_Subtypes_UMAP_Plot.png.
2025-09-16 23:47:01,183 | INFO | kaleido.kaleido | Reloading tab 7FD3 before return.
2025-09-16 23:47:01,276 | INFO | kaleido.kaleido | Putting tab 7FD3 back (queue size: 0).
2025-09-16 23:47:01,276 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-16 23:47:01,276 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-16 23:47:01,277 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 23:47:01,277 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 23:47:01,277 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 23:47:01,277 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 23:47:01,277 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 23:47:01,278 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 23:47:01,279 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 23:47:01,279 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 23:47:01,279 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 23:47:01,279 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 23:47:01,374 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 23:47:01,374 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 23:47:01,377 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-16 23:47:01,378 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-16 23:47:01,379 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmphajm6256.
2025-09-16 23:47:01,379 | INFO | choreographer.browser_async | Opening browser.
2025-09-16 23:47:01,380 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpl0c0v1c_.
2025-09-16 23:47:01,380 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpl0c0v1c_
2025-09-16 23:47:01,789 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmphajm6256/index.html
2025-09-16 23:47:01,792 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-16 23:47:02,330 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-16 23:47:02,330 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-16 23:47:02,330 | INFO | kaleido.kaleido | Got 331F
2025-09-16 23:47:02,330 | INFO | kaleido._kaleido_tab | Processing Immune_cell_Subtypes_UMAP_Plot.pdf
2025-09-16 23:47:02,330 | INFO | kaleido._kaleido_tab | Sending big command for Immune_cell_Subtypes_UMAP_Plot.pdf.
2025-09-16 23:47:02,403 | INFO | kaleido._kaleido_tab | Sent big command for Immune_cell_Subtypes_UMAP_Plot.pdf.
2025-09-16 23:47:02,458 | INFO | kaleido.kaleido | Reloading tab 331F before return.
2025-09-16 23:47:02,533 | INFO | kaleido.kaleido | Putting tab 331F back (queue size: 0).
2025-09-16 23:47:02,533 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-16 23:47:02,534 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-16 23:47:02,534 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 23:47:02,534 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 23:47:02,534 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 23:47:02,534 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 23:47:02,534 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 23:47:02,535 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 23:47:02,535 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 23:47:02,535 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 23:47:02,535 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 23:47:02,535 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 23:47:02,624 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 23:47:02,624 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 23:47:02,635 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-09-16 23:47:02,636 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_processed_umap - HTML preserved
2025-09-16 23:47:02,636 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-09-16 23:47:02,636 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 23:47:02,637 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 23:47:02,637 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (3/3), running post-execution evaluation
2025-09-16 23:47:02,637 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 23:47:02,637 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 23:47:04,183 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:47:04,969 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:47:04,970 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-16 23:47:04,971 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 23:47:06,118 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:47:06,129 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-16 23:47:06,880 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:47:06,970 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-09-16 23:47:06,970 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-09-16 23:47:06,970 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 23:47:06,971 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 3 entries
2025-09-16 23:47:06,971 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: []
2025-09-16 23:47:06,971 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 No direct matches found for T cell, checking for related executions...
2025-09-16 23:47:06,971 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: display_processed_umap(T cell)
2025-09-16 23:47:06,971 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 1 missing steps for T cell
2025-09-16 23:47:06,971 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 1 total supplementary steps
2025-09-16 23:47:06,971 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-09-16 23:47:06,971 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 1 supplementary steps to execution plan (attempt 1/2)
2025-09-16 23:47:06,971 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-09-16 23:47:06,971 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 23:47:06,972 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 3
2025-09-16 23:47:06,972 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-09-16 23:47:06,972 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 23:47:06,972 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 1
2025-09-16 23:47:06,972 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 23:47:06,972 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 23:47:06,972 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-16 23:47:06,973 | INFO | scchatbot.workflow.node_base |    Current message: Plot the UMAP with T cell on it....
2025-09-16 23:47:06,973 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Post-evaluation: display_processed_umap for T cell
2025-09-16 23:47:06,974 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_processed_umap'
2025-09-16 23:47:06,974 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_processed_umap' with step parameters: {'cell_type': 'T cell'}
2025-09-16 23:47:06,974 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_processed_umap called with kwargs: {'cell_type': 'T cell'}
2025-09-16 23:47:07,011 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-16 23:47:07,013 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-16 23:47:07,013 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp8b4odc5p.
2025-09-16 23:47:07,014 | INFO | choreographer.browser_async | Opening browser.
2025-09-16 23:47:07,014 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpro34se16.
2025-09-16 23:47:07,014 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpro34se16
2025-09-16 23:47:07,433 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp8b4odc5p/index.html
2025-09-16 23:47:07,437 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-16 23:47:07,956 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-16 23:47:07,957 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-16 23:47:07,957 | INFO | kaleido.kaleido | Got AACE
2025-09-16 23:47:07,957 | INFO | kaleido._kaleido_tab | Processing T_cell_from_parent_cell_type_UMAP_Plot.png
2025-09-16 23:47:07,957 | INFO | kaleido._kaleido_tab | Sending big command for T_cell_from_parent_cell_type_UMAP_Plot.png.
2025-09-16 23:47:08,051 | INFO | kaleido._kaleido_tab | Sent big command for T_cell_from_parent_cell_type_UMAP_Plot.png.
2025-09-16 23:47:08,053 | INFO | kaleido.kaleido | Reloading tab AACE before return.
2025-09-16 23:47:08,128 | INFO | kaleido.kaleido | Putting tab AACE back (queue size: 0).
2025-09-16 23:47:08,129 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-16 23:47:08,129 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-16 23:47:08,129 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 23:47:08,129 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 23:47:08,129 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 23:47:08,129 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 23:47:08,129 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 23:47:08,130 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 23:47:08,130 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 23:47:08,130 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 23:47:08,130 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 23:47:08,130 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 23:47:08,217 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 23:47:08,218 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 23:47:08,220 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-16 23:47:08,220 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-16 23:47:08,221 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp03wh09mp.
2025-09-16 23:47:08,221 | INFO | choreographer.browser_async | Opening browser.
2025-09-16 23:47:08,221 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp_cob6f2h.
2025-09-16 23:47:08,221 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp_cob6f2h
2025-09-16 23:47:08,646 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp03wh09mp/index.html
2025-09-16 23:47:08,647 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-16 23:47:09,222 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-16 23:47:09,222 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-16 23:47:09,222 | INFO | kaleido.kaleido | Got FDE5
2025-09-16 23:47:09,222 | INFO | kaleido._kaleido_tab | Processing T_cell_from_parent_cell_type_UMAP_Plot.pdf
2025-09-16 23:47:09,222 | INFO | kaleido._kaleido_tab | Sending big command for T_cell_from_parent_cell_type_UMAP_Plot.pdf.
2025-09-16 23:47:09,291 | INFO | kaleido._kaleido_tab | Sent big command for T_cell_from_parent_cell_type_UMAP_Plot.pdf.
2025-09-16 23:47:09,348 | INFO | kaleido.kaleido | Reloading tab FDE5 before return.
2025-09-16 23:47:09,427 | INFO | kaleido.kaleido | Putting tab FDE5 back (queue size: 0).
2025-09-16 23:47:09,427 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-16 23:47:09,427 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-16 23:47:09,427 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 23:47:09,427 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 23:47:09,427 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 23:47:09,427 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 23:47:09,427 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 23:47:09,428 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 23:47:09,429 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 23:47:09,429 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-16 23:47:09,429 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-16 23:47:09,429 | INFO | choreographer.browser_async | Closing browser.
2025-09-16 23:47:09,515 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 23:47:09,515 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 23:47:09,524 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-09-16 23:47:09,526 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_processed_umap - HTML preserved
2025-09-16 23:47:09,526 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-09-16 23:47:09,526 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-16 23:47:09,526 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-16 23:47:09,527 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-16 23:47:09,527 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 23:47:09,527 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 23:47:09,531 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 23:47:09,531 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 23:47:09,531 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-16 23:47:09,531 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-16 23:47:11,552 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:47:12,242 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:47:12,244 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-16 23:47:12,244 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 23:47:12,881 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:47:12,882 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-16 23:47:13,596 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:47:13,626 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-09-16 23:47:13,626 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-09-16 23:47:13,626 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 23:47:13,626 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-16 23:47:13,626 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 4)
2025-09-16 23:47:13,626 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_processed_umap']
2025-09-16 23:47:13,626 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-16 23:47:13,627 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-16 23:47:13,627 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-09-16 23:47:13,627 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 23:47:13,627 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-16 23:47:13,627 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-16 23:47:13,627 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 23:47:13,627 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-16 23:47:13,627 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 23:47:13,627 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 23:47:13,628 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-16 23:47:13,628 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-16 23:47:13,628 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-16 23:47:14,837 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:47:15,439 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:47:15,455 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: gene_markers
2025-09-16 23:47:15,455 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-16 23:47:17,127 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:47:17,128 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-16 23:47:18,185 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:47:18,186 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-09-16 23:47:18,186 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-09-16 23:47:18,186 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-16 23:47:18,186 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-16 23:47:18,186 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 4)
2025-09-16 23:47:18,186 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_processed_umap']
2025-09-16 23:47:18,186 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-16 23:47:18,186 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-16 23:47:18,187 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for gene_markers question
2025-09-16 23:47:18,187 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-16 23:47:18,187 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-16 23:47:18,187 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-16 23:47:18,187 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-16 23:47:18,187 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-16 23:47:18,187 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-16 23:47:18,187 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-16 23:47:18,187 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-16 23:47:18,187 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-16 23:47:18,188 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 4 execution steps
2025-09-16 23:47:18,188 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-09-16 23:47:18,188 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-09-16 23:47:18,188 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-09-16 23:47:18,188 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-09-16 23:47:18,188 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: display_processed_umap for step_2
2025-09-16 23:47:18,188 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 3 function: display_processed_umap
2025-09-16 23:47:18,188 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {}
2025-09-16 23:47:18,188 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_processed_umap with VisualizationResultAccessor
2025-09-16 23:47:18,188 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: display_processed_umap for T cell
2025-09-16 23:47:18,188 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 4 function: display_processed_umap
2025-09-16 23:47:18,188 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell'}
2025-09-16 23:47:18,188 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_processed_umap with VisualizationResultAccessor
2025-09-16 23:47:18,188 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 4 successful steps
2025-09-16 23:47:18,188 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 520 characters for synthesis
2025-09-16 23:47:18,188 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-16 23:47:18,189 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-16 23:47:18,189 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (56 chars)
2025-09-16 23:47:18,189 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-16 23:47:18,189 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-16 23:47:18,189 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-16 23:47:20,586 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-16 23:47:20,587 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 4 execution steps
2025-09-16 23:47:20,587 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: process_cells, success=True, has_result=True
2025-09-16 23:47:20,587 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: validate_processing_results, success=True, has_result=True
2025-09-16 23:47:20,587 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: display_processed_umap, success=True, has_result=True
2025-09-16 23:47:20,587 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added plot plot_1: Annotated UMAP (33026 chars)
2025-09-16 23:47:20,587 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: display_processed_umap, success=True, has_result=True
2025-09-16 23:47:20,587 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Skipping display_processed_umap - duplicate plot detected
2025-09-16 23:47:20,587 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 1 individual plots (total: 33,026 chars)
2025-09-16 23:47:20,587 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 1 plots, total size: 33,026 bytes
2025-09-16 23:47:20,587 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 1 individual plots
2025-09-16 23:47:20,587 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 1 plots + 1 text (plots first)
2025-09-16 23:47:20,587 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 2 total messages (plots first, then text)
2025-09-16 23:47:20,588 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (311 chars)
2025-09-16 23:47:20,668 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-16 23:47:20,669 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-17 11:41:01,800 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-17 11:41:14,952 | INFO | faiss.loader | Loading faiss.
2025-09-17 11:41:15,073 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-17 11:41:16,617 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 11:41:18,624 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 11:41:19,046 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-17 11:41:19,047 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 11:41:19,057 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-17 11:41:20,171 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-17 11:41:20,171 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-17 11:41:20,172 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-17 11:41:41,794 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:42:00,366 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:46:07,184 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:46:08,292 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-09-17 11:46:08,292 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-09-17 11:46:08,292 | INFO | scchatbot.multi_agent_base | 1
2025-09-17 11:46:08,671 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-09-17 11:46:08,672 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-17 11:46:10,326 | INFO | scchatbot.multi_agent_base | 2
2025-09-17 11:46:10,328 | INFO | scchatbot.multi_agent_base | 3
2025-09-17 11:46:10,328 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-09-17 11:46:30,846 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 11:46:33,858 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 11:46:36,873 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 11:46:48,869 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'b05944ce'
2025-09-17 11:46:48,872 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-17 11:46:48,873 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP with T cell on it....
2025-09-17 11:46:54,649 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:46:54,666 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-17 11:46:54,666 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-17 11:46:54,666 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-17 11:46:54,666 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 0 cell types: []
2025-09-17 11:46:54,666 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 33 chars, starts with: 'No current session data available...'
2025-09-17 11:46:54,666 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (33 chars)
2025-09-17 11:46:54,666 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'No current session data available...'
2025-09-17 11:46:54,667 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (56 chars)
2025-09-17 11:46:54,667 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 4 initial cell types
2025-09-17 11:46:54,667 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-17 11:46:54,667 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-17 11:46:54,667 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP with T cell on it....
2025-09-17 11:46:54,667 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-17 11:46:54,667 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-17 11:46:54,667 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 4
2025-09-17 11:46:54,667 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-09-17 11:46:54,667 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Show the leiden UMAP with T cell on it.'
2025-09-17 11:47:01,566 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:47:05,244 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:47:05,245 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-09-17 11:47:05,245 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Epithelial cell', 'Stromal cell', 'Immune cell', 'Glial cell']
2025-09-17 11:47:05,275 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-09-17 11:47:05,292 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-09-17 11:47:05,292 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-09-17 11:47:05,292 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-09-17 11:47:05,292 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-09-17 11:47:05,292 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-09-17 11:47:05,292 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-09-17 11:47:05,292 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-09-17 11:47:05,292 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 0
2025-09-17 11:47:05,292 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-09-17 11:47:05,292 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-09-17 11:47:05,292 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-09-17 11:47:05,292 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 3 steps
2025-09-17 11:47:05,292 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 3 steps
2025-09-17 11:47:05,292 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-09-17 11:47:05,292 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-09-17 11:47:05,292 | INFO | scchatbot.workflow.nodes.planning |    • 1 analysis steps
2025-09-17 11:47:05,292 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-17 11:47:05,293 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-17 11:47:05,293 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 11:47:05,293 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP with T cell on it....
2025-09-17 11:47:05,294 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-09-17 11:47:05,294 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-09-17 11:47:12,522 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:47:26,907 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:48:00,585 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:48:00,594 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-09-17 11:48:00,594 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-09-17 11:48:00,595 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['T cell', 'B cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Mast cell']
2025-09-17 11:48:00,619 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: T cell
2025-09-17 11:48:00,619 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: B cell
2025-09-17 11:48:00,619 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mononuclear phagocyte
2025-09-17 11:48:00,620 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Natural killer cell
2025-09-17 11:48:00,620 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mast cell
2025-09-17 11:48:00,621 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-09-17 11:48:00,621 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-09-17 11:48:00,622 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 11:48:00,622 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 11:48:00,622 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-09-17 11:48:00,622 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-09-17 11:48:00,622 | INFO | scchatbot.workflow.node_base |    Current message: Validating Immune cell -> ['T cell']...
2025-09-17 11:48:00,623 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'T cell'
2025-09-17 11:48:00,623 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-09-17 11:48:00,623 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Validation passed: All 1 expected cell types found successfully
2025-09-17 11:48:00,623 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: success
2025-09-17 11:48:00,623 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['T cell'], found=['T cell'], missing=[]
2025-09-17 11:48:00,623 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'success', 'message': 'All 1 expected cell types found successfully', 'found_children': ['T cell'], 'missing_children': [], 'available_types': ['Mononuclear phagocyte', 'Glial cell', 'Natural killer cell', 'T cell', 'Mast cell', 'Stromal cell', 'B cell', 'Epithelial cell']}
2025-09-17 11:48:00,623 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: []
2025-09-17 11:48:00,623 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 1 remaining steps...
2025-09-17 11:48:00,623 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3: display_leiden_umap(params={})
2025-09-17 11:48:00,624 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3 cell type 'None' not in missing list []
2025-09-17 11:48:00,624 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 3
2025-09-17 11:48:00,624 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 11:48:00,624 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP with T cell on it....
2025-09-17 11:48:00,625 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Generate a UMAP visualization colored by leiden clusters to show the cluster organization of the available cell types.
2025-09-17 11:48:00,625 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_leiden_umap'
2025-09-17 11:48:00,625 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_leiden_umap' with step parameters: {}
2025-09-17 11:48:00,625 | INFO | scchatbot.workflow.nodes.execution | ❌ No successful gsea enrichment analysis found to visualize
2025-09-17 11:48:00,626 | INFO | scchatbot.workflow.nodes.execution | ❌ Step execution blocked: No gsea enrichment analysis results available to visualize
2025-09-17 11:48:00,626 | INFO | scchatbot.workflow.nodes.execution | 📄 Text storage: display_leiden_umap - Truncated to 500 chars
2025-09-17 11:48:00,626 | INFO | scchatbot.workflow.nodes.execution | ❌ Step failed: No gsea enrichment analysis results available to visualize
2025-09-17 11:48:00,626 | INFO | scchatbot.workflow.nodes.execution | 📝 Recording error and advancing to step 4 (no retries for deterministic operations)
2025-09-17 11:48:00,626 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 11:48:00,626 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 11:48:00,627 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (3/3), running post-execution evaluation
2025-09-17 11:48:00,627 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 11:48:00,627 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 11:48:02,920 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:48:06,059 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:48:06,061 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 11:48:06,061 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 11:48:07,611 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:48:07,618 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 11:48:08,504 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:48:08,506 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-09-17 11:48:08,507 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-09-17 11:48:08,507 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 11:48:08,507 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 3 entries
2025-09-17 11:48:08,507 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: []
2025-09-17 11:48:08,507 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 No direct matches found for T cell, checking for related executions...
2025-09-17 11:48:08,507 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: display_processed_umap(T cell)
2025-09-17 11:48:08,507 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 1 missing steps for T cell
2025-09-17 11:48:08,508 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 1 total supplementary steps
2025-09-17 11:48:08,508 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-09-17 11:48:08,508 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 1 supplementary steps to execution plan (attempt 1/2)
2025-09-17 11:48:08,508 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-09-17 11:48:08,508 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 11:48:08,508 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 3
2025-09-17 11:48:08,508 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 2
2025-09-17 11:48:08,509 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 1
2025-09-17 11:48:08,509 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 1
2025-09-17 11:48:08,509 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 11:48:08,509 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 11:48:08,510 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 11:48:08,510 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP with T cell on it....
2025-09-17 11:48:08,511 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Post-evaluation: display_processed_umap for T cell
2025-09-17 11:48:08,511 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_processed_umap'
2025-09-17 11:48:08,512 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_processed_umap' with step parameters: {'cell_type': 'T cell'}
2025-09-17 11:48:08,512 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_processed_umap called with kwargs: {'cell_type': 'T cell'}
2025-09-17 11:48:08,923 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 11:48:08,925 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 11:48:08,925 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp9atdp78n.
2025-09-17 11:48:08,925 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 11:48:08,926 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp5wpqvy0e.
2025-09-17 11:48:08,926 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp5wpqvy0e
2025-09-17 11:48:09,576 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp9atdp78n/index.html
2025-09-17 11:48:09,580 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 11:48:10,356 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 11:48:10,357 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 11:48:10,357 | INFO | kaleido.kaleido | Got 9F72
2025-09-17 11:48:10,357 | INFO | kaleido._kaleido_tab | Processing T_cell_from_parent_cell_type_UMAP_Plot.png
2025-09-17 11:48:10,357 | INFO | kaleido._kaleido_tab | Sending big command for T_cell_from_parent_cell_type_UMAP_Plot.png.
2025-09-17 11:48:10,448 | INFO | kaleido._kaleido_tab | Sent big command for T_cell_from_parent_cell_type_UMAP_Plot.png.
2025-09-17 11:48:10,450 | INFO | kaleido.kaleido | Reloading tab 9F72 before return.
2025-09-17 11:48:10,527 | INFO | kaleido.kaleido | Putting tab 9F72 back (queue size: 0).
2025-09-17 11:48:10,528 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 11:48:10,528 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 11:48:10,528 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 11:48:10,528 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 11:48:10,528 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 11:48:10,528 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 11:48:10,528 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 11:48:10,529 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 11:48:10,529 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 11:48:10,529 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 11:48:10,529 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 11:48:10,529 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 11:48:10,615 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 11:48:10,615 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 11:48:10,617 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 11:48:10,618 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 11:48:10,618 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpe98jt5sq.
2025-09-17 11:48:10,619 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 11:48:10,619 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpo8j167ec.
2025-09-17 11:48:10,619 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpo8j167ec
2025-09-17 11:48:11,013 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpe98jt5sq/index.html
2025-09-17 11:48:11,013 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 11:48:11,557 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 11:48:11,557 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 11:48:11,557 | INFO | kaleido.kaleido | Got 35AE
2025-09-17 11:48:11,557 | INFO | kaleido._kaleido_tab | Processing T_cell_from_parent_cell_type_UMAP_Plot.pdf
2025-09-17 11:48:11,557 | INFO | kaleido._kaleido_tab | Sending big command for T_cell_from_parent_cell_type_UMAP_Plot.pdf.
2025-09-17 11:48:11,626 | INFO | kaleido._kaleido_tab | Sent big command for T_cell_from_parent_cell_type_UMAP_Plot.pdf.
2025-09-17 11:48:11,687 | INFO | kaleido.kaleido | Reloading tab 35AE before return.
2025-09-17 11:48:11,763 | INFO | kaleido.kaleido | Putting tab 35AE back (queue size: 0).
2025-09-17 11:48:11,764 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 11:48:11,764 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 11:48:11,764 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 11:48:11,764 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 11:48:11,764 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 11:48:11,764 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 11:48:11,764 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 11:48:11,765 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 11:48:11,765 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 11:48:11,765 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 11:48:11,765 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 11:48:11,765 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 11:48:11,847 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 11:48:11,847 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 11:48:11,858 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-09-17 11:48:11,859 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_processed_umap - HTML preserved
2025-09-17 11:48:11,859 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-09-17 11:48:11,859 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 11:48:11,859 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 11:48:11,860 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-17 11:48:11,860 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 11:48:11,860 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 11:48:11,863 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 11:48:11,863 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 11:48:13,356 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:48:14,801 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:48:14,814 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 11:48:14,815 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 11:48:15,986 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:48:15,990 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 11:48:16,794 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:48:16,795 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-09-17 11:48:16,795 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-09-17 11:48:16,795 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 11:48:16,795 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-17 11:48:16,795 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 4)
2025-09-17 11:48:16,795 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_processed_umap']
2025-09-17 11:48:16,795 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-17 11:48:16,795 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-17 11:48:16,796 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-09-17 11:48:16,796 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 11:48:16,796 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-17 11:48:16,796 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-09-17 11:48:16,796 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 1
2025-09-17 11:48:16,796 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 11:48:16,796 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 11:48:16,796 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 11:48:16,797 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-17 11:48:16,797 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 11:48:16,797 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 11:48:18,485 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:48:19,013 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:48:19,015 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 11:48:19,016 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 11:48:19,887 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:48:19,890 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 11:48:20,809 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:48:20,811 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-09-17 11:48:20,811 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-09-17 11:48:20,812 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 11:48:20,812 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-17 11:48:20,812 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 4)
2025-09-17 11:48:20,812 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_processed_umap']
2025-09-17 11:48:20,812 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-17 11:48:20,812 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-17 11:48:20,812 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-09-17 11:48:20,813 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 11:48:20,813 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-17 11:48:20,813 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-09-17 11:48:20,813 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 1
2025-09-17 11:48:20,813 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 11:48:20,813 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 11:48:20,813 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 11:48:20,814 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-17 11:48:20,814 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-17 11:48:20,815 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 4 execution steps
2025-09-17 11:48:20,815 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-09-17 11:48:20,815 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-09-17 11:48:20,815 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-09-17 11:48:20,816 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-09-17 11:48:20,816 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: display_processed_umap for T cell
2025-09-17 11:48:20,816 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 4 function: display_processed_umap
2025-09-17 11:48:20,816 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell'}
2025-09-17 11:48:20,816 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_processed_umap with VisualizationResultAccessor
2025-09-17 11:48:20,816 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 3 successful steps
2025-09-17 11:48:20,816 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 397 characters for synthesis
2025-09-17 11:48:20,817 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-17 11:48:20,817 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-17 11:48:20,817 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (56 chars)
2025-09-17 11:48:20,817 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-17 11:48:20,817 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-17 11:48:20,817 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-17 11:48:23,434 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:48:23,444 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 4 execution steps
2025-09-17 11:48:23,445 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: process_cells, success=True, has_result=True
2025-09-17 11:48:23,445 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: validate_processing_results, success=True, has_result=True
2025-09-17 11:48:23,445 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: display_leiden_umap, success=False, has_result=True
2025-09-17 11:48:23,445 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: display_processed_umap, success=True, has_result=True
2025-09-17 11:48:23,446 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added plot plot_1: Annotated UMAP - T cell (30478 chars)
2025-09-17 11:48:23,446 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 1 individual plots (total: 30,478 chars)
2025-09-17 11:48:23,446 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 1 plots, total size: 30,478 bytes
2025-09-17 11:48:23,446 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 1 individual plots
2025-09-17 11:48:23,447 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 1 plots + 1 text (plots first)
2025-09-17 11:48:23,447 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 2 total messages (plots first, then text)
2025-09-17 11:48:23,448 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (488 chars)
2025-09-17 11:48:23,521 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-17 11:48:23,521 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-17 11:52:34,196 | INFO | scchatbot.multi_agent_base | 🔄 Reusing session state for 'b05944ce' with 8 available cell types
2025-09-17 11:52:34,199 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-17 11:52:34,199 | INFO | scchatbot.workflow.node_base |    Current message: Can you show the leiden UMAP of this?...
2025-09-17 11:52:35,066 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:52:35,068 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-17 11:52:35,068 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-17 11:52:35,068 | INFO | scchatbot.workflow.nodes.input_processing | 🧹 CONTEXT CLEANUP: Removing old context message (56 chars)
2025-09-17 11:52:35,069 | INFO | scchatbot.workflow.nodes.input_processing | 🧹 CONTEXT CLEANUP: Removed 1 old context messages
2025-09-17 11:52:35,069 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-17 11:52:35,069 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 8 cell types: ['Mononuclear phagocyte', 'Glial cell', 'Natural killer cell', 'T cell', 'Mast cell', 'Stromal cell', 'B cell', 'Epithelial cell']
2025-09-17 11:52:35,069 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 238 chars, starts with: 'Cell types currently available in the dataset:
  •...'
2025-09-17 11:52:35,069 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (238 chars)
2025-09-17 11:52:35,069 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'Cell types currently available in the dataset:
  • B cell
  • Epithelial cell
  • Glial cell
  • Mas...'
2025-09-17 11:52:35,069 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (261 chars)
2025-09-17 11:52:35,069 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Preserving 8 discovered cell types from previous operations
2025-09-17 11:52:35,070 | INFO | scchatbot.workflow.nodes.input_processing |    Preserved types: ['B cell', 'Epithelial cell', 'Glial cell', 'Mast cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Stromal cell', 'T cell']
2025-09-17 11:52:35,070 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-17 11:52:35,070 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-17 11:52:35,071 | INFO | scchatbot.workflow.node_base |    Current message: Can you show the leiden UMAP of this?...
2025-09-17 11:52:35,071 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-17 11:52:35,071 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-17 11:52:35,071 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 8
2025-09-17 11:52:35,071 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 4
2025-09-17 11:52:35,071 | INFO | scchatbot.workflow.nodes.planning |    • New types discovered: B cell, Mast cell, Mononuclear phagocyte, Natural killer cell, T cell
2025-09-17 11:52:35,071 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Can you show the leiden UMAP of this?'
2025-09-17 11:52:41,281 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:52:42,905 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:52:42,907 | INFO | scchatbot.workflow.nodes.planning | 🔍 No specific cell types identified in question
2025-09-17 11:52:42,907 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-09-17 11:52:42,907 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 1 steps
2025-09-17 11:52:42,907 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 1 steps
2025-09-17 11:52:42,908 | INFO | scchatbot.workflow.nodes.planning |    • 0 process_cells steps
2025-09-17 11:52:42,908 | INFO | scchatbot.workflow.nodes.planning |    • 0 validation steps
2025-09-17 11:52:42,908 | INFO | scchatbot.workflow.nodes.planning |    • 0 analysis steps
2025-09-17 11:52:42,908 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-17 11:52:42,908 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-17 11:52:42,909 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 11:52:42,909 | INFO | scchatbot.workflow.node_base |    Current message: Can you show the leiden UMAP of this?...
2025-09-17 11:52:42,910 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Generate an interactive UMAP plot colored by leiden cluster assignments.
2025-09-17 11:52:42,910 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_leiden_umap'
2025-09-17 11:52:42,911 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_leiden_umap' with step parameters: {}
2025-09-17 11:52:42,911 | INFO | scchatbot.workflow.nodes.execution | ❌ No successful gsea enrichment analysis found to visualize
2025-09-17 11:52:42,911 | INFO | scchatbot.workflow.nodes.execution | ❌ Step execution blocked: No gsea enrichment analysis results available to visualize
2025-09-17 11:52:42,912 | INFO | scchatbot.workflow.nodes.execution | 📄 Text storage: display_leiden_umap - Truncated to 500 chars
2025-09-17 11:52:42,912 | INFO | scchatbot.workflow.nodes.execution | ❌ Step failed: No gsea enrichment analysis results available to visualize
2025-09-17 11:52:42,912 | INFO | scchatbot.workflow.nodes.execution | 📝 Recording error and advancing to step 2 (no retries for deterministic operations)
2025-09-17 11:52:42,912 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 11:52:42,912 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 11:52:42,912 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (1/1), running post-execution evaluation
2025-09-17 11:52:42,913 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 11:52:42,913 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 11:52:46,031 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:52:47,687 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:52:47,698 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 11:52:47,699 | INFO | scchatbot.workflow.nodes.evaluation | 📋 No specific cell types mentioned, skipping post-execution evaluation
2025-09-17 11:52:47,699 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 11:52:47,699 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 1
2025-09-17 11:52:47,699 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 0
2025-09-17 11:52:47,699 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 1
2025-09-17 11:52:47,699 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 11:52:47,699 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 11:52:47,700 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 11:52:47,701 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (1/1), running post-execution evaluation
2025-09-17 11:52:47,701 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 11:52:47,702 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 11:52:50,467 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:52:52,883 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:52:52,889 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 11:52:52,890 | INFO | scchatbot.workflow.nodes.evaluation | 📋 No specific cell types mentioned, skipping post-execution evaluation
2025-09-17 11:52:52,890 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 11:52:52,891 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 1
2025-09-17 11:52:52,891 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 0
2025-09-17 11:52:52,891 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 1
2025-09-17 11:52:52,891 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 11:52:52,891 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 11:52:52,891 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 11:52:52,892 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-17 11:52:52,892 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-17 11:52:52,892 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 1 execution steps
2025-09-17 11:52:52,892 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 0 successful steps
2025-09-17 11:52:52,893 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 64 characters for synthesis
2025-09-17 11:52:52,893 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-17 11:52:52,893 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-17 11:52:52,893 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (261 chars)
2025-09-17 11:52:52,893 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-17 11:52:52,893 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-17 11:52:52,893 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-17 11:52:55,224 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 11:52:55,226 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 1 execution steps
2025-09-17 11:52:55,226 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: display_leiden_umap, success=False, has_result=True
2025-09-17 11:52:55,226 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: No valid plots found
2025-09-17 11:52:55,226 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 0 individual plots
2025-09-17 11:52:55,227 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (514 chars)
2025-09-17 11:52:55,276 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-17 11:52:55,276 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-17 12:05:54,858 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-17 12:05:59,851 | INFO | faiss.loader | Loading faiss.
2025-09-17 12:05:59,878 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-17 12:06:00,728 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 12:06:02,419 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 12:06:02,499 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-17 12:06:02,500 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 12:06:02,508 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-17 12:06:03,423 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-17 12:06:03,423 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-17 12:06:03,425 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-17 12:06:23,026 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:06:51,486 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:10:33,467 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:10:34,422 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-09-17 12:10:34,423 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-09-17 12:10:34,423 | INFO | scchatbot.multi_agent_base | 1
2025-09-17 12:10:34,870 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-09-17 12:10:34,870 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-17 12:10:36,392 | INFO | scchatbot.multi_agent_base | 2
2025-09-17 12:10:36,394 | INFO | scchatbot.multi_agent_base | 3
2025-09-17 12:10:36,394 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-09-17 12:10:40,825 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 12:10:43,849 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 12:10:46,861 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 12:10:50,850 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'b05944ce'
2025-09-17 12:10:50,850 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-17 12:10:50,850 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP for T cell....
2025-09-17 12:10:51,605 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:10:51,607 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state", "recent analysis results"]
```'
2025-09-17 12:10:51,608 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 2 context sources: ['current_session_state', 'recent analysis results']
2025-09-17 12:10:51,608 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-17 12:10:51,608 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 0 cell types: []
2025-09-17 12:10:51,608 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 33 chars, starts with: 'No current session data available...'
2025-09-17 12:10:51,608 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (33 chars)
2025-09-17 12:10:51,608 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'No current session data available...'
2025-09-17 12:10:51,647 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (56 chars)
2025-09-17 12:10:51,647 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 4 initial cell types
2025-09-17 12:10:51,647 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-17 12:10:51,648 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-17 12:10:51,648 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP for T cell....
2025-09-17 12:10:51,648 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-17 12:10:51,648 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-17 12:10:51,648 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 4
2025-09-17 12:10:51,648 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-09-17 12:10:51,648 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Show the leiden UMAP for T cell.'
2025-09-17 12:10:57,901 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:10:59,373 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:10:59,381 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-09-17 12:10:59,381 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Epithelial cell', 'Stromal cell', 'Immune cell', 'Glial cell']
2025-09-17 12:10:59,406 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-09-17 12:10:59,418 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-09-17 12:10:59,419 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-09-17 12:10:59,419 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-09-17 12:10:59,420 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-09-17 12:10:59,420 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-09-17 12:10:59,420 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-09-17 12:10:59,420 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-09-17 12:10:59,420 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 0
2025-09-17 12:10:59,420 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-09-17 12:10:59,420 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-09-17 12:10:59,420 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-09-17 12:10:59,420 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 3 steps
2025-09-17 12:10:59,420 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 3 steps
2025-09-17 12:10:59,420 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-09-17 12:10:59,420 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-09-17 12:10:59,420 | INFO | scchatbot.workflow.nodes.planning |    • 1 analysis steps
2025-09-17 12:10:59,420 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-17 12:10:59,420 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-17 12:10:59,421 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 12:10:59,421 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP for T cell....
2025-09-17 12:10:59,421 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-09-17 12:10:59,421 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-09-17 12:11:05,613 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:11:15,904 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:11:38,829 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:11:38,833 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-09-17 12:11:38,833 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-09-17 12:11:38,834 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['T cell', 'B cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Mast cell']
2025-09-17 12:11:38,854 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: T cell
2025-09-17 12:11:38,854 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: B cell
2025-09-17 12:11:38,854 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mononuclear phagocyte
2025-09-17 12:11:38,855 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Natural killer cell
2025-09-17 12:11:38,855 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mast cell
2025-09-17 12:11:38,856 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-09-17 12:11:38,856 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-09-17 12:11:38,856 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 12:11:38,856 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 12:11:38,856 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-09-17 12:11:38,856 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-09-17 12:11:38,856 | INFO | scchatbot.workflow.node_base |    Current message: Validating Immune cell -> ['T cell']...
2025-09-17 12:11:38,856 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'T cell'
2025-09-17 12:11:38,856 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-09-17 12:11:38,856 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Validation passed: All 1 expected cell types found successfully
2025-09-17 12:11:38,856 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: success
2025-09-17 12:11:38,857 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['T cell'], found=['T cell'], missing=[]
2025-09-17 12:11:38,857 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'success', 'message': 'All 1 expected cell types found successfully', 'found_children': ['T cell'], 'missing_children': [], 'available_types': ['Mast cell', 'Natural killer cell', 'Epithelial cell', 'B cell', 'Mononuclear phagocyte', 'Glial cell', 'Stromal cell', 'T cell']}
2025-09-17 12:11:38,857 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: []
2025-09-17 12:11:38,857 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 1 remaining steps...
2025-09-17 12:11:38,857 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3: display_leiden_umap(cell_type='T cell')
2025-09-17 12:11:38,857 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3 cell type 'T cell' not in missing list []
2025-09-17 12:11:38,857 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 3
2025-09-17 12:11:38,857 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 12:11:38,857 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP for T cell....
2025-09-17 12:11:38,857 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Generate a UMAP plot colored by leiden clusters specifically for T cells.
2025-09-17 12:11:38,857 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_leiden_umap'
2025-09-17 12:11:38,858 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_leiden_umap' with step parameters: {'cell_type': 'T cell'}
2025-09-17 12:11:38,858 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_leiden_umap called with kwargs: {'cell_type': 'T cell'}
2025-09-17 12:11:39,352 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 12:11:39,354 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 12:11:39,355 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpo970p43u.
2025-09-17 12:11:39,355 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 12:11:39,356 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpwj9fukbf.
2025-09-17 12:11:39,356 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpwj9fukbf
2025-09-17 12:11:39,781 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpo970p43u/index.html
2025-09-17 12:11:39,782 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 12:11:40,272 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 12:11:40,273 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 12:11:40,273 | INFO | kaleido.kaleido | Got 8F6B
2025-09-17 12:11:40,273 | INFO | kaleido._kaleido_tab | Processing T_cell_Leiden_Clusters_from_parent_cell_type_UMAP_Plot.png
2025-09-17 12:11:40,273 | INFO | kaleido._kaleido_tab | Sending big command for T_cell_Leiden_Clusters_from_parent_cell_type_UMAP_Plot.png.
2025-09-17 12:11:40,368 | INFO | kaleido._kaleido_tab | Sent big command for T_cell_Leiden_Clusters_from_parent_cell_type_UMAP_Plot.png.
2025-09-17 12:11:40,370 | INFO | kaleido.kaleido | Reloading tab 8F6B before return.
2025-09-17 12:11:40,447 | INFO | kaleido.kaleido | Putting tab 8F6B back (queue size: 0).
2025-09-17 12:11:40,447 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 12:11:40,447 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 12:11:40,447 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:11:40,447 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:11:40,447 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:11:40,447 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:11:40,447 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:11:40,448 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:11:40,448 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:11:40,448 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:11:40,448 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:11:40,449 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:11:40,538 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:11:40,538 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:11:40,540 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 12:11:40,541 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 12:11:40,541 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpx86cot86.
2025-09-17 12:11:40,541 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 12:11:40,542 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp76mill57.
2025-09-17 12:11:40,542 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp76mill57
2025-09-17 12:11:40,943 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpx86cot86/index.html
2025-09-17 12:11:40,946 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 12:11:41,465 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 12:11:41,466 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 12:11:41,466 | INFO | kaleido.kaleido | Got 0FD6
2025-09-17 12:11:41,466 | INFO | kaleido._kaleido_tab | Processing T_cell_Leiden_Clusters_from_parent_cell_type_UMAP_Plot.pdf
2025-09-17 12:11:41,466 | INFO | kaleido._kaleido_tab | Sending big command for T_cell_Leiden_Clusters_from_parent_cell_type_UMAP_Plot.pdf.
2025-09-17 12:11:41,539 | INFO | kaleido._kaleido_tab | Sent big command for T_cell_Leiden_Clusters_from_parent_cell_type_UMAP_Plot.pdf.
2025-09-17 12:11:41,595 | INFO | kaleido.kaleido | Reloading tab 0FD6 before return.
2025-09-17 12:11:41,673 | INFO | kaleido.kaleido | Putting tab 0FD6 back (queue size: 0).
2025-09-17 12:11:41,673 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 12:11:41,673 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 12:11:41,674 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:11:41,674 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:11:41,674 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:11:41,674 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:11:41,674 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:11:41,674 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:11:41,675 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:11:41,675 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:11:41,675 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:11:41,675 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:11:41,767 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:11:41,767 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:11:41,778 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-09-17 12:11:41,779 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_leiden_umap - HTML preserved
2025-09-17 12:11:41,779 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-09-17 12:11:41,779 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 12:11:41,779 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 12:11:41,780 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (3/3), running post-execution evaluation
2025-09-17 12:11:41,780 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 12:11:41,780 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 12:11:42,819 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:11:43,286 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:11:43,286 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:11:43,286 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 12:11:45,444 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:11:45,456 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:11:46,378 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:11:46,405 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-09-17 12:11:46,405 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-09-17 12:11:46,405 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 12:11:46,405 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 3 entries
2025-09-17 12:11:46,405 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_leiden_umap (execution 3)
2025-09-17 12:11:46,405 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_leiden_umap']
2025-09-17 12:11:46,405 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: display_processed_umap(T cell)
2025-09-17 12:11:46,405 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 1 missing steps for T cell
2025-09-17 12:11:46,405 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 1 total supplementary steps
2025-09-17 12:11:46,406 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-09-17 12:11:46,406 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 1 supplementary steps to execution plan (attempt 1/2)
2025-09-17 12:11:46,406 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-09-17 12:11:46,406 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 12:11:46,406 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 3
2025-09-17 12:11:46,406 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-09-17 12:11:46,406 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 12:11:46,406 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 1
2025-09-17 12:11:46,406 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 12:11:46,406 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 12:11:46,406 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 12:11:46,406 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP for T cell....
2025-09-17 12:11:46,407 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Post-evaluation: display_processed_umap for T cell
2025-09-17 12:11:46,407 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_processed_umap'
2025-09-17 12:11:46,407 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_processed_umap' with step parameters: {'cell_type': 'T cell'}
2025-09-17 12:11:46,407 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_processed_umap called with kwargs: {'cell_type': 'T cell'}
2025-09-17 12:11:46,436 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 12:11:46,437 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 12:11:46,437 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp4iep38b9.
2025-09-17 12:11:46,438 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 12:11:46,438 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpq773eqeb.
2025-09-17 12:11:46,438 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpq773eqeb
2025-09-17 12:11:46,856 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp4iep38b9/index.html
2025-09-17 12:11:46,858 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 12:11:47,379 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 12:11:47,379 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 12:11:47,379 | INFO | kaleido.kaleido | Got E7AB
2025-09-17 12:11:47,380 | INFO | kaleido._kaleido_tab | Processing T_cell_from_parent_cell_type_UMAP_Plot.png
2025-09-17 12:11:47,380 | INFO | kaleido._kaleido_tab | Sending big command for T_cell_from_parent_cell_type_UMAP_Plot.png.
2025-09-17 12:11:47,470 | INFO | kaleido._kaleido_tab | Sent big command for T_cell_from_parent_cell_type_UMAP_Plot.png.
2025-09-17 12:11:47,472 | INFO | kaleido.kaleido | Reloading tab E7AB before return.
2025-09-17 12:11:47,549 | INFO | kaleido.kaleido | Putting tab E7AB back (queue size: 0).
2025-09-17 12:11:47,549 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 12:11:47,549 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 12:11:47,549 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:11:47,549 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:11:47,549 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:11:47,549 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:11:47,549 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:11:47,550 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:11:47,550 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:11:47,550 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:11:47,550 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:11:47,550 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:11:47,638 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:11:47,638 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:11:47,640 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 12:11:47,641 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 12:11:47,641 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpuvqxvb0v.
2025-09-17 12:11:47,641 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 12:11:47,642 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp9l4aicz0.
2025-09-17 12:11:47,642 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp9l4aicz0
2025-09-17 12:11:48,064 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpuvqxvb0v/index.html
2025-09-17 12:11:48,066 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 12:11:48,580 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 12:11:48,581 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 12:11:48,581 | INFO | kaleido.kaleido | Got 913F
2025-09-17 12:11:48,581 | INFO | kaleido._kaleido_tab | Processing T_cell_from_parent_cell_type_UMAP_Plot.pdf
2025-09-17 12:11:48,581 | INFO | kaleido._kaleido_tab | Sending big command for T_cell_from_parent_cell_type_UMAP_Plot.pdf.
2025-09-17 12:11:48,645 | INFO | kaleido._kaleido_tab | Sent big command for T_cell_from_parent_cell_type_UMAP_Plot.pdf.
2025-09-17 12:11:48,701 | INFO | kaleido.kaleido | Reloading tab 913F before return.
2025-09-17 12:11:48,774 | INFO | kaleido.kaleido | Putting tab 913F back (queue size: 0).
2025-09-17 12:11:48,775 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 12:11:48,775 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 12:11:48,775 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:11:48,775 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:11:48,775 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:11:48,775 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:11:48,775 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:11:48,776 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:11:48,776 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:11:48,776 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:11:48,776 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:11:48,776 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:11:48,864 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:11:48,864 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:11:48,875 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-09-17 12:11:48,876 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_processed_umap - HTML preserved
2025-09-17 12:11:48,876 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-09-17 12:11:48,876 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 12:11:48,876 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 12:11:48,877 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-17 12:11:48,877 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 12:11:48,877 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 12:11:48,880 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:11:48,880 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:11:48,880 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:11:48,880 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:11:50,203 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:11:52,295 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:11:52,298 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:11:52,298 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 12:11:52,756 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:11:52,757 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:11:53,366 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:11:53,368 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-09-17 12:11:53,369 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-09-17 12:11:53,370 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 12:11:53,370 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-17 12:11:53,370 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_leiden_umap (execution 3)
2025-09-17 12:11:53,370 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 4)
2025-09-17 12:11:53,370 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_leiden_umap', 'display_processed_umap']
2025-09-17 12:11:53,370 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-17 12:11:53,371 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-17 12:11:53,371 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-09-17 12:11:53,371 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 12:11:53,371 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-17 12:11:53,371 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-17 12:11:53,371 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 12:11:53,371 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 12:11:53,372 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 12:11:53,372 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 12:11:53,374 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-17 12:11:53,374 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 12:11:53,375 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 12:11:55,410 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:11:56,820 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:11:56,831 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:11:56,832 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 12:11:57,617 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:11:57,644 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:11:58,297 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:11:58,302 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-09-17 12:11:58,303 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-09-17 12:11:58,304 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 12:11:58,304 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-17 12:11:58,304 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_leiden_umap (execution 3)
2025-09-17 12:11:58,305 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 4)
2025-09-17 12:11:58,305 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_leiden_umap', 'display_processed_umap']
2025-09-17 12:11:58,305 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-17 12:11:58,305 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-17 12:11:58,305 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-09-17 12:11:58,305 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 12:11:58,305 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-17 12:11:58,306 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-17 12:11:58,306 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 12:11:58,306 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 12:11:58,306 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 12:11:58,306 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 12:11:58,307 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-17 12:11:58,307 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-17 12:11:58,308 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 4 execution steps
2025-09-17 12:11:58,308 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-09-17 12:11:58,309 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-09-17 12:11:58,310 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-09-17 12:11:58,311 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-09-17 12:11:58,311 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: display_leiden_umap for T cell
2025-09-17 12:11:58,311 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 3 function: display_leiden_umap
2025-09-17 12:11:58,311 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell'}
2025-09-17 12:11:58,312 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_leiden_umap with VisualizationResultAccessor
2025-09-17 12:11:58,312 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: display_processed_umap for T cell
2025-09-17 12:11:58,312 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 4 function: display_processed_umap
2025-09-17 12:11:58,312 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell'}
2025-09-17 12:11:58,312 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_processed_umap with VisualizationResultAccessor
2025-09-17 12:11:58,312 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 4 successful steps
2025-09-17 12:11:58,312 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 500 characters for synthesis
2025-09-17 12:11:58,313 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-17 12:11:58,313 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-17 12:11:58,313 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (56 chars)
2025-09-17 12:11:58,313 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-17 12:11:58,313 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-17 12:11:58,313 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-17 12:11:59,383 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:11:59,389 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 4 execution steps
2025-09-17 12:11:59,389 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: process_cells, success=True, has_result=True
2025-09-17 12:11:59,389 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: validate_processing_results, success=True, has_result=True
2025-09-17 12:11:59,390 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: display_leiden_umap, success=True, has_result=True
2025-09-17 12:11:59,391 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added plot plot_1: Leiden Umap - T cell (32270 chars)
2025-09-17 12:11:59,391 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: display_processed_umap, success=True, has_result=True
2025-09-17 12:11:59,391 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Skipping display_processed_umap - duplicate plot detected
2025-09-17 12:11:59,392 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 1 individual plots (total: 32,270 chars)
2025-09-17 12:11:59,392 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 1 plots, total size: 32,270 bytes
2025-09-17 12:11:59,392 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 1 individual plots
2025-09-17 12:11:59,392 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 1 plots + 1 text (plots first)
2025-09-17 12:11:59,392 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 2 total messages (plots first, then text)
2025-09-17 12:11:59,394 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (185 chars)
2025-09-17 12:11:59,469 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-17 12:11:59,469 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-17 12:14:06,366 | INFO | scchatbot.multi_agent_base | 🔄 Reusing session state for 'b05944ce' with 8 available cell types
2025-09-17 12:14:06,368 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-17 12:14:06,368 | INFO | scchatbot.workflow.node_base |    Current message: Can you show the overall UMAP?...
2025-09-17 12:14:07,140 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:14:07,145 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-17 12:14:07,145 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-17 12:14:07,145 | INFO | scchatbot.workflow.nodes.input_processing | 🧹 CONTEXT CLEANUP: Removing old context message (56 chars)
2025-09-17 12:14:07,145 | INFO | scchatbot.workflow.nodes.input_processing | 🧹 CONTEXT CLEANUP: Removed 1 old context messages
2025-09-17 12:14:07,145 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-17 12:14:07,145 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 8 cell types: ['Mast cell', 'Natural killer cell', 'Epithelial cell', 'B cell', 'Mononuclear phagocyte', 'Glial cell', 'Stromal cell', 'T cell']
2025-09-17 12:14:07,145 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 250 chars, starts with: 'Cell types currently available in the dataset:
  •...'
2025-09-17 12:14:07,145 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (250 chars)
2025-09-17 12:14:07,146 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'Cell types currently available in the dataset:
  • B cell
  • Epithelial cell
  • Glial cell
  • Mas...'
2025-09-17 12:14:07,146 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (273 chars)
2025-09-17 12:14:07,146 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Preserving 8 discovered cell types from previous operations
2025-09-17 12:14:07,146 | INFO | scchatbot.workflow.nodes.input_processing |    Preserved types: ['B cell', 'Epithelial cell', 'Glial cell', 'Mast cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Stromal cell', 'T cell']
2025-09-17 12:14:07,146 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-17 12:14:07,146 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-17 12:14:07,146 | INFO | scchatbot.workflow.node_base |    Current message: Can you show the overall UMAP?...
2025-09-17 12:14:07,146 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-17 12:14:07,146 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-17 12:14:07,146 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 8
2025-09-17 12:14:07,146 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 4
2025-09-17 12:14:07,147 | INFO | scchatbot.workflow.nodes.planning |    • New types discovered: B cell, Mast cell, Mononuclear phagocyte, Natural killer cell, T cell
2025-09-17 12:14:07,147 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Can you show the overall UMAP?'
2025-09-17 12:14:12,380 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:14:13,861 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:14:13,871 | INFO | scchatbot.workflow.nodes.planning | 🔍 No specific cell types identified in question
2025-09-17 12:14:13,871 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-09-17 12:14:13,871 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 1 steps
2025-09-17 12:14:13,872 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 1 steps
2025-09-17 12:14:13,872 | INFO | scchatbot.workflow.nodes.planning |    • 0 process_cells steps
2025-09-17 12:14:13,872 | INFO | scchatbot.workflow.nodes.planning |    • 0 validation steps
2025-09-17 12:14:13,872 | INFO | scchatbot.workflow.nodes.planning |    • 0 analysis steps
2025-09-17 12:14:13,872 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-17 12:14:13,872 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-17 12:14:13,873 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 12:14:13,873 | INFO | scchatbot.workflow.node_base |    Current message: Can you show the overall UMAP?...
2025-09-17 12:14:13,875 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Generate a UMAP plot showing the complete dataset with cell types annotated.
2025-09-17 12:14:13,876 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_overall_umap'
2025-09-17 12:14:13,878 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_overall_umap' with step parameters: {'color_mode': 'cell_type'}
2025-09-17 12:14:13,878 | INFO | scchatbot.workflow.nodes.execution | ✅ display_overall_umap doesn't require cell_type parameter
2025-09-17 12:14:13,878 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_overall_umap called with kwargs: {'color_mode': 'cell_type'}
2025-09-17 12:14:13,930 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 12:14:13,931 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 12:14:13,931 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp5muoquuo.
2025-09-17 12:14:13,932 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 12:14:13,932 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmph1h3trv9.
2025-09-17 12:14:13,932 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmph1h3trv9
2025-09-17 12:14:14,497 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp5muoquuo/index.html
2025-09-17 12:14:14,500 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 12:14:15,028 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 12:14:15,028 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 12:14:15,028 | INFO | kaleido.kaleido | Got E808
2025-09-17 12:14:15,028 | INFO | kaleido._kaleido_tab | Processing Overall_Cell_Types_UMAP_Global_View.png
2025-09-17 12:14:15,028 | INFO | kaleido._kaleido_tab | Sending big command for Overall_Cell_Types_UMAP_Global_View.png.
2025-09-17 12:14:15,939 | INFO | kaleido._kaleido_tab | Sent big command for Overall_Cell_Types_UMAP_Global_View.png.
2025-09-17 12:14:15,942 | INFO | kaleido.kaleido | Reloading tab E808 before return.
2025-09-17 12:14:16,064 | INFO | kaleido.kaleido | Putting tab E808 back (queue size: 0).
2025-09-17 12:14:16,065 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 12:14:16,065 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 12:14:16,065 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:14:16,065 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:14:16,065 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:14:16,065 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:14:16,065 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:14:16,066 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:14:16,066 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:14:16,066 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:14:16,066 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:14:16,066 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:14:16,156 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:14:16,156 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:14:16,159 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 12:14:16,159 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 12:14:16,159 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpmkayq8hi.
2025-09-17 12:14:16,160 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 12:14:16,160 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpxt3_7h6_.
2025-09-17 12:14:16,160 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpxt3_7h6_
2025-09-17 12:14:16,569 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpmkayq8hi/index.html
2025-09-17 12:14:16,570 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 12:14:17,482 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 12:14:17,483 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 12:14:17,483 | INFO | kaleido.kaleido | Got 2945
2025-09-17 12:14:17,483 | INFO | kaleido._kaleido_tab | Processing Overall_Cell_Types_UMAP_Global_View.pdf
2025-09-17 12:14:17,484 | INFO | kaleido._kaleido_tab | Sending big command for Overall_Cell_Types_UMAP_Global_View.pdf.
2025-09-17 12:14:17,868 | INFO | kaleido._kaleido_tab | Sent big command for Overall_Cell_Types_UMAP_Global_View.pdf.
2025-09-17 12:14:18,073 | INFO | kaleido.kaleido | Reloading tab 2945 before return.
2025-09-17 12:14:18,162 | INFO | kaleido.kaleido | Putting tab 2945 back (queue size: 0).
2025-09-17 12:14:18,162 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 12:14:18,162 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 12:14:18,163 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:14:18,163 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:14:18,163 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:14:18,163 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:14:18,163 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:14:18,164 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:14:18,164 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:14:18,164 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:14:18,164 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:14:18,164 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:14:18,256 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:14:18,256 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:14:18,267 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-09-17 12:14:18,268 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_overall_umap - HTML preserved
2025-09-17 12:14:18,268 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-09-17 12:14:18,268 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 12:14:18,268 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 12:14:18,269 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (1/1), running post-execution evaluation
2025-09-17 12:14:18,269 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 12:14:18,269 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 12:14:20,150 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:14:20,168 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:14:20,169 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:14:20,169 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:14:20,169 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:14:20,858 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:14:20,876 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:14:20,876 | INFO | scchatbot.workflow.nodes.evaluation | 📋 No specific cell types mentioned, skipping post-execution evaluation
2025-09-17 12:14:20,877 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 12:14:20,877 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 1
2025-09-17 12:14:20,877 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 1
2025-09-17 12:14:20,877 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 12:14:20,877 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 12:14:20,877 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 12:14:20,878 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 12:14:20,879 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (1/1), running post-execution evaluation
2025-09-17 12:14:20,879 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 12:14:20,879 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 12:14:22,112 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:14:22,580 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:14:22,582 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:14:22,582 | INFO | scchatbot.workflow.nodes.evaluation | 📋 No specific cell types mentioned, skipping post-execution evaluation
2025-09-17 12:14:22,583 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 12:14:22,583 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 1
2025-09-17 12:14:22,583 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 1
2025-09-17 12:14:22,583 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 12:14:22,583 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 12:14:22,583 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 12:14:22,583 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 12:14:22,583 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-17 12:14:22,584 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-17 12:14:22,584 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 1 execution steps
2025-09-17 12:14:22,584 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: display_overall_umap for step_0
2025-09-17 12:14:22,584 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 1 function: display_overall_umap
2025-09-17 12:14:22,584 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'color_mode': 'cell_type'}
2025-09-17 12:14:22,584 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_overall_umap with VisualizationResultAccessor
2025-09-17 12:14:22,584 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 1 successful steps
2025-09-17 12:14:22,585 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 257 characters for synthesis
2025-09-17 12:14:22,585 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-17 12:14:22,585 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-17 12:14:22,585 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (273 chars)
2025-09-17 12:14:22,585 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-17 12:14:22,585 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-17 12:14:22,585 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-17 12:14:24,146 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:14:24,162 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 1 execution steps
2025-09-17 12:14:24,163 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: display_overall_umap, success=True, has_result=True
2025-09-17 12:14:24,163 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added plot plot_1: Overall Umap (112688 chars)
2025-09-17 12:14:24,163 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 1 individual plots (total: 112,688 chars)
2025-09-17 12:14:24,163 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 1 plots, total size: 112,688 bytes
2025-09-17 12:14:24,164 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 1 individual plots
2025-09-17 12:14:24,164 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 1 plots + 1 text (plots first)
2025-09-17 12:14:24,164 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 2 total messages (plots first, then text)
2025-09-17 12:14:24,168 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (394 chars)
2025-09-17 12:14:24,215 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-17 12:14:24,215 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-17 12:18:05,636 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-17 12:18:10,117 | INFO | faiss.loader | Loading faiss.
2025-09-17 12:18:10,131 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-17 12:18:11,005 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 12:18:12,617 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 12:18:12,669 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-17 12:18:12,669 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 12:18:12,678 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-17 12:18:13,586 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-17 12:18:13,586 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-17 12:18:13,587 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-17 12:18:30,014 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:18:34,972 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:22:06,543 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:22:07,396 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-09-17 12:22:07,397 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-09-17 12:22:07,398 | INFO | scchatbot.multi_agent_base | 1
2025-09-17 12:22:07,865 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-09-17 12:22:07,865 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-17 12:22:09,404 | INFO | scchatbot.multi_agent_base | 2
2025-09-17 12:22:09,406 | INFO | scchatbot.multi_agent_base | 3
2025-09-17 12:22:09,407 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-09-17 12:26:27,921 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 12:26:31,566 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 12:26:34,580 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 12:26:36,408 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'b05944ce'
2025-09-17 12:26:36,412 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-17 12:26:36,413 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP for T cell....
2025-09-17 12:26:37,247 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:26:37,253 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-17 12:26:37,253 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-17 12:26:37,254 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-17 12:26:37,255 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 0 cell types: []
2025-09-17 12:26:37,255 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 33 chars, starts with: 'No current session data available...'
2025-09-17 12:26:37,256 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (33 chars)
2025-09-17 12:26:37,256 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'No current session data available...'
2025-09-17 12:26:37,256 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (56 chars)
2025-09-17 12:26:37,256 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 4 initial cell types
2025-09-17 12:26:37,257 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-17 12:26:37,258 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-17 12:26:37,259 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP for T cell....
2025-09-17 12:26:37,260 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-17 12:26:37,262 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-17 12:26:37,262 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 4
2025-09-17 12:26:37,262 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-09-17 12:26:37,262 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Show the leiden UMAP for T cell.'
2025-09-17 12:26:44,148 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:26:46,428 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:26:46,431 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-09-17 12:26:46,431 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Epithelial cell', 'Stromal cell', 'Immune cell', 'Glial cell']
2025-09-17 12:26:46,463 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-09-17 12:26:46,485 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-09-17 12:26:46,486 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-09-17 12:26:46,486 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-09-17 12:26:46,486 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-09-17 12:26:46,486 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-09-17 12:26:46,486 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-09-17 12:26:46,486 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-09-17 12:26:46,486 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 0
2025-09-17 12:26:46,486 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-09-17 12:26:46,486 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-09-17 12:26:46,486 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-09-17 12:26:46,486 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 3 steps
2025-09-17 12:26:46,486 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 3 steps
2025-09-17 12:26:46,486 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-09-17 12:26:46,486 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-09-17 12:26:46,486 | INFO | scchatbot.workflow.nodes.planning |    • 1 analysis steps
2025-09-17 12:26:46,486 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-17 12:26:46,487 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-17 12:26:46,487 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 12:26:46,487 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP for T cell....
2025-09-17 12:26:46,488 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-09-17 12:26:46,488 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-09-17 12:26:55,412 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:26:58,930 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:27:43,748 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:27:43,798 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-09-17 12:27:43,798 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-09-17 12:27:43,799 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['T cell', 'B cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Mast cell']
2025-09-17 12:27:43,821 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: T cell
2025-09-17 12:27:43,821 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: B cell
2025-09-17 12:27:43,821 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mononuclear phagocyte
2025-09-17 12:27:43,821 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Natural killer cell
2025-09-17 12:27:43,821 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mast cell
2025-09-17 12:27:43,823 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-09-17 12:27:43,823 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-09-17 12:27:43,823 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 12:27:43,823 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 12:27:43,824 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-09-17 12:27:43,824 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-09-17 12:27:43,824 | INFO | scchatbot.workflow.node_base |    Current message: Validating Immune cell -> ['T cell']...
2025-09-17 12:27:43,824 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'T cell'
2025-09-17 12:27:43,824 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-09-17 12:27:43,825 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Validation passed: All 1 expected cell types found successfully
2025-09-17 12:27:43,825 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: success
2025-09-17 12:27:43,825 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['T cell'], found=['T cell'], missing=[]
2025-09-17 12:27:43,825 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'success', 'message': 'All 1 expected cell types found successfully', 'found_children': ['T cell'], 'missing_children': [], 'available_types': ['Epithelial cell', 'Stromal cell', 'B cell', 'Glial cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Mast cell', 'T cell']}
2025-09-17 12:27:43,825 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: []
2025-09-17 12:27:43,825 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 1 remaining steps...
2025-09-17 12:27:43,825 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3: display_leiden_umap(cell_type='T cell')
2025-09-17 12:27:43,825 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3 cell type 'T cell' not in missing list []
2025-09-17 12:27:43,825 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 3
2025-09-17 12:27:43,825 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 12:27:43,825 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP for T cell....
2025-09-17 12:27:43,826 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Generate a UMAP plot colored by leiden clusters specifically for T cells.
2025-09-17 12:27:43,826 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_leiden_umap'
2025-09-17 12:27:43,826 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_leiden_umap' with step parameters: {'cell_type': 'T cell'}
2025-09-17 12:27:43,826 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_leiden_umap called with kwargs: {'cell_type': 'T cell'}
2025-09-17 12:27:44,332 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 12:27:44,334 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 12:27:44,334 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpz4hv6geg.
2025-09-17 12:27:44,334 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 12:27:44,335 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpheixkor4.
2025-09-17 12:27:44,335 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpheixkor4
2025-09-17 12:27:44,875 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpz4hv6geg/index.html
2025-09-17 12:27:44,876 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 12:27:45,439 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 12:27:45,440 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 12:27:45,440 | INFO | kaleido.kaleido | Got 5C83
2025-09-17 12:27:45,440 | INFO | kaleido._kaleido_tab | Processing T_cell_Leiden_Clusters_from_parent_cell_type_UMAP_Plot.png
2025-09-17 12:27:45,440 | INFO | kaleido._kaleido_tab | Sending big command for T_cell_Leiden_Clusters_from_parent_cell_type_UMAP_Plot.png.
2025-09-17 12:27:45,546 | INFO | kaleido._kaleido_tab | Sent big command for T_cell_Leiden_Clusters_from_parent_cell_type_UMAP_Plot.png.
2025-09-17 12:27:45,548 | INFO | kaleido.kaleido | Reloading tab 5C83 before return.
2025-09-17 12:27:45,630 | INFO | kaleido.kaleido | Putting tab 5C83 back (queue size: 0).
2025-09-17 12:27:45,630 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 12:27:45,630 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 12:27:45,631 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:27:45,631 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:27:45,631 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:27:45,631 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:27:45,631 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:27:45,632 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:27:45,632 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:27:45,632 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:27:45,632 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:27:45,632 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:27:45,815 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:27:45,816 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:27:45,820 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 12:27:45,821 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 12:27:45,821 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp2ye9lj2v.
2025-09-17 12:27:45,822 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 12:27:45,822 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp1lo3b_bd.
2025-09-17 12:27:45,823 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp1lo3b_bd
2025-09-17 12:27:46,308 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp2ye9lj2v/index.html
2025-09-17 12:27:46,313 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 12:27:46,843 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 12:27:46,843 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 12:27:46,843 | INFO | kaleido.kaleido | Got FC4F
2025-09-17 12:27:46,844 | INFO | kaleido._kaleido_tab | Processing T_cell_Leiden_Clusters_from_parent_cell_type_UMAP_Plot.pdf
2025-09-17 12:27:46,844 | INFO | kaleido._kaleido_tab | Sending big command for T_cell_Leiden_Clusters_from_parent_cell_type_UMAP_Plot.pdf.
2025-09-17 12:27:46,914 | INFO | kaleido._kaleido_tab | Sent big command for T_cell_Leiden_Clusters_from_parent_cell_type_UMAP_Plot.pdf.
2025-09-17 12:27:46,972 | INFO | kaleido.kaleido | Reloading tab FC4F before return.
2025-09-17 12:27:47,053 | INFO | kaleido.kaleido | Putting tab FC4F back (queue size: 0).
2025-09-17 12:27:47,053 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 12:27:47,054 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 12:27:47,057 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:27:47,057 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:27:47,057 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:27:47,057 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:27:47,057 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:27:47,058 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:27:47,058 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:27:47,058 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:27:47,058 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:27:47,058 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:27:47,147 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:27:47,147 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:27:47,159 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-09-17 12:27:47,160 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_leiden_umap - HTML preserved
2025-09-17 12:27:47,160 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-09-17 12:27:47,161 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 12:27:47,161 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 12:27:47,161 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (3/3), running post-execution evaluation
2025-09-17 12:27:47,161 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 12:27:47,161 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 12:27:47,164 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:27:47,165 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:27:49,194 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:27:49,869 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:27:49,878 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:27:49,878 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 12:27:50,317 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:27:50,326 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:27:51,373 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:27:51,373 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-09-17 12:27:51,373 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 3 entries
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_leiden_umap (execution 3)
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_leiden_umap']
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: display_processed_umap(T cell)
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 1 missing steps for T cell
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 1 total supplementary steps
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 1 supplementary steps to execution plan (attempt 1/2)
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 3
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 1
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 12:27:51,374 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP for T cell....
2025-09-17 12:27:51,375 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Post-evaluation: display_processed_umap for T cell
2025-09-17 12:27:51,375 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_processed_umap'
2025-09-17 12:27:51,375 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_processed_umap' with step parameters: {'cell_type': 'T cell'}
2025-09-17 12:27:51,375 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_processed_umap called with kwargs: {'cell_type': 'T cell'}
2025-09-17 12:27:51,402 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 12:27:51,402 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 12:27:51,403 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp9vw214yg.
2025-09-17 12:27:51,403 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 12:27:51,403 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpmve4v1ed.
2025-09-17 12:27:51,403 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpmve4v1ed
2025-09-17 12:27:51,874 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp9vw214yg/index.html
2025-09-17 12:27:51,875 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 12:27:52,418 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 12:27:52,419 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 12:27:52,419 | INFO | kaleido.kaleido | Got DDF7
2025-09-17 12:27:52,419 | INFO | kaleido._kaleido_tab | Processing T_cell_from_parent_cell_type_UMAP_Plot.png
2025-09-17 12:27:52,419 | INFO | kaleido._kaleido_tab | Sending big command for T_cell_from_parent_cell_type_UMAP_Plot.png.
2025-09-17 12:27:52,519 | INFO | kaleido._kaleido_tab | Sent big command for T_cell_from_parent_cell_type_UMAP_Plot.png.
2025-09-17 12:27:52,521 | INFO | kaleido.kaleido | Reloading tab DDF7 before return.
2025-09-17 12:27:52,606 | INFO | kaleido.kaleido | Putting tab DDF7 back (queue size: 0).
2025-09-17 12:27:52,606 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 12:27:52,606 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 12:27:52,606 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:27:52,607 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:27:52,607 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:27:52,607 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:27:52,607 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:27:52,607 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:27:52,607 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:27:52,607 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:27:52,608 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:27:52,608 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:27:52,695 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:27:52,695 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:27:52,698 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 12:27:52,698 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 12:27:52,698 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpzujrq57h.
2025-09-17 12:27:52,699 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 12:27:52,699 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpmv815uwb.
2025-09-17 12:27:52,699 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpmv815uwb
2025-09-17 12:27:53,124 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpzujrq57h/index.html
2025-09-17 12:27:53,126 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 12:27:53,670 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 12:27:53,670 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 12:27:53,670 | INFO | kaleido.kaleido | Got CCA5
2025-09-17 12:27:53,671 | INFO | kaleido._kaleido_tab | Processing T_cell_from_parent_cell_type_UMAP_Plot.pdf
2025-09-17 12:27:53,671 | INFO | kaleido._kaleido_tab | Sending big command for T_cell_from_parent_cell_type_UMAP_Plot.pdf.
2025-09-17 12:27:53,738 | INFO | kaleido._kaleido_tab | Sent big command for T_cell_from_parent_cell_type_UMAP_Plot.pdf.
2025-09-17 12:27:53,800 | INFO | kaleido.kaleido | Reloading tab CCA5 before return.
2025-09-17 12:27:53,879 | INFO | kaleido.kaleido | Putting tab CCA5 back (queue size: 0).
2025-09-17 12:27:53,880 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 12:27:53,880 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 12:27:53,880 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:27:53,880 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:27:53,880 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:27:53,880 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:27:53,880 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:27:53,881 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:27:53,881 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:27:53,881 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:27:53,881 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:27:53,881 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:27:53,966 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:27:53,966 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:27:53,976 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-09-17 12:27:53,977 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_processed_umap - HTML preserved
2025-09-17 12:27:53,978 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-09-17 12:27:53,978 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 12:27:53,978 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 12:27:53,978 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-17 12:27:53,978 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 12:27:53,978 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 12:27:55,915 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:27:55,917 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:27:55,918 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:27:55,918 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:27:55,918 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:27:56,572 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:27:56,575 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:27:56,576 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 12:27:57,115 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:27:57,117 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:27:57,878 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:27:57,880 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-09-17 12:27:57,881 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-09-17 12:27:57,881 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 12:27:57,881 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-17 12:27:57,881 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_leiden_umap (execution 3)
2025-09-17 12:27:57,881 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 4)
2025-09-17 12:27:57,882 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_leiden_umap', 'display_processed_umap']
2025-09-17 12:27:57,882 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-17 12:27:57,882 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-17 12:27:57,882 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-09-17 12:27:57,882 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 12:27:57,882 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-17 12:27:57,883 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-17 12:27:57,883 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 12:27:57,883 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 12:27:57,883 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 12:27:57,883 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 12:27:57,885 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-17 12:27:57,885 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 12:27:57,885 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 12:28:00,567 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:28:01,227 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:28:01,229 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:28:01,229 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 12:28:01,812 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:28:01,819 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:28:02,508 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:28:02,511 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-09-17 12:28:02,512 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-09-17 12:28:02,512 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 12:28:02,512 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-17 12:28:02,512 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_leiden_umap (execution 3)
2025-09-17 12:28:02,512 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 4)
2025-09-17 12:28:02,512 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_leiden_umap', 'display_processed_umap']
2025-09-17 12:28:02,512 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-17 12:28:02,512 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-17 12:28:02,512 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-09-17 12:28:02,512 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 12:28:02,512 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-17 12:28:02,512 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-17 12:28:02,512 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 12:28:02,512 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 12:28:02,512 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 12:28:02,512 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 12:28:02,512 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 4 execution steps
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: display_leiden_umap for T cell
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 3 function: display_leiden_umap
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell'}
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_leiden_umap with VisualizationResultAccessor
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: display_processed_umap for T cell
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 4 function: display_processed_umap
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell'}
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_processed_umap with VisualizationResultAccessor
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 4 successful steps
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 500 characters for synthesis
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-17 12:28:02,513 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (56 chars)
2025-09-17 12:28:02,514 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-17 12:28:02,514 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-17 12:28:02,514 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-17 12:28:04,459 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:28:04,461 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 4 execution steps
2025-09-17 12:28:04,461 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: process_cells, success=True, has_result=True
2025-09-17 12:28:04,462 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: validate_processing_results, success=True, has_result=True
2025-09-17 12:28:04,462 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: display_leiden_umap, success=True, has_result=True
2025-09-17 12:28:04,462 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added plot plot_1: Leiden Umap - T cell (32270 chars)
2025-09-17 12:28:04,462 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: display_processed_umap, success=True, has_result=True
2025-09-17 12:28:04,462 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Skipping display_processed_umap - duplicate plot detected
2025-09-17 12:28:04,462 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 1 individual plots (total: 32,270 chars)
2025-09-17 12:28:04,463 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 1 plots, total size: 32,270 bytes
2025-09-17 12:28:04,463 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 1 individual plots
2025-09-17 12:28:04,463 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 1 plots + 1 text (plots first)
2025-09-17 12:28:04,463 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 2 total messages (plots first, then text)
2025-09-17 12:28:04,464 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (305 chars)
2025-09-17 12:28:04,524 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-17 12:28:04,525 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-17 12:28:17,774 | INFO | scchatbot.multi_agent_base | 🔄 Reusing session state for 'b05944ce' with 8 available cell types
2025-09-17 12:28:17,777 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-17 12:28:17,777 | INFO | scchatbot.workflow.node_base |    Current message: Show the overall UMAP...
2025-09-17 12:28:18,670 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:28:18,672 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-17 12:28:18,672 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-17 12:28:18,673 | INFO | scchatbot.workflow.nodes.input_processing | 🧹 CONTEXT CLEANUP: Removing old context message (56 chars)
2025-09-17 12:28:18,673 | INFO | scchatbot.workflow.nodes.input_processing | 🧹 CONTEXT CLEANUP: Removed 1 old context messages
2025-09-17 12:28:18,673 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-17 12:28:18,673 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 8 cell types: ['Epithelial cell', 'Stromal cell', 'B cell', 'Glial cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Mast cell', 'T cell']
2025-09-17 12:28:18,673 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 250 chars, starts with: 'Cell types currently available in the dataset:
  •...'
2025-09-17 12:28:18,674 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (250 chars)
2025-09-17 12:28:18,674 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'Cell types currently available in the dataset:
  • B cell
  • Epithelial cell
  • Glial cell
  • Mas...'
2025-09-17 12:28:18,674 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (273 chars)
2025-09-17 12:28:18,674 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Preserving 8 discovered cell types from previous operations
2025-09-17 12:28:18,674 | INFO | scchatbot.workflow.nodes.input_processing |    Preserved types: ['B cell', 'Epithelial cell', 'Glial cell', 'Mast cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Stromal cell', 'T cell']
2025-09-17 12:28:18,674 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-17 12:28:18,675 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-17 12:28:18,675 | INFO | scchatbot.workflow.node_base |    Current message: Show the overall UMAP...
2025-09-17 12:28:18,675 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-17 12:28:18,676 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-17 12:28:18,676 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 8
2025-09-17 12:28:18,676 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 4
2025-09-17 12:28:18,676 | INFO | scchatbot.workflow.nodes.planning |    • New types discovered: B cell, Mast cell, Mononuclear phagocyte, Natural killer cell, T cell
2025-09-17 12:28:18,676 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Show the overall UMAP'
2025-09-17 12:28:23,865 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:28:25,744 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:28:25,770 | INFO | scchatbot.workflow.nodes.planning | 🔍 No specific cell types identified in question
2025-09-17 12:28:25,771 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-09-17 12:28:25,771 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 1 steps
2025-09-17 12:28:25,771 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 1 steps
2025-09-17 12:28:25,771 | INFO | scchatbot.workflow.nodes.planning |    • 0 process_cells steps
2025-09-17 12:28:25,771 | INFO | scchatbot.workflow.nodes.planning |    • 0 validation steps
2025-09-17 12:28:25,771 | INFO | scchatbot.workflow.nodes.planning |    • 0 analysis steps
2025-09-17 12:28:25,771 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-17 12:28:25,771 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-17 12:28:25,772 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 12:28:25,772 | INFO | scchatbot.workflow.node_base |    Current message: Show the overall UMAP...
2025-09-17 12:28:25,773 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Generate a UMAP plot showing the complete dataset with cell types annotated.
2025-09-17 12:28:25,773 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_overall_umap'
2025-09-17 12:28:25,774 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_overall_umap' with step parameters: {'color_mode': 'cell_type'}
2025-09-17 12:28:25,774 | INFO | scchatbot.workflow.nodes.execution | ✅ display_overall_umap doesn't require cell_type parameter
2025-09-17 12:28:25,774 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_overall_umap called with kwargs: {'color_mode': 'cell_type'}
2025-09-17 12:28:25,809 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 12:28:25,810 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 12:28:25,810 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpdkd3xb77.
2025-09-17 12:28:25,811 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 12:28:25,811 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp76yfdab5.
2025-09-17 12:28:25,811 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp76yfdab5
2025-09-17 12:28:26,326 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpdkd3xb77/index.html
2025-09-17 12:28:26,327 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 12:28:26,883 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 12:28:26,883 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 12:28:26,884 | INFO | kaleido.kaleido | Got 6878
2025-09-17 12:28:26,884 | INFO | kaleido._kaleido_tab | Processing Overall_Cell_Types_UMAP_Global_View.png
2025-09-17 12:28:26,884 | INFO | kaleido._kaleido_tab | Sending big command for Overall_Cell_Types_UMAP_Global_View.png.
2025-09-17 12:28:27,705 | INFO | kaleido._kaleido_tab | Sent big command for Overall_Cell_Types_UMAP_Global_View.png.
2025-09-17 12:28:27,709 | INFO | kaleido.kaleido | Reloading tab 6878 before return.
2025-09-17 12:28:27,816 | INFO | kaleido.kaleido | Putting tab 6878 back (queue size: 0).
2025-09-17 12:28:27,816 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 12:28:27,816 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 12:28:27,817 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:28:27,817 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:28:27,817 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:28:27,817 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:28:27,817 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:28:27,818 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:28:27,818 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:28:27,818 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:28:27,818 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:28:27,818 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:28:27,908 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:28:27,908 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:28:27,911 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 12:28:27,912 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 12:28:27,912 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpay5l1vmp.
2025-09-17 12:28:27,912 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 12:28:27,913 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpt0xbqku2.
2025-09-17 12:28:27,913 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpt0xbqku2
2025-09-17 12:28:28,339 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpay5l1vmp/index.html
2025-09-17 12:28:28,341 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 12:28:28,872 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 12:28:28,872 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 12:28:28,872 | INFO | kaleido.kaleido | Got BB7A
2025-09-17 12:28:28,873 | INFO | kaleido._kaleido_tab | Processing Overall_Cell_Types_UMAP_Global_View.pdf
2025-09-17 12:28:28,873 | INFO | kaleido._kaleido_tab | Sending big command for Overall_Cell_Types_UMAP_Global_View.pdf.
2025-09-17 12:28:29,246 | INFO | kaleido._kaleido_tab | Sent big command for Overall_Cell_Types_UMAP_Global_View.pdf.
2025-09-17 12:28:29,454 | INFO | kaleido.kaleido | Reloading tab BB7A before return.
2025-09-17 12:28:29,542 | INFO | kaleido.kaleido | Putting tab BB7A back (queue size: 0).
2025-09-17 12:28:29,542 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 12:28:29,542 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 12:28:29,542 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:28:29,542 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:28:29,542 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:28:29,542 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:28:29,542 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:28:29,543 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:28:29,543 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:28:29,543 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:28:29,543 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:28:29,543 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:28:29,633 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:28:29,633 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:28:29,643 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-09-17 12:28:29,644 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_overall_umap - HTML preserved
2025-09-17 12:28:29,645 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-09-17 12:28:29,645 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 12:28:29,645 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 12:28:29,645 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (1/1), running post-execution evaluation
2025-09-17 12:28:29,645 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 12:28:29,645 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 12:28:30,761 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:28:30,766 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:28:30,766 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:28:30,766 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:28:30,767 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:28:31,590 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:28:31,596 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:28:31,596 | INFO | scchatbot.workflow.nodes.evaluation | 📋 No specific cell types mentioned, skipping post-execution evaluation
2025-09-17 12:28:31,596 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 12:28:31,597 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 1
2025-09-17 12:28:31,597 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 1
2025-09-17 12:28:31,598 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 12:28:31,598 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 12:28:31,598 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 12:28:31,598 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 12:28:31,599 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (1/1), running post-execution evaluation
2025-09-17 12:28:31,600 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 12:28:31,600 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 12:28:34,248 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:28:34,781 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:28:34,798 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:28:34,799 | INFO | scchatbot.workflow.nodes.evaluation | 📋 No specific cell types mentioned, skipping post-execution evaluation
2025-09-17 12:28:34,799 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 12:28:34,799 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 1
2025-09-17 12:28:34,799 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 1
2025-09-17 12:28:34,800 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 12:28:34,800 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 12:28:34,800 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 12:28:34,800 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 12:28:34,801 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-17 12:28:34,801 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-17 12:28:34,801 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 1 execution steps
2025-09-17 12:28:34,801 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: display_overall_umap for step_0
2025-09-17 12:28:34,801 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 1 function: display_overall_umap
2025-09-17 12:28:34,802 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'color_mode': 'cell_type'}
2025-09-17 12:28:34,802 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_overall_umap with VisualizationResultAccessor
2025-09-17 12:28:34,802 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 1 successful steps
2025-09-17 12:28:34,802 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 257 characters for synthesis
2025-09-17 12:28:34,802 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-17 12:28:34,802 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-17 12:28:34,802 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (273 chars)
2025-09-17 12:28:34,802 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-17 12:28:34,802 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-17 12:28:34,802 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-17 12:28:36,802 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:28:36,815 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 1 execution steps
2025-09-17 12:28:36,817 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: display_overall_umap, success=True, has_result=True
2025-09-17 12:28:36,818 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added plot plot_1: Overall Umap (112690 chars)
2025-09-17 12:28:36,819 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 1 individual plots (total: 112,690 chars)
2025-09-17 12:28:36,820 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 1 plots, total size: 112,690 bytes
2025-09-17 12:28:36,820 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 1 individual plots
2025-09-17 12:28:36,820 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 1 plots + 1 text (plots first)
2025-09-17 12:28:36,821 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 2 total messages (plots first, then text)
2025-09-17 12:28:36,823 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (438 chars)
2025-09-17 12:28:36,868 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-17 12:28:36,868 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-17 12:31:20,471 | INFO | django.utils.autoreload | /Users/seanchiu/Desktop/scchat_fin/scChat/scchatbot/analysis/visualizations.py changed, reloading.
2025-09-17 12:31:20,873 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:31:20,873 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:31:22,708 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-17 12:31:27,293 | INFO | faiss.loader | Loading faiss.
2025-09-17 12:31:27,308 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-17 12:31:28,138 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 12:31:29,886 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 12:31:29,940 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-17 12:31:29,941 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 12:31:29,951 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-17 12:31:30,872 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-17 12:31:30,873 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-17 12:31:30,874 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-17 12:31:49,994 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:31:54,352 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:33:08,898 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:33:10,029 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-09-17 12:33:10,030 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-09-17 12:33:10,030 | INFO | scchatbot.multi_agent_base | 1
2025-09-17 12:33:10,430 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-09-17 12:33:10,430 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-17 12:33:11,914 | INFO | scchatbot.multi_agent_base | 2
2025-09-17 12:33:11,917 | INFO | scchatbot.multi_agent_base | 3
2025-09-17 12:33:11,917 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-09-17 12:34:51,253 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 12:34:54,553 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 12:34:57,566 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 12:34:58,762 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'b05944ce'
2025-09-17 12:34:58,763 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-17 12:34:58,763 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP for T cell....
2025-09-17 12:35:00,217 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:35:00,233 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-17 12:35:00,238 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-17 12:35:00,239 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-17 12:35:00,240 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 0 cell types: []
2025-09-17 12:35:00,241 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 33 chars, starts with: 'No current session data available...'
2025-09-17 12:35:00,242 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (33 chars)
2025-09-17 12:35:00,244 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'No current session data available...'
2025-09-17 12:35:00,245 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (56 chars)
2025-09-17 12:35:00,246 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 4 initial cell types
2025-09-17 12:35:00,246 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-17 12:35:00,248 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-17 12:35:00,248 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP for T cell....
2025-09-17 12:35:00,249 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-17 12:35:00,249 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-17 12:35:00,249 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 4
2025-09-17 12:35:00,249 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-09-17 12:35:00,249 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Show the leiden UMAP for T cell.'
2025-09-17 12:35:07,858 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:35:09,423 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:35:09,424 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-09-17 12:35:09,424 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Epithelial cell', 'Stromal cell', 'Immune cell', 'Glial cell']
2025-09-17 12:35:09,459 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-09-17 12:35:09,478 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-09-17 12:35:09,478 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-09-17 12:35:09,478 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-09-17 12:35:09,478 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-09-17 12:35:09,478 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-09-17 12:35:09,478 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-09-17 12:35:09,478 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-09-17 12:35:09,479 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 0
2025-09-17 12:35:09,479 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-09-17 12:35:09,479 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-09-17 12:35:09,479 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-09-17 12:35:09,479 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 3 steps
2025-09-17 12:35:09,479 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 3 steps
2025-09-17 12:35:09,479 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-09-17 12:35:09,479 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-09-17 12:35:09,479 | INFO | scchatbot.workflow.nodes.planning |    • 1 analysis steps
2025-09-17 12:35:09,479 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-17 12:35:09,479 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-17 12:35:09,479 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 12:35:09,479 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP for T cell....
2025-09-17 12:35:09,481 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-09-17 12:35:09,481 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-09-17 12:35:15,818 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:35:25,103 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:37:28,290 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:37:28,295 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-09-17 12:37:28,295 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-09-17 12:37:28,299 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['T cell', 'B cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Mast cell']
2025-09-17 12:37:28,328 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: T cell
2025-09-17 12:37:28,328 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: B cell
2025-09-17 12:37:28,328 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mononuclear phagocyte
2025-09-17 12:37:28,328 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Natural killer cell
2025-09-17 12:37:28,328 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mast cell
2025-09-17 12:37:28,329 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-09-17 12:37:28,329 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-09-17 12:37:28,329 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 12:37:28,329 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 12:37:28,330 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-09-17 12:37:28,330 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-09-17 12:37:28,330 | INFO | scchatbot.workflow.node_base |    Current message: Validating Immune cell -> ['T cell']...
2025-09-17 12:37:28,330 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'T cell'
2025-09-17 12:37:28,330 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-09-17 12:37:28,330 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Validation passed: All 1 expected cell types found successfully
2025-09-17 12:37:28,330 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: success
2025-09-17 12:37:28,330 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['T cell'], found=['T cell'], missing=[]
2025-09-17 12:37:28,330 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'success', 'message': 'All 1 expected cell types found successfully', 'found_children': ['T cell'], 'missing_children': [], 'available_types': ['B cell', 'Mast cell', 'T cell', 'Epithelial cell', 'Glial cell', 'Stromal cell', 'Natural killer cell', 'Mononuclear phagocyte']}
2025-09-17 12:37:28,331 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: []
2025-09-17 12:37:28,331 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 1 remaining steps...
2025-09-17 12:37:28,331 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3: display_leiden_umap(cell_type='T cell')
2025-09-17 12:37:28,331 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3 cell type 'T cell' not in missing list []
2025-09-17 12:37:28,331 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 3
2025-09-17 12:37:28,331 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 12:37:28,331 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP for T cell....
2025-09-17 12:37:28,331 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Generate a UMAP plot colored by leiden clusters specifically for T cells.
2025-09-17 12:37:28,331 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_leiden_umap'
2025-09-17 12:37:28,332 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_leiden_umap' with step parameters: {'cell_type': 'T cell'}
2025-09-17 12:37:28,332 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_leiden_umap called with kwargs: {'cell_type': 'T cell'}
2025-09-17 12:37:28,907 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 12:37:28,910 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 12:37:28,910 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpamwe64wt.
2025-09-17 12:37:28,910 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 12:37:28,911 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpmzq1dmwl.
2025-09-17 12:37:28,911 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpmzq1dmwl
2025-09-17 12:37:29,540 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpamwe64wt/index.html
2025-09-17 12:37:29,541 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 12:37:30,069 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 12:37:30,070 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 12:37:30,070 | INFO | kaleido.kaleido | Got 56E9
2025-09-17 12:37:30,070 | INFO | kaleido._kaleido_tab | Processing T_cell_Leiden_Clusters_from_parent_cell_type_UMAP_Plot.png
2025-09-17 12:37:30,070 | INFO | kaleido._kaleido_tab | Sending big command for T_cell_Leiden_Clusters_from_parent_cell_type_UMAP_Plot.png.
2025-09-17 12:37:30,164 | INFO | kaleido._kaleido_tab | Sent big command for T_cell_Leiden_Clusters_from_parent_cell_type_UMAP_Plot.png.
2025-09-17 12:37:30,166 | INFO | kaleido.kaleido | Reloading tab 56E9 before return.
2025-09-17 12:37:30,245 | INFO | kaleido.kaleido | Putting tab 56E9 back (queue size: 0).
2025-09-17 12:37:30,245 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 12:37:30,245 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 12:37:30,246 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:37:30,246 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:37:30,246 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:37:30,246 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:37:30,246 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:37:30,247 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:37:30,248 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:37:30,248 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:37:30,248 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:37:30,248 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:37:30,343 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:37:30,343 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:37:30,347 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 12:37:30,348 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 12:37:30,349 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpvqm4hjis.
2025-09-17 12:37:30,349 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 12:37:30,350 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp49ejjgz2.
2025-09-17 12:37:30,350 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp49ejjgz2
2025-09-17 12:37:30,771 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpvqm4hjis/index.html
2025-09-17 12:37:30,772 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 12:37:31,325 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 12:37:31,326 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 12:37:31,326 | INFO | kaleido.kaleido | Got 8726
2025-09-17 12:37:31,326 | INFO | kaleido._kaleido_tab | Processing T_cell_Leiden_Clusters_from_parent_cell_type_UMAP_Plot.pdf
2025-09-17 12:37:31,326 | INFO | kaleido._kaleido_tab | Sending big command for T_cell_Leiden_Clusters_from_parent_cell_type_UMAP_Plot.pdf.
2025-09-17 12:37:31,394 | INFO | kaleido._kaleido_tab | Sent big command for T_cell_Leiden_Clusters_from_parent_cell_type_UMAP_Plot.pdf.
2025-09-17 12:37:31,467 | INFO | kaleido.kaleido | Reloading tab 8726 before return.
2025-09-17 12:37:31,552 | INFO | kaleido.kaleido | Putting tab 8726 back (queue size: 0).
2025-09-17 12:37:31,552 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 12:37:31,552 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 12:37:31,552 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:37:31,552 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:37:31,552 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:37:31,552 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:37:31,552 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:37:31,554 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:37:31,554 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:37:31,560 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:37:31,560 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:37:31,560 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:37:31,639 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:37:31,639 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:37:31,651 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-09-17 12:37:31,652 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_leiden_umap - HTML preserved
2025-09-17 12:37:31,652 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-09-17 12:37:31,652 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 12:37:31,652 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 12:37:31,653 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (3/3), running post-execution evaluation
2025-09-17 12:37:31,653 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 12:37:31,653 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 12:37:32,992 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:37:33,670 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:37:33,695 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:37:33,696 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 12:37:34,335 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:37:34,337 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:37:35,128 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:37:35,139 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-09-17 12:37:35,140 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-09-17 12:37:35,141 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 12:37:35,141 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 3 entries
2025-09-17 12:37:35,141 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_leiden_umap (execution 3)
2025-09-17 12:37:35,141 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_leiden_umap']
2025-09-17 12:37:35,141 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: display_processed_umap(T cell)
2025-09-17 12:37:35,142 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 1 missing steps for T cell
2025-09-17 12:37:35,142 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 1 total supplementary steps
2025-09-17 12:37:35,142 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-09-17 12:37:35,142 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 1 supplementary steps to execution plan (attempt 1/2)
2025-09-17 12:37:35,142 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-09-17 12:37:35,143 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 12:37:35,143 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 3
2025-09-17 12:37:35,143 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-09-17 12:37:35,143 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 12:37:35,144 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 1
2025-09-17 12:37:35,144 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 12:37:35,144 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 12:37:35,145 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 12:37:35,146 | INFO | scchatbot.workflow.node_base |    Current message: Show the leiden UMAP for T cell....
2025-09-17 12:37:35,148 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Post-evaluation: display_processed_umap for T cell
2025-09-17 12:37:35,148 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_processed_umap'
2025-09-17 12:37:35,149 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_processed_umap' with step parameters: {'cell_type': 'T cell'}
2025-09-17 12:37:35,150 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_processed_umap called with kwargs: {'cell_type': 'T cell'}
2025-09-17 12:37:35,191 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 12:37:35,191 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 12:37:35,192 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp61kl8q6r.
2025-09-17 12:37:35,192 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 12:37:35,192 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpymshsztf.
2025-09-17 12:37:35,193 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpymshsztf
2025-09-17 12:37:35,623 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp61kl8q6r/index.html
2025-09-17 12:37:35,625 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 12:37:36,139 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 12:37:36,139 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 12:37:36,139 | INFO | kaleido.kaleido | Got 9383
2025-09-17 12:37:36,139 | INFO | kaleido._kaleido_tab | Processing T_cell_from_parent_cell_type_UMAP_Plot.png
2025-09-17 12:37:36,140 | INFO | kaleido._kaleido_tab | Sending big command for T_cell_from_parent_cell_type_UMAP_Plot.png.
2025-09-17 12:37:36,226 | INFO | kaleido._kaleido_tab | Sent big command for T_cell_from_parent_cell_type_UMAP_Plot.png.
2025-09-17 12:37:36,228 | INFO | kaleido.kaleido | Reloading tab 9383 before return.
2025-09-17 12:37:36,305 | INFO | kaleido.kaleido | Putting tab 9383 back (queue size: 0).
2025-09-17 12:37:36,305 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 12:37:36,305 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 12:37:36,305 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:37:36,305 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:37:36,306 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:37:36,306 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:37:36,306 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:37:36,306 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:37:36,306 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:37:36,306 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:37:36,307 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:37:36,307 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:37:36,392 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:37:36,392 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:37:36,395 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 12:37:36,395 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 12:37:36,395 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpi7o15lff.
2025-09-17 12:37:36,396 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 12:37:36,396 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpqdpmys7d.
2025-09-17 12:37:36,396 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpqdpmys7d
2025-09-17 12:37:36,828 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpi7o15lff/index.html
2025-09-17 12:37:36,831 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 12:37:37,350 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 12:37:37,351 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 12:37:37,351 | INFO | kaleido.kaleido | Got 5DBA
2025-09-17 12:37:37,351 | INFO | kaleido._kaleido_tab | Processing T_cell_from_parent_cell_type_UMAP_Plot.pdf
2025-09-17 12:37:37,351 | INFO | kaleido._kaleido_tab | Sending big command for T_cell_from_parent_cell_type_UMAP_Plot.pdf.
2025-09-17 12:37:37,416 | INFO | kaleido._kaleido_tab | Sent big command for T_cell_from_parent_cell_type_UMAP_Plot.pdf.
2025-09-17 12:37:37,471 | INFO | kaleido.kaleido | Reloading tab 5DBA before return.
2025-09-17 12:37:37,544 | INFO | kaleido.kaleido | Putting tab 5DBA back (queue size: 0).
2025-09-17 12:37:37,544 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 12:37:37,544 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 12:37:37,546 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:37:37,546 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:37:37,546 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:37:37,546 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:37:37,546 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:37:37,546 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:37:37,547 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:37:37,547 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:37:37,547 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:37:37,547 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:37:37,634 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:37:37,634 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:37:37,645 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-09-17 12:37:37,646 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_processed_umap - HTML preserved
2025-09-17 12:37:37,646 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-09-17 12:37:37,646 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 12:37:37,646 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 12:37:37,647 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-17 12:37:37,647 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 12:37:37,647 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 12:37:37,651 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:37:37,651 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:37:37,651 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:37:37,651 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:37:39,061 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:37:39,861 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:37:39,877 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:37:39,878 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 12:37:40,907 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:37:40,911 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:37:41,564 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:37:41,567 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-09-17 12:37:41,567 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-09-17 12:37:41,567 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 12:37:41,567 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-17 12:37:41,567 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_leiden_umap (execution 3)
2025-09-17 12:37:41,567 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 4)
2025-09-17 12:37:41,567 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_leiden_umap', 'display_processed_umap']
2025-09-17 12:37:41,568 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-17 12:37:41,568 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-17 12:37:41,568 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-09-17 12:37:41,568 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 12:37:41,568 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-17 12:37:41,568 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-17 12:37:41,568 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 12:37:41,568 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 12:37:41,568 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 12:37:41,568 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 12:37:41,573 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-17 12:37:41,573 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 12:37:41,574 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 12:37:42,998 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:37:43,549 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:37:43,554 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:37:43,555 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 12:37:44,158 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:37:44,161 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:37:45,714 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:37:45,716 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["display_processed_umap"]
```' (length: 38)
2025-09-17 12:37:45,717 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['display_processed_umap']
2025-09-17 12:37:45,717 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 12:37:45,717 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-17 12:37:45,718 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_leiden_umap (execution 3)
2025-09-17 12:37:45,718 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_processed_umap (execution 4)
2025-09-17 12:37:45,718 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['display_leiden_umap', 'display_processed_umap']
2025-09-17 12:37:45,718 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-17 12:37:45,718 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-17 12:37:45,718 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for general_comparison question
2025-09-17 12:37:45,718 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 12:37:45,718 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-17 12:37:45,719 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-17 12:37:45,719 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 12:37:45,719 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 12:37:45,719 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 12:37:45,719 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 12:37:45,719 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-17 12:37:45,721 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-17 12:37:45,721 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 4 execution steps
2025-09-17 12:37:45,721 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-09-17 12:37:45,721 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-09-17 12:37:45,722 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-09-17 12:37:45,722 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-09-17 12:37:45,722 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: display_leiden_umap for T cell
2025-09-17 12:37:45,723 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 3 function: display_leiden_umap
2025-09-17 12:37:45,723 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell'}
2025-09-17 12:37:45,724 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_leiden_umap with VisualizationResultAccessor
2025-09-17 12:37:45,724 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: display_processed_umap for T cell
2025-09-17 12:37:45,724 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 4 function: display_processed_umap
2025-09-17 12:37:45,724 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell'}
2025-09-17 12:37:45,724 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_processed_umap with VisualizationResultAccessor
2025-09-17 12:37:45,724 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 4 successful steps
2025-09-17 12:37:45,725 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 500 characters for synthesis
2025-09-17 12:37:45,725 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-17 12:37:45,725 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-17 12:37:45,725 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (56 chars)
2025-09-17 12:37:45,726 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-17 12:37:45,726 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-17 12:37:45,727 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-17 12:37:49,708 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:37:49,720 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 4 execution steps
2025-09-17 12:37:49,720 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: process_cells, success=True, has_result=True
2025-09-17 12:37:49,720 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: validate_processing_results, success=True, has_result=True
2025-09-17 12:37:49,720 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: display_leiden_umap, success=True, has_result=True
2025-09-17 12:37:49,720 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added plot plot_1: Leiden Umap - T cell (32270 chars)
2025-09-17 12:37:49,720 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: display_processed_umap, success=True, has_result=True
2025-09-17 12:37:49,721 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Skipping display_processed_umap - duplicate plot detected
2025-09-17 12:37:49,721 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 1 individual plots (total: 32,270 chars)
2025-09-17 12:37:49,721 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 1 plots, total size: 32,270 bytes
2025-09-17 12:37:49,721 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 1 individual plots
2025-09-17 12:37:49,721 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 1 plots + 1 text (plots first)
2025-09-17 12:37:49,721 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 2 total messages (plots first, then text)
2025-09-17 12:37:49,721 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (284 chars)
2025-09-17 12:37:49,778 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-17 12:37:49,778 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-17 12:37:59,044 | INFO | scchatbot.multi_agent_base | 🔄 Reusing session state for 'b05944ce' with 8 available cell types
2025-09-17 12:37:59,047 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-17 12:37:59,048 | INFO | scchatbot.workflow.node_base |    Current message: Show the overall UMAP...
2025-09-17 12:37:59,912 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:37:59,916 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-17 12:37:59,916 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-17 12:37:59,916 | INFO | scchatbot.workflow.nodes.input_processing | 🧹 CONTEXT CLEANUP: Removing old context message (56 chars)
2025-09-17 12:37:59,917 | INFO | scchatbot.workflow.nodes.input_processing | 🧹 CONTEXT CLEANUP: Removed 1 old context messages
2025-09-17 12:37:59,917 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-17 12:37:59,917 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 8 cell types: ['B cell', 'Mast cell', 'T cell', 'Epithelial cell', 'Glial cell', 'Stromal cell', 'Natural killer cell', 'Mononuclear phagocyte']
2025-09-17 12:37:59,917 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 250 chars, starts with: 'Cell types currently available in the dataset:
  •...'
2025-09-17 12:37:59,917 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (250 chars)
2025-09-17 12:37:59,917 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'Cell types currently available in the dataset:
  • B cell
  • Epithelial cell
  • Glial cell
  • Mas...'
2025-09-17 12:37:59,917 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (273 chars)
2025-09-17 12:37:59,917 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Preserving 8 discovered cell types from previous operations
2025-09-17 12:37:59,918 | INFO | scchatbot.workflow.nodes.input_processing |    Preserved types: ['B cell', 'Epithelial cell', 'Glial cell', 'Mast cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Stromal cell', 'T cell']
2025-09-17 12:37:59,919 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-17 12:37:59,920 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-17 12:37:59,921 | INFO | scchatbot.workflow.node_base |    Current message: Show the overall UMAP...
2025-09-17 12:37:59,921 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-17 12:37:59,921 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-17 12:37:59,921 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 8
2025-09-17 12:37:59,921 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 4
2025-09-17 12:37:59,921 | INFO | scchatbot.workflow.nodes.planning |    • New types discovered: B cell, Mast cell, Mononuclear phagocyte, Natural killer cell, T cell
2025-09-17 12:37:59,921 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Show the overall UMAP'
2025-09-17 12:38:04,359 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:38:06,807 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:38:06,808 | INFO | scchatbot.workflow.nodes.planning | 🔍 No specific cell types identified in question
2025-09-17 12:38:06,808 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 0 enrichment steps
2025-09-17 12:38:06,808 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 1 steps
2025-09-17 12:38:06,808 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 1 steps
2025-09-17 12:38:06,808 | INFO | scchatbot.workflow.nodes.planning |    • 0 process_cells steps
2025-09-17 12:38:06,808 | INFO | scchatbot.workflow.nodes.planning |    • 0 validation steps
2025-09-17 12:38:06,808 | INFO | scchatbot.workflow.nodes.planning |    • 0 analysis steps
2025-09-17 12:38:06,808 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-17 12:38:06,808 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-17 12:38:06,809 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 12:38:06,809 | INFO | scchatbot.workflow.node_base |    Current message: Show the overall UMAP...
2025-09-17 12:38:06,809 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Generate a UMAP plot that provides a complete view of the dataset, highlighting the distribution of all available cell types.
2025-09-17 12:38:06,809 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_overall_umap'
2025-09-17 12:38:06,810 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_overall_umap' with step parameters: {'color_mode': 'cell_type'}
2025-09-17 12:38:06,810 | INFO | scchatbot.workflow.nodes.execution | ✅ display_overall_umap doesn't require cell_type parameter
2025-09-17 12:38:06,810 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_overall_umap called with kwargs: {'color_mode': 'cell_type'}
2025-09-17 12:38:06,848 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 12:38:06,849 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 12:38:06,849 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp8guhbjz1.
2025-09-17 12:38:06,850 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 12:38:06,850 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpb_4ik3qc.
2025-09-17 12:38:06,850 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpb_4ik3qc
2025-09-17 12:38:07,355 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp8guhbjz1/index.html
2025-09-17 12:38:07,357 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 12:38:07,887 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 12:38:07,887 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 12:38:07,887 | INFO | kaleido.kaleido | Got 6654
2025-09-17 12:38:07,887 | INFO | kaleido._kaleido_tab | Processing Overall_Cell_Types_UMAP_Global_View.png
2025-09-17 12:38:07,887 | INFO | kaleido._kaleido_tab | Sending big command for Overall_Cell_Types_UMAP_Global_View.png.
2025-09-17 12:38:08,747 | INFO | kaleido._kaleido_tab | Sent big command for Overall_Cell_Types_UMAP_Global_View.png.
2025-09-17 12:38:08,749 | INFO | kaleido.kaleido | Reloading tab 6654 before return.
2025-09-17 12:38:08,858 | INFO | kaleido.kaleido | Putting tab 6654 back (queue size: 0).
2025-09-17 12:38:08,858 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 12:38:08,858 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 12:38:08,858 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:38:08,858 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:38:08,859 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:38:08,859 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:38:08,859 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:38:08,860 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:38:08,860 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:38:08,860 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:38:08,860 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:38:08,860 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:38:08,950 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:38:08,951 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:38:08,953 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 12:38:08,954 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 12:38:08,954 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp28jrebbf.
2025-09-17 12:38:08,954 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 12:38:08,955 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpcvf6jkw_.
2025-09-17 12:38:08,955 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpcvf6jkw_
2025-09-17 12:38:09,389 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp28jrebbf/index.html
2025-09-17 12:38:09,389 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 12:38:10,065 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 12:38:10,065 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 12:38:10,066 | INFO | kaleido.kaleido | Got 6B5F
2025-09-17 12:38:10,066 | INFO | kaleido._kaleido_tab | Processing Overall_Cell_Types_UMAP_Global_View.pdf
2025-09-17 12:38:10,066 | INFO | kaleido._kaleido_tab | Sending big command for Overall_Cell_Types_UMAP_Global_View.pdf.
2025-09-17 12:38:10,438 | INFO | kaleido._kaleido_tab | Sent big command for Overall_Cell_Types_UMAP_Global_View.pdf.
2025-09-17 12:38:10,648 | INFO | kaleido.kaleido | Reloading tab 6B5F before return.
2025-09-17 12:38:10,742 | INFO | kaleido.kaleido | Putting tab 6B5F back (queue size: 0).
2025-09-17 12:38:10,742 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 12:38:10,742 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 12:38:10,742 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:38:10,742 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:38:10,742 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:38:10,742 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:38:10,742 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:38:10,743 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:38:10,743 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:38:10,743 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 12:38:10,744 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 12:38:10,744 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 12:38:10,834 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:38:10,834 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:38:10,845 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-09-17 12:38:10,846 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_overall_umap - HTML preserved
2025-09-17 12:38:10,846 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-09-17 12:38:10,846 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 12:38:10,846 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 12:38:10,847 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (1/1), running post-execution evaluation
2025-09-17 12:38:10,847 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 12:38:10,847 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 12:38:12,756 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:38:12,761 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:38:12,761 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:38:12,762 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 12:38:12,762 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 12:38:13,340 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:38:13,367 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:38:13,368 | INFO | scchatbot.workflow.nodes.evaluation | 📋 No specific cell types mentioned, skipping post-execution evaluation
2025-09-17 12:38:13,368 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 12:38:13,368 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 1
2025-09-17 12:38:13,368 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 1
2025-09-17 12:38:13,369 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 12:38:13,369 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 12:38:13,369 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 12:38:13,369 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 12:38:13,370 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (1/1), running post-execution evaluation
2025-09-17 12:38:13,371 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 12:38:13,371 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 12:38:14,934 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:38:15,523 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:38:15,525 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: general_comparison
2025-09-17 12:38:15,526 | INFO | scchatbot.workflow.nodes.evaluation | 📋 No specific cell types mentioned, skipping post-execution evaluation
2025-09-17 12:38:15,526 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 12:38:15,526 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 1
2025-09-17 12:38:15,526 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 1
2025-09-17 12:38:15,526 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 12:38:15,527 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 12:38:15,527 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 12:38:15,527 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 12:38:15,528 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-17 12:38:15,529 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-17 12:38:15,529 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 1 execution steps
2025-09-17 12:38:15,530 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: display_overall_umap for step_0
2025-09-17 12:38:15,530 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 1 function: display_overall_umap
2025-09-17 12:38:15,530 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'color_mode': 'cell_type'}
2025-09-17 12:38:15,531 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_overall_umap with VisualizationResultAccessor
2025-09-17 12:38:15,531 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 1 successful steps
2025-09-17 12:38:15,531 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 257 characters for synthesis
2025-09-17 12:38:15,531 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-17 12:38:15,532 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-17 12:38:15,532 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (273 chars)
2025-09-17 12:38:15,533 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-17 12:38:15,533 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-17 12:38:15,533 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-17 12:38:17,663 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 12:38:17,669 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 1 execution steps
2025-09-17 12:38:17,670 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: display_overall_umap, success=True, has_result=True
2025-09-17 12:38:17,670 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added plot plot_1: Overall Umap (112689 chars)
2025-09-17 12:38:17,670 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 1 individual plots (total: 112,689 chars)
2025-09-17 12:38:17,672 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 1 plots, total size: 112,689 bytes
2025-09-17 12:38:17,672 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 1 individual plots
2025-09-17 12:38:17,673 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 1 plots + 1 text (plots first)
2025-09-17 12:38:17,673 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 2 total messages (plots first, then text)
2025-09-17 12:38:17,676 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (374 chars)
2025-09-17 12:38:17,724 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-17 12:38:17,724 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-17 15:01:01,374 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-17 15:01:07,482 | INFO | faiss.loader | Loading faiss.
2025-09-17 15:01:07,522 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-17 15:01:08,397 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 15:01:10,329 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 15:01:10,420 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-17 15:01:10,420 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 15:01:10,432 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-17 15:01:11,297 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-17 15:01:11,298 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-17 15:01:11,300 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-17 15:01:27,552 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:01:43,992 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:03:27,714 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:03:28,718 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-09-17 15:03:28,718 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-09-17 15:03:28,719 | INFO | scchatbot.multi_agent_base | 1
2025-09-17 15:03:29,152 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-09-17 15:03:29,152 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-17 15:03:30,757 | INFO | scchatbot.multi_agent_base | 2
2025-09-17 15:03:30,760 | INFO | scchatbot.multi_agent_base | 3
2025-09-17 15:03:30,760 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-09-17 15:03:41,825 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 15:03:44,848 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 15:03:47,857 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 15:03:51,522 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'b05944ce'
2025-09-17 15:03:51,524 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-17 15:03:51,524 | INFO | scchatbot.workflow.node_base |    Current message: Do GO enrichment analysis to T cell....
2025-09-17 15:03:53,851 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:03:53,863 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-17 15:03:53,864 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-17 15:03:53,864 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-17 15:03:53,864 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 0 cell types: []
2025-09-17 15:03:53,864 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 33 chars, starts with: 'No current session data available...'
2025-09-17 15:03:53,864 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (33 chars)
2025-09-17 15:03:53,864 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'No current session data available...'
2025-09-17 15:03:53,865 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (56 chars)
2025-09-17 15:03:53,865 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 4 initial cell types
2025-09-17 15:03:53,865 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-17 15:03:53,865 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-17 15:03:53,866 | INFO | scchatbot.workflow.node_base |    Current message: Do GO enrichment analysis to T cell....
2025-09-17 15:03:53,866 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-17 15:03:53,866 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-17 15:03:53,866 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 4
2025-09-17 15:03:53,866 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-09-17 15:03:53,866 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Do GO enrichment analysis to T cell.'
2025-09-17 15:04:01,681 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:04:04,239 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:04:04,241 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-09-17 15:04:04,241 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Epithelial cell', 'Stromal cell', 'Immune cell', 'Glial cell']
2025-09-17 15:04:04,241 | INFO | scchatbot.workflow.nodes.planning | 📋 Preserving LLM analysis step: perform_enrichment_analyses(Immune cell)
2025-09-17 15:04:04,241 | INFO | scchatbot.workflow.nodes.planning | 🔧 Fixed cell type name using RAG-validated type: 'Immune cell' → 'T cell'
2025-09-17 15:04:04,268 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-09-17 15:04:04,280 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-09-17 15:04:04,280 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-09-17 15:04:04,280 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-09-17 15:04:04,281 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-09-17 15:04:04,281 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-09-17 15:04:04,281 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-09-17 15:04:04,281 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-09-17 15:04:04,281 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 1
2025-09-17 15:04:04,281 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-09-17 15:04:04,281 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-09-17 15:04:04,281 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 1 enrichment steps
2025-09-17 15:04:04,281 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 4 steps
2025-09-17 15:04:04,281 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Extracting keywords for step 3: T cell
2025-09-17 15:04:05,002 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:04:05,013 | INFO | scchatbot.workflow.nodes.planning | 🧠 LLM enrichment analysis: 'EXPLICIT_METHOD:go'
2025-09-17 15:04:05,013 | INFO | scchatbot.workflow.nodes.planning | 🎯 Explicit method request detected: ['go']
2025-09-17 15:04:05,013 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 4 steps
2025-09-17 15:04:05,013 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-09-17 15:04:05,014 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-09-17 15:04:05,014 | INFO | scchatbot.workflow.nodes.planning |    • 2 analysis steps
2025-09-17 15:04:05,015 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-17 15:04:05,015 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-17 15:04:05,017 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 15:04:05,017 | INFO | scchatbot.workflow.node_base |    Current message: Do GO enrichment analysis to T cell....
2025-09-17 15:04:05,019 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-09-17 15:04:05,019 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-09-17 15:04:11,188 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:04:21,774 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:04:46,241 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:04:46,253 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-09-17 15:04:46,253 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-09-17 15:04:46,254 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['T cell', 'B cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Mast cell']
2025-09-17 15:04:46,284 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: T cell
2025-09-17 15:04:46,284 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: B cell
2025-09-17 15:04:46,285 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mononuclear phagocyte
2025-09-17 15:04:46,285 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Natural killer cell
2025-09-17 15:04:46,285 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mast cell
2025-09-17 15:04:46,286 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-09-17 15:04:46,286 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-09-17 15:04:46,286 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 15:04:46,286 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 15:04:46,287 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-09-17 15:04:46,287 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-09-17 15:04:46,287 | INFO | scchatbot.workflow.node_base |    Current message: Validating Immune cell -> ['T cell']...
2025-09-17 15:04:46,287 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'T cell'
2025-09-17 15:04:46,287 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-09-17 15:04:46,287 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Validation passed: All 1 expected cell types found successfully
2025-09-17 15:04:46,288 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: success
2025-09-17 15:04:46,288 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['T cell'], found=['T cell'], missing=[]
2025-09-17 15:04:46,288 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'success', 'message': 'All 1 expected cell types found successfully', 'found_children': ['T cell'], 'missing_children': [], 'available_types': ['Epithelial cell', 'Natural killer cell', 'Mononuclear phagocyte', 'T cell', 'Glial cell', 'Mast cell', 'Stromal cell', 'B cell']}
2025-09-17 15:04:46,288 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: []
2025-09-17 15:04:46,288 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 2 remaining steps...
2025-09-17 15:04:46,288 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3: perform_enrichment_analyses(cell_type='T cell')
2025-09-17 15:04:46,288 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3 cell type 'T cell' not in missing list []
2025-09-17 15:04:46,288 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 4: display_enrichment_visualization(analysis='go')
2025-09-17 15:04:46,288 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 4 cell type 'None' not in missing list []
2025-09-17 15:04:46,288 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 3
2025-09-17 15:04:46,288 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 15:04:46,288 | INFO | scchatbot.workflow.node_base |    Current message: Do GO enrichment analysis to T cell....
2025-09-17 15:04:46,289 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Perform Gene Ontology (GO) enrichment analysis on T cell.
2025-09-17 15:04:46,289 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'perform_enrichment_analyses'
2025-09-17 15:05:26,958 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 15:05:28,113 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-17 15:05:28,116 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-17 15:05:28,116 | INFO | scchatbot.workflow.function_history | 🔍 Starting enrichment indexing for T cell...
2025-09-17 15:05:28,116 | INFO | scchatbot.workflow.function_history | 🧬 Detected analyses: ['go']
2025-09-17 15:05:28,118 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_bp/results_summary_T cell.csv (613 terms)
2025-09-17 15:05:28,122 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_bp/results_raw_T cell.csv (613 terms)
2025-09-17 15:05:28,846 | INFO | scchatbot.workflow.function_history | 📝 Indexed 613 terms for go_bp/all_combined
2025-09-17 15:05:28,849 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_bulk_bp/results_summary_T cell_bulk.csv (1060 terms)
2025-09-17 15:05:28,856 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_bulk_bp/results_raw_T cell_bulk.csv (1060 terms)
2025-09-17 15:05:30,047 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1060 terms for go_bp/bulk
2025-09-17 15:05:30,050 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_cataract_bp/results_summary_T cell_cataract.csv (1138 terms)
2025-09-17 15:05:30,057 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_cataract_bp/results_raw_T cell_cataract.csv (1138 terms)
2025-09-17 15:05:31,337 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1138 terms for go_bp/cataract
2025-09-17 15:05:31,340 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_basal laminar drusen_bp/results_summary_T cell_basal laminar drusen.csv (1175 terms)
2025-09-17 15:05:31,347 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_basal laminar drusen_bp/results_raw_T cell_basal laminar drusen.csv (1175 terms)
2025-09-17 15:05:32,687 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1175 terms for go_bp/basal laminar drusen
2025-09-17 15:05:32,690 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_age related macular degeneration_bp/results_summary_T cell_age related macular degeneration.csv (1049 terms)
2025-09-17 15:05:32,697 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_age related macular degeneration_bp/results_raw_T cell_age related macular degeneration.csv (1049 terms)
2025-09-17 15:05:33,869 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1049 terms for go_bp/age related macular degeneration
2025-09-17 15:05:33,871 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_bp/results_summary_T cell.csv (613 terms)
2025-09-17 15:05:33,875 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_bp/results_raw_T cell.csv (613 terms)
2025-09-17 15:05:34,563 | INFO | scchatbot.workflow.function_history | 📝 Indexed 613 terms for go_cc/all_combined
2025-09-17 15:05:34,565 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_bulk_bp/results_summary_T cell_bulk.csv (1060 terms)
2025-09-17 15:05:34,571 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_bulk_bp/results_raw_T cell_bulk.csv (1060 terms)
2025-09-17 15:05:35,762 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1060 terms for go_cc/bulk
2025-09-17 15:05:35,764 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_cataract_bp/results_summary_T cell_cataract.csv (1138 terms)
2025-09-17 15:05:35,771 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_cataract_bp/results_raw_T cell_cataract.csv (1138 terms)
2025-09-17 15:05:37,128 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1138 terms for go_cc/cataract
2025-09-17 15:05:37,131 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_basal laminar drusen_bp/results_summary_T cell_basal laminar drusen.csv (1175 terms)
2025-09-17 15:05:37,138 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_basal laminar drusen_bp/results_raw_T cell_basal laminar drusen.csv (1175 terms)
2025-09-17 15:05:38,512 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1175 terms for go_cc/basal laminar drusen
2025-09-17 15:05:38,514 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_age related macular degeneration_bp/results_summary_T cell_age related macular degeneration.csv (1049 terms)
2025-09-17 15:05:38,521 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_age related macular degeneration_bp/results_raw_T cell_age related macular degeneration.csv (1049 terms)
2025-09-17 15:05:39,732 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1049 terms for go_cc/age related macular degeneration
2025-09-17 15:05:39,734 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_bp/results_summary_T cell.csv (613 terms)
2025-09-17 15:05:39,738 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_bp/results_raw_T cell.csv (613 terms)
2025-09-17 15:05:40,402 | INFO | scchatbot.workflow.function_history | 📝 Indexed 613 terms for go_mf/all_combined
2025-09-17 15:05:40,404 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_bulk_bp/results_summary_T cell_bulk.csv (1060 terms)
2025-09-17 15:05:40,410 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_bulk_bp/results_raw_T cell_bulk.csv (1060 terms)
2025-09-17 15:05:41,672 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1060 terms for go_mf/bulk
2025-09-17 15:05:41,675 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_cataract_bp/results_summary_T cell_cataract.csv (1138 terms)
2025-09-17 15:05:41,682 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_cataract_bp/results_raw_T cell_cataract.csv (1138 terms)
2025-09-17 15:05:43,044 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1138 terms for go_mf/cataract
2025-09-17 15:05:43,047 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_basal laminar drusen_bp/results_summary_T cell_basal laminar drusen.csv (1175 terms)
2025-09-17 15:05:43,054 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_basal laminar drusen_bp/results_raw_T cell_basal laminar drusen.csv (1175 terms)
2025-09-17 15:05:44,388 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1175 terms for go_mf/basal laminar drusen
2025-09-17 15:05:44,390 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_age related macular degeneration_bp/results_summary_T cell_age related macular degeneration.csv (1049 terms)
2025-09-17 15:05:44,396 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_age related macular degeneration_bp/results_raw_T cell_age related macular degeneration.csv (1049 terms)
2025-09-17 15:05:45,560 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1049 terms for go_mf/age related macular degeneration
2025-09-17 15:05:45,561 | INFO | scchatbot.workflow.function_history | ✅ Enrichment indexing complete: 15105 terms indexed for T cell
2025-09-17 15:05:45,576 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-09-17 15:05:45,577 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: perform_enrichment_analyses - Full data preserved
2025-09-17 15:05:45,577 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-09-17 15:05:45,577 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 15:05:45,578 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 15:05:45,578 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Steps still remaining (3/4), skipping post-execution evaluation
2025-09-17 15:05:45,578 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 15:05:45,578 | INFO | scchatbot.workflow.node_base |    Current message: Do GO enrichment analysis to T cell....
2025-09-17 15:05:45,579 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Visualize the GO enrichment results using both barplot and dotplot.
2025-09-17 15:05:45,579 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_enrichment_visualization'
2025-09-17 15:05:45,579 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_enrichment_visualization' with step parameters: {'analysis': 'go', 'plot_type': 'both'}
2025-09-17 15:05:45,580 | INFO | scchatbot.workflow.nodes.execution | ✅ Found matching go analysis for visualization: T cell
2025-09-17 15:05:45,580 | INFO | scchatbot.workflow.nodes.execution | 📝 Updating step parameters with enhanced params for execution history tracking
2025-09-17 15:05:45,580 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_enrichment_visualization called with kwargs: {'analysis': 'go', 'plot_type': 'both', 'cell_type': 'T cell'}
2025-09-17 15:05:45,580 | INFO | scchatbot.multi_agent_base | 🎨 GO Visualization call: display_enrichment_visualization(analysis='go', cell_type='T cell', plot_type='both', domain='BP')
2025-09-17 15:05:45,721 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:05:45,724 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:05:45,724 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpostfg8s3.
2025-09-17 15:05:45,725 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:05:45,725 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpnzk5_ouu.
2025-09-17 15:05:45,725 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpnzk5_ouu
2025-09-17 15:05:46,419 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpostfg8s3/index.html
2025-09-17 15:05:46,420 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:05:46,918 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:05:46,919 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:05:46,919 | INFO | kaleido.kaleido | Got A370
2025-09-17 15:05:46,919 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_BP_Terms___Bar_Plot_T_cell.png
2025-09-17 15:05:46,919 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_BP_Terms___Bar_Plot_T_cell.png.
2025-09-17 15:05:46,989 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_BP_Terms___Bar_Plot_T_cell.png.
2025-09-17 15:05:46,991 | INFO | kaleido.kaleido | Reloading tab A370 before return.
2025-09-17 15:05:47,070 | INFO | kaleido.kaleido | Putting tab A370 back (queue size: 0).
2025-09-17 15:05:47,070 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:05:47,070 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:05:47,071 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:47,071 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:47,071 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:47,071 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:47,071 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:47,072 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:47,072 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:47,072 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:47,072 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:47,072 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:47,165 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:47,165 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:47,167 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:05:47,168 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:05:47,168 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmps424e0o3.
2025-09-17 15:05:47,168 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:05:47,169 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpreq6i_78.
2025-09-17 15:05:47,169 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpreq6i_78
2025-09-17 15:05:47,634 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmps424e0o3/index.html
2025-09-17 15:05:47,635 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:05:48,188 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:05:48,188 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:05:48,189 | INFO | kaleido.kaleido | Got 75EE
2025-09-17 15:05:48,189 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_BP_Terms___Bar_Plot_T_cell.pdf
2025-09-17 15:05:48,189 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_BP_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 15:05:48,233 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_BP_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 15:05:48,283 | INFO | kaleido.kaleido | Reloading tab 75EE before return.
2025-09-17 15:05:48,364 | INFO | kaleido.kaleido | Putting tab 75EE back (queue size: 0).
2025-09-17 15:05:48,364 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:05:48,364 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:05:48,365 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:48,365 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:48,365 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:48,365 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:48,365 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:48,366 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:48,366 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:48,366 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:48,366 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:48,366 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:48,456 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:48,456 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:48,475 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:48,476 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:48,497 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:05:48,497 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:05:48,498 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpajuh7y79.
2025-09-17 15:05:48,498 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:05:48,498 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpcqidfrbm.
2025-09-17 15:05:48,499 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpcqidfrbm
2025-09-17 15:05:48,946 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpajuh7y79/index.html
2025-09-17 15:05:48,947 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:05:49,502 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:05:49,503 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:05:49,503 | INFO | kaleido.kaleido | Got 4F8D
2025-09-17 15:05:49,503 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_BP_Terms___Dot_Plot_T_cell.png
2025-09-17 15:05:49,503 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_BP_Terms___Dot_Plot_T_cell.png.
2025-09-17 15:05:49,574 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_BP_Terms___Dot_Plot_T_cell.png.
2025-09-17 15:05:49,575 | INFO | kaleido.kaleido | Reloading tab 4F8D before return.
2025-09-17 15:05:49,651 | INFO | kaleido.kaleido | Putting tab 4F8D back (queue size: 0).
2025-09-17 15:05:49,651 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:05:49,651 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:05:49,651 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:49,651 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:49,651 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:49,651 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:49,651 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:49,652 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:49,652 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:49,652 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:49,652 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:49,652 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:49,737 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:49,737 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:49,739 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:05:49,740 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:05:49,740 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp09d3gxew.
2025-09-17 15:05:49,740 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:05:49,741 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpgb77c72j.
2025-09-17 15:05:49,741 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpgb77c72j
2025-09-17 15:05:50,182 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp09d3gxew/index.html
2025-09-17 15:05:50,182 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:05:50,709 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:05:50,709 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:05:50,709 | INFO | kaleido.kaleido | Got 16AE
2025-09-17 15:05:50,709 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_BP_Terms___Dot_Plot_T_cell.pdf
2025-09-17 15:05:50,711 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_BP_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 15:05:50,758 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_BP_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 15:05:50,811 | INFO | kaleido.kaleido | Reloading tab 16AE before return.
2025-09-17 15:05:50,891 | INFO | kaleido.kaleido | Putting tab 16AE back (queue size: 0).
2025-09-17 15:05:50,891 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:05:50,891 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:05:50,891 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:50,891 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:50,891 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:50,891 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:50,891 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:50,892 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:50,892 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:50,892 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:50,892 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:50,893 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:50,987 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:50,987 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:50,997 | INFO | scchatbot.multi_agent_base | 🎨 GO Visualization call: display_enrichment_visualization(analysis='go', cell_type='T cell', plot_type='both', domain='MF')
2025-09-17 15:05:51,005 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:51,005 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:51,020 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:05:51,021 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:05:51,021 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpxbf6dql1.
2025-09-17 15:05:51,022 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:05:51,022 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp2xaurfdi.
2025-09-17 15:05:51,022 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp2xaurfdi
2025-09-17 15:05:51,465 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpxbf6dql1/index.html
2025-09-17 15:05:51,465 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:05:52,009 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:05:52,010 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:05:52,010 | INFO | kaleido.kaleido | Got 8BB5
2025-09-17 15:05:52,010 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_MF_Terms___Bar_Plot_T_cell.png
2025-09-17 15:05:52,010 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_MF_Terms___Bar_Plot_T_cell.png.
2025-09-17 15:05:52,076 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_MF_Terms___Bar_Plot_T_cell.png.
2025-09-17 15:05:52,077 | INFO | kaleido.kaleido | Reloading tab 8BB5 before return.
2025-09-17 15:05:52,153 | INFO | kaleido.kaleido | Putting tab 8BB5 back (queue size: 0).
2025-09-17 15:05:52,154 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:05:52,154 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:05:52,154 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:52,154 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:52,154 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:52,154 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:52,154 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:52,155 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:52,155 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:52,155 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:52,155 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:52,155 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:52,243 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:52,243 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:52,245 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:05:52,246 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:05:52,246 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpr4ndn303.
2025-09-17 15:05:52,246 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:05:52,247 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpzaupx82z.
2025-09-17 15:05:52,247 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpzaupx82z
2025-09-17 15:05:52,702 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpr4ndn303/index.html
2025-09-17 15:05:52,702 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:05:53,256 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:05:53,257 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:05:53,257 | INFO | kaleido.kaleido | Got 8ADF
2025-09-17 15:05:53,257 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_MF_Terms___Bar_Plot_T_cell.pdf
2025-09-17 15:05:53,257 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_MF_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 15:05:53,303 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_MF_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 15:05:53,354 | INFO | kaleido.kaleido | Reloading tab 8ADF before return.
2025-09-17 15:05:53,429 | INFO | kaleido.kaleido | Putting tab 8ADF back (queue size: 0).
2025-09-17 15:05:53,429 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:05:53,429 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:05:53,429 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:53,429 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:53,429 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:53,429 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:53,429 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:53,430 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:53,431 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:53,431 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:53,431 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:53,431 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:53,574 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:53,574 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:53,596 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:53,597 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:53,597 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:53,597 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:53,615 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:05:53,616 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:05:53,617 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp7ne0i_s1.
2025-09-17 15:05:53,618 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:05:53,618 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpnw0o_jwb.
2025-09-17 15:05:53,618 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpnw0o_jwb
2025-09-17 15:05:54,088 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp7ne0i_s1/index.html
2025-09-17 15:05:54,089 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:05:54,639 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:05:54,640 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:05:54,640 | INFO | kaleido.kaleido | Got C8D2
2025-09-17 15:05:54,640 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_MF_Terms___Dot_Plot_T_cell.png
2025-09-17 15:05:54,640 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_MF_Terms___Dot_Plot_T_cell.png.
2025-09-17 15:05:54,709 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_MF_Terms___Dot_Plot_T_cell.png.
2025-09-17 15:05:54,710 | INFO | kaleido.kaleido | Reloading tab C8D2 before return.
2025-09-17 15:05:54,788 | INFO | kaleido.kaleido | Putting tab C8D2 back (queue size: 0).
2025-09-17 15:05:54,788 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:05:54,788 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:05:54,789 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:54,789 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:54,789 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:54,789 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:54,789 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:54,789 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:54,790 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:54,790 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:54,790 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:54,790 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:54,876 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:54,876 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:54,879 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:05:54,879 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:05:54,880 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpoqvd31hv.
2025-09-17 15:05:54,880 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:05:54,880 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpn8nktbnq.
2025-09-17 15:05:54,880 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpn8nktbnq
2025-09-17 15:05:55,324 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpoqvd31hv/index.html
2025-09-17 15:05:55,325 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:05:55,878 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:05:55,878 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:05:55,878 | INFO | kaleido.kaleido | Got 0E37
2025-09-17 15:05:55,878 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_MF_Terms___Dot_Plot_T_cell.pdf
2025-09-17 15:05:55,878 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_MF_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 15:05:55,927 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_MF_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 15:05:55,980 | INFO | kaleido.kaleido | Reloading tab 0E37 before return.
2025-09-17 15:05:56,059 | INFO | kaleido.kaleido | Putting tab 0E37 back (queue size: 0).
2025-09-17 15:05:56,059 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:05:56,059 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:05:56,059 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:56,059 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:56,059 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:56,060 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:56,060 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:56,060 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:56,060 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:56,060 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:56,061 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:56,061 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:56,149 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:56,149 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:56,161 | INFO | scchatbot.multi_agent_base | 🎨 GO Visualization call: display_enrichment_visualization(analysis='go', cell_type='T cell', plot_type='both', domain='CC')
2025-09-17 15:05:56,168 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:56,168 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:56,168 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:56,168 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:56,184 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:05:56,185 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:05:56,186 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpf5vl5qxi.
2025-09-17 15:05:56,186 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:05:56,186 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpi99i_p_s.
2025-09-17 15:05:56,186 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpi99i_p_s
2025-09-17 15:05:56,651 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpf5vl5qxi/index.html
2025-09-17 15:05:56,654 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:05:57,176 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:05:57,177 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:05:57,177 | INFO | kaleido.kaleido | Got E997
2025-09-17 15:05:57,177 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_CC_Terms___Bar_Plot_T_cell.png
2025-09-17 15:05:57,177 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_CC_Terms___Bar_Plot_T_cell.png.
2025-09-17 15:05:57,244 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_CC_Terms___Bar_Plot_T_cell.png.
2025-09-17 15:05:57,245 | INFO | kaleido.kaleido | Reloading tab E997 before return.
2025-09-17 15:05:57,325 | INFO | kaleido.kaleido | Putting tab E997 back (queue size: 0).
2025-09-17 15:05:57,325 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:05:57,325 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:05:57,325 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:57,326 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:57,326 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:57,326 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:57,326 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:57,327 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:57,327 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:57,327 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:57,327 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:57,327 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:57,407 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:57,408 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:57,409 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:05:57,410 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:05:57,410 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp9qa2meal.
2025-09-17 15:05:57,410 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:05:57,411 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpkhfhv2oo.
2025-09-17 15:05:57,411 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpkhfhv2oo
2025-09-17 15:05:57,862 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp9qa2meal/index.html
2025-09-17 15:05:57,863 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:05:58,483 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:05:58,484 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:05:58,484 | INFO | kaleido.kaleido | Got 0A21
2025-09-17 15:05:58,484 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_CC_Terms___Bar_Plot_T_cell.pdf
2025-09-17 15:05:58,484 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_CC_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 15:05:58,530 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_CC_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 15:05:58,582 | INFO | kaleido.kaleido | Reloading tab 0A21 before return.
2025-09-17 15:05:58,658 | INFO | kaleido.kaleido | Putting tab 0A21 back (queue size: 0).
2025-09-17 15:05:58,658 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:05:58,658 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:05:58,659 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:58,659 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:58,659 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:58,659 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:58,659 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:58,660 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:58,660 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:58,660 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:58,660 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:58,660 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:58,745 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:58,746 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:58,760 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:58,760 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:58,760 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:58,760 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:58,777 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:05:58,777 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:05:58,777 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmps2mt_r6b.
2025-09-17 15:05:58,777 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:05:58,778 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpvxqb82mb.
2025-09-17 15:05:58,778 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpvxqb82mb
2025-09-17 15:05:59,239 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmps2mt_r6b/index.html
2025-09-17 15:05:59,240 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:05:59,795 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:05:59,796 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:05:59,796 | INFO | kaleido.kaleido | Got 8887
2025-09-17 15:05:59,796 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_CC_Terms___Dot_Plot_T_cell.png
2025-09-17 15:05:59,796 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_CC_Terms___Dot_Plot_T_cell.png.
2025-09-17 15:05:59,865 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_CC_Terms___Dot_Plot_T_cell.png.
2025-09-17 15:05:59,867 | INFO | kaleido.kaleido | Reloading tab 8887 before return.
2025-09-17 15:05:59,949 | INFO | kaleido.kaleido | Putting tab 8887 back (queue size: 0).
2025-09-17 15:05:59,949 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:05:59,949 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:05:59,950 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:59,950 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:59,950 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:59,950 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:59,950 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:05:59,951 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:05:59,951 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:05:59,951 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:05:59,951 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:05:59,951 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:00,044 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:00,044 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:00,046 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:06:00,047 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:06:00,047 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpxu8rvrvt.
2025-09-17 15:06:00,047 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:06:00,048 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpg22o97ww.
2025-09-17 15:06:00,048 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpg22o97ww
2025-09-17 15:06:00,500 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpxu8rvrvt/index.html
2025-09-17 15:06:00,501 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:06:01,029 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:06:01,031 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:06:01,031 | INFO | kaleido.kaleido | Got A5E2
2025-09-17 15:06:01,031 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_CC_Terms___Dot_Plot_T_cell.pdf
2025-09-17 15:06:01,031 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_CC_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 15:06:01,031 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:01,032 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:01,075 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_CC_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 15:06:01,130 | INFO | kaleido.kaleido | Reloading tab A5E2 before return.
2025-09-17 15:06:01,214 | INFO | kaleido.kaleido | Putting tab A5E2 back (queue size: 0).
2025-09-17 15:06:01,214 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:06:01,214 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:06:01,214 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:01,214 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:01,214 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:01,214 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:01,214 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:01,215 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:01,216 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:01,216 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:01,216 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:01,216 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:01,305 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:01,305 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:01,315 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-09-17 15:06:01,316 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_enrichment_visualization - HTML preserved
2025-09-17 15:06:01,316 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-09-17 15:06:01,317 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 15:06:01,317 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 15:06:01,317 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-17 15:06:01,317 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 15:06:01,317 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 15:06:02,922 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:06:03,717 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:06:03,719 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 15:06:03,719 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 15:06:04,759 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:06:04,772 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 15:06:05,642 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:06:05,647 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["perform_enrichment_analyses", "search_enrichment_semantic", "display_enrichment_visualization"]
```' (length: 109)
2025-09-17 15:06:05,647 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 15:06:05,649 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 15:06:05,650 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-17 15:06:05,650 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: perform_enrichment_analyses (execution 3)
2025-09-17 15:06:05,650 | INFO | scchatbot.workflow.nodes.evaluation |    → Enrichment analysis had 714 total significant results
2025-09-17 15:06:05,650 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['perform_enrichment_analyses']
2025-09-17 15:06:05,651 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: search_enrichment_semantic(T cell)
2025-09-17 15:06:05,651 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: display_enrichment_visualization(T cell)
2025-09-17 15:06:05,651 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 2 missing steps for T cell
2025-09-17 15:06:05,652 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 2 total supplementary steps
2025-09-17 15:06:05,653 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for pathway_analysis question
2025-09-17 15:06:05,654 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 2 supplementary steps to execution plan (attempt 1/2)
2025-09-17 15:06:05,654 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-09-17 15:06:05,655 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 15:06:05,655 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-17 15:06:05,655 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-17 15:06:05,655 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 15:06:05,655 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 2
2025-09-17 15:06:05,655 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 15:06:05,656 | INFO | scchatbot.workflow.nodes.evaluation |    • Enrichment analyses: ['T cell', 'unknown']
2025-09-17 15:06:05,656 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 15:06:05,656 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 15:06:05,657 | INFO | scchatbot.workflow.node_base |    Current message: Do GO enrichment analysis to T cell....
2025-09-17 15:06:05,658 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 5: Post-evaluation: search_enrichment_semantic for T cell
2025-09-17 15:06:05,658 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'search_enrichment_semantic'
2025-09-17 15:06:05,658 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 5 completed successfully
2025-09-17 15:06:05,660 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: search_enrichment_semantic - Full data preserved
2025-09-17 15:06:05,660 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 6
2025-09-17 15:06:05,660 | INFO | scchatbot.workflow.nodes.execution | 🚀 Continuing execution - next step is supplementary: display_enrichment_visualization
2025-09-17 15:06:05,660 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 6: Post-evaluation: display_enrichment_visualization for T cell
2025-09-17 15:06:05,660 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_enrichment_visualization'
2025-09-17 15:06:05,661 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_enrichment_visualization' with step parameters: {'cell_type': 'T cell', 'analysis': 'go'}
2025-09-17 15:06:05,662 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_enrichment_visualization called with kwargs: {'cell_type': 'T cell', 'analysis': 'go'}
2025-09-17 15:06:05,662 | INFO | scchatbot.multi_agent_base | 🎨 GO Visualization call: display_enrichment_visualization(analysis='go', cell_type='T cell', plot_type='both', domain='BP')
2025-09-17 15:06:05,689 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:05,690 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:05,695 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:06:05,696 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:06:05,696 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpknhouqg2.
2025-09-17 15:06:05,697 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:06:05,697 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpa319dkh9.
2025-09-17 15:06:05,697 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpa319dkh9
2025-09-17 15:06:06,163 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpknhouqg2/index.html
2025-09-17 15:06:06,164 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:06:06,716 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:06:06,717 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:06:06,717 | INFO | kaleido.kaleido | Got ECF0
2025-09-17 15:06:06,717 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_BP_Terms___Bar_Plot_T_cell.png
2025-09-17 15:06:06,717 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_BP_Terms___Bar_Plot_T_cell.png.
2025-09-17 15:06:06,782 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_BP_Terms___Bar_Plot_T_cell.png.
2025-09-17 15:06:06,783 | INFO | kaleido.kaleido | Reloading tab ECF0 before return.
2025-09-17 15:06:06,859 | INFO | kaleido.kaleido | Putting tab ECF0 back (queue size: 0).
2025-09-17 15:06:06,860 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:06:06,860 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:06:06,860 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:06,860 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:06,860 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:06,860 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:06,860 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:06,861 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:06,861 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:06,861 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:06,861 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:06,861 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:06,947 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:06,947 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:06,949 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:06:06,950 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:06:06,950 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp8ybwmwo0.
2025-09-17 15:06:06,950 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:06:06,951 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpmd0pa5ci.
2025-09-17 15:06:06,951 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpmd0pa5ci
2025-09-17 15:06:07,415 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp8ybwmwo0/index.html
2025-09-17 15:06:07,418 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:06:07,944 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:06:07,944 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:06:07,944 | INFO | kaleido.kaleido | Got F3ED
2025-09-17 15:06:07,944 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_BP_Terms___Bar_Plot_T_cell.pdf
2025-09-17 15:06:07,944 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_BP_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 15:06:07,990 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_BP_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 15:06:08,040 | INFO | kaleido.kaleido | Reloading tab F3ED before return.
2025-09-17 15:06:08,118 | INFO | kaleido.kaleido | Putting tab F3ED back (queue size: 0).
2025-09-17 15:06:08,118 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:06:08,118 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:06:08,119 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:08,119 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:08,119 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:08,119 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:08,119 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:08,120 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:08,121 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:08,121 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:08,121 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:08,121 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:08,208 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:08,209 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:08,223 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:08,224 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:08,224 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:08,224 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:08,241 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:06:08,241 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:06:08,242 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpcwczkm5b.
2025-09-17 15:06:08,242 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:06:08,242 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpqf1hlmwv.
2025-09-17 15:06:08,242 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpqf1hlmwv
2025-09-17 15:06:08,701 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpcwczkm5b/index.html
2025-09-17 15:06:08,706 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:06:09,231 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:06:09,231 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:06:09,231 | INFO | kaleido.kaleido | Got AA53
2025-09-17 15:06:09,231 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_BP_Terms___Dot_Plot_T_cell.png
2025-09-17 15:06:09,231 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_BP_Terms___Dot_Plot_T_cell.png.
2025-09-17 15:06:09,301 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_BP_Terms___Dot_Plot_T_cell.png.
2025-09-17 15:06:09,303 | INFO | kaleido.kaleido | Reloading tab AA53 before return.
2025-09-17 15:06:09,382 | INFO | kaleido.kaleido | Putting tab AA53 back (queue size: 0).
2025-09-17 15:06:09,382 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:06:09,382 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:06:09,383 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:09,383 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:09,383 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:09,383 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:09,383 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:09,383 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:09,384 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:09,384 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:09,384 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:09,384 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:09,476 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:09,476 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:09,478 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:06:09,479 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:06:09,479 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp30v2orug.
2025-09-17 15:06:09,479 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:06:09,479 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpd127l3xl.
2025-09-17 15:06:09,479 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpd127l3xl
2025-09-17 15:06:09,910 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp30v2orug/index.html
2025-09-17 15:06:09,911 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:06:09,912 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:09,916 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:10,515 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:06:10,515 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:06:10,515 | INFO | kaleido.kaleido | Got 79D7
2025-09-17 15:06:10,516 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_BP_Terms___Dot_Plot_T_cell.pdf
2025-09-17 15:06:10,516 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_BP_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 15:06:10,563 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_BP_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 15:06:10,615 | INFO | kaleido.kaleido | Reloading tab 79D7 before return.
2025-09-17 15:06:10,695 | INFO | kaleido.kaleido | Putting tab 79D7 back (queue size: 0).
2025-09-17 15:06:10,695 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:06:10,695 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:06:10,696 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:10,696 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:10,696 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:10,696 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:10,696 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:10,697 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:10,697 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:10,697 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:10,697 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:10,697 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:10,786 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:10,787 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:10,799 | INFO | scchatbot.multi_agent_base | 🎨 GO Visualization call: display_enrichment_visualization(analysis='go', cell_type='T cell', plot_type='both', domain='MF')
2025-09-17 15:06:10,820 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:10,821 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:10,822 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:06:10,822 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:06:10,823 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpu8vpilo2.
2025-09-17 15:06:10,823 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:06:10,823 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp1n51_y87.
2025-09-17 15:06:10,823 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp1n51_y87
2025-09-17 15:06:11,288 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpu8vpilo2/index.html
2025-09-17 15:06:11,292 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:06:12,040 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:06:12,041 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:06:12,041 | INFO | kaleido.kaleido | Got 4155
2025-09-17 15:06:12,041 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_MF_Terms___Bar_Plot_T_cell.png
2025-09-17 15:06:12,041 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_MF_Terms___Bar_Plot_T_cell.png.
2025-09-17 15:06:12,118 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_MF_Terms___Bar_Plot_T_cell.png.
2025-09-17 15:06:12,120 | INFO | kaleido.kaleido | Reloading tab 4155 before return.
2025-09-17 15:06:12,198 | INFO | kaleido.kaleido | Putting tab 4155 back (queue size: 0).
2025-09-17 15:06:12,199 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:06:12,199 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:06:12,199 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:12,199 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:12,199 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:12,199 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:12,199 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:12,200 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:12,200 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:12,200 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:12,200 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:12,200 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:12,299 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:12,299 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:12,301 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:06:12,303 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:06:12,304 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpkqkxea3w.
2025-09-17 15:06:12,304 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:06:12,305 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp51n3hxse.
2025-09-17 15:06:12,305 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp51n3hxse
2025-09-17 15:06:12,764 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpkqkxea3w/index.html
2025-09-17 15:06:12,765 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:06:13,484 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:06:13,485 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:06:13,485 | INFO | kaleido.kaleido | Got B4B6
2025-09-17 15:06:13,485 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_MF_Terms___Bar_Plot_T_cell.pdf
2025-09-17 15:06:13,485 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_MF_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 15:06:13,534 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_MF_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 15:06:13,585 | INFO | kaleido.kaleido | Reloading tab B4B6 before return.
2025-09-17 15:06:13,664 | INFO | kaleido.kaleido | Putting tab B4B6 back (queue size: 0).
2025-09-17 15:06:13,664 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:06:13,664 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:06:13,664 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:13,664 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:13,664 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:13,664 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:13,664 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:13,665 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:13,665 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:13,666 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:13,666 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:13,666 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:13,753 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:13,753 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:13,768 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:13,768 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:13,768 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:13,768 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:13,785 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:06:13,785 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:06:13,786 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpakjyruo6.
2025-09-17 15:06:13,786 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:06:13,786 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp40kq3h1e.
2025-09-17 15:06:13,786 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp40kq3h1e
2025-09-17 15:06:14,230 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpakjyruo6/index.html
2025-09-17 15:06:14,231 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:06:14,785 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:06:14,785 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:06:14,785 | INFO | kaleido.kaleido | Got A861
2025-09-17 15:06:14,785 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_MF_Terms___Dot_Plot_T_cell.png
2025-09-17 15:06:14,785 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_MF_Terms___Dot_Plot_T_cell.png.
2025-09-17 15:06:14,852 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_MF_Terms___Dot_Plot_T_cell.png.
2025-09-17 15:06:14,854 | INFO | kaleido.kaleido | Reloading tab A861 before return.
2025-09-17 15:06:14,936 | INFO | kaleido.kaleido | Putting tab A861 back (queue size: 0).
2025-09-17 15:06:14,936 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:06:14,936 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:06:14,936 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:14,936 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:14,936 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:14,936 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:14,936 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:14,937 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:14,937 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:14,937 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:14,937 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:14,937 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:15,026 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:15,026 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:15,028 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:06:15,029 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:06:15,029 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmplqfswgi5.
2025-09-17 15:06:15,029 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:06:15,030 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpfyipd00x.
2025-09-17 15:06:15,030 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpfyipd00x
2025-09-17 15:06:15,481 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmplqfswgi5/index.html
2025-09-17 15:06:15,482 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:06:16,025 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:06:16,025 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:06:16,025 | INFO | kaleido.kaleido | Got 291D
2025-09-17 15:06:16,025 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_MF_Terms___Dot_Plot_T_cell.pdf
2025-09-17 15:06:16,025 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_MF_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 15:06:16,026 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:16,026 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:16,070 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_MF_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 15:06:16,123 | INFO | kaleido.kaleido | Reloading tab 291D before return.
2025-09-17 15:06:16,203 | INFO | kaleido.kaleido | Putting tab 291D back (queue size: 0).
2025-09-17 15:06:16,203 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:06:16,203 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:06:16,203 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:16,203 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:16,203 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:16,203 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:16,203 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:16,204 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:16,204 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:16,204 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:16,204 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:16,204 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:16,293 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:16,293 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:16,303 | INFO | scchatbot.multi_agent_base | 🎨 GO Visualization call: display_enrichment_visualization(analysis='go', cell_type='T cell', plot_type='both', domain='CC')
2025-09-17 15:06:16,324 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:06:16,324 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:06:16,325 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp8b5wa007.
2025-09-17 15:06:16,326 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:06:16,326 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp7ldg2lcl.
2025-09-17 15:06:16,326 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp7ldg2lcl
2025-09-17 15:06:16,772 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp8b5wa007/index.html
2025-09-17 15:06:16,776 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:06:17,316 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:06:17,317 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:06:17,317 | INFO | kaleido.kaleido | Got BBFE
2025-09-17 15:06:17,317 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_CC_Terms___Bar_Plot_T_cell.png
2025-09-17 15:06:17,317 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_CC_Terms___Bar_Plot_T_cell.png.
2025-09-17 15:06:17,385 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_CC_Terms___Bar_Plot_T_cell.png.
2025-09-17 15:06:17,386 | INFO | kaleido.kaleido | Reloading tab BBFE before return.
2025-09-17 15:06:17,473 | INFO | kaleido.kaleido | Putting tab BBFE back (queue size: 0).
2025-09-17 15:06:17,473 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:06:17,473 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:06:17,473 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:17,473 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:17,473 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:17,473 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:17,473 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:17,474 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:17,474 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:17,475 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:17,475 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:17,475 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:17,621 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:17,621 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:17,623 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:06:17,625 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:06:17,625 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpmyi24jc8.
2025-09-17 15:06:17,625 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:06:17,626 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpf0z6hbul.
2025-09-17 15:06:17,626 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpf0z6hbul
2025-09-17 15:06:18,083 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpmyi24jc8/index.html
2025-09-17 15:06:18,085 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:06:18,625 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:06:18,625 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:06:18,625 | INFO | kaleido.kaleido | Got DE79
2025-09-17 15:06:18,625 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_CC_Terms___Bar_Plot_T_cell.pdf
2025-09-17 15:06:18,625 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_CC_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 15:06:18,671 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_CC_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 15:06:18,725 | INFO | kaleido.kaleido | Reloading tab DE79 before return.
2025-09-17 15:06:18,809 | INFO | kaleido.kaleido | Putting tab DE79 back (queue size: 0).
2025-09-17 15:06:18,809 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:06:18,809 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:06:18,809 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:18,809 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:18,809 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:18,809 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:18,809 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:18,813 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:18,813 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:18,813 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:18,813 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:18,813 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:18,902 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:18,902 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:18,916 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:18,916 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:18,916 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:18,917 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:18,917 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:18,917 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:18,934 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:06:18,935 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:06:18,935 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpxxovb0fi.
2025-09-17 15:06:18,935 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:06:18,935 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp2r0rpx9e.
2025-09-17 15:06:18,935 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp2r0rpx9e
2025-09-17 15:06:19,400 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpxxovb0fi/index.html
2025-09-17 15:06:19,401 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:06:20,215 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:06:20,216 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:06:20,216 | INFO | kaleido.kaleido | Got 9D78
2025-09-17 15:06:20,216 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_CC_Terms___Dot_Plot_T_cell.png
2025-09-17 15:06:20,216 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_CC_Terms___Dot_Plot_T_cell.png.
2025-09-17 15:06:20,285 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_CC_Terms___Dot_Plot_T_cell.png.
2025-09-17 15:06:20,286 | INFO | kaleido.kaleido | Reloading tab 9D78 before return.
2025-09-17 15:06:20,368 | INFO | kaleido.kaleido | Putting tab 9D78 back (queue size: 0).
2025-09-17 15:06:20,369 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:06:20,369 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:06:20,369 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:20,369 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:20,369 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:20,369 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:20,369 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:20,370 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:20,370 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:20,370 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:20,370 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:20,370 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:20,457 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:20,457 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:20,459 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:06:20,460 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:06:20,460 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp7appqecd.
2025-09-17 15:06:20,460 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:06:20,461 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpbhpvwrik.
2025-09-17 15:06:20,461 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpbhpvwrik
2025-09-17 15:06:20,924 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp7appqecd/index.html
2025-09-17 15:06:20,927 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:06:21,479 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:06:21,479 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:06:21,479 | INFO | kaleido.kaleido | Got B082
2025-09-17 15:06:21,480 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_CC_Terms___Dot_Plot_T_cell.pdf
2025-09-17 15:06:21,480 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_CC_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 15:06:21,480 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:21,481 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:21,526 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_CC_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 15:06:21,578 | INFO | kaleido.kaleido | Reloading tab B082 before return.
2025-09-17 15:06:21,661 | INFO | kaleido.kaleido | Putting tab B082 back (queue size: 0).
2025-09-17 15:06:21,661 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:06:21,662 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:06:21,662 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:21,662 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:21,662 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:21,662 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:21,662 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:21,663 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:21,663 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:21,663 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:06:21,663 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:06:21,663 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:06:21,757 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:06:21,758 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:06:21,768 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 6 completed successfully
2025-09-17 15:06:21,769 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_enrichment_visualization - HTML preserved
2025-09-17 15:06:21,769 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 7
2025-09-17 15:06:21,769 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 2 steps
2025-09-17 15:06:21,769 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 15:06:21,770 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (6/6), running post-execution evaluation
2025-09-17 15:06:21,770 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 15:06:21,770 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 15:06:23,274 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:06:23,839 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:06:23,856 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 15:06:23,856 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 15:06:24,375 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:06:24,377 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 15:06:25,923 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:06:25,938 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["perform_enrichment_analyses", "search_enrichment_semantic", "display_enrichment_visualization"]
```' (length: 109)
2025-09-17 15:06:25,939 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 15:06:25,939 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 15:06:25,939 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 6 entries
2025-09-17 15:06:25,940 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: perform_enrichment_analyses (execution 3)
2025-09-17 15:06:25,940 | INFO | scchatbot.workflow.nodes.evaluation |    → Enrichment analysis had 714 total significant results
2025-09-17 15:06:25,940 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: search_enrichment_semantic (execution 5)
2025-09-17 15:06:25,940 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_enrichment_visualization (execution 6)
2025-09-17 15:06:25,940 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 15:06:25,940 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-17 15:06:25,941 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-17 15:06:25,941 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for pathway_analysis question
2025-09-17 15:06:25,941 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 15:06:25,941 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 6
2025-09-17 15:06:25,941 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 6
2025-09-17 15:06:25,941 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 15:06:25,942 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 15:06:25,942 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 15:06:25,942 | INFO | scchatbot.workflow.nodes.evaluation |    • Enrichment analyses: ['T cell', 'unknown']
2025-09-17 15:06:25,942 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 15:06:25,943 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (6/6), running post-execution evaluation
2025-09-17 15:06:25,943 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 15:06:25,944 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 15:06:27,438 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:06:27,948 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:06:27,950 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 15:06:27,950 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 15:06:28,634 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:06:28,643 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 15:06:29,387 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:06:29,409 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["perform_enrichment_analyses", "search_enrichment_semantic", "display_enrichment_visualization"]
```' (length: 109)
2025-09-17 15:06:29,409 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 15:06:29,410 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 15:06:29,410 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 6 entries
2025-09-17 15:06:29,410 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: perform_enrichment_analyses (execution 3)
2025-09-17 15:06:29,411 | INFO | scchatbot.workflow.nodes.evaluation |    → Enrichment analysis had 714 total significant results
2025-09-17 15:06:29,411 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: search_enrichment_semantic (execution 5)
2025-09-17 15:06:29,411 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_enrichment_visualization (execution 6)
2025-09-17 15:06:29,411 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 15:06:29,411 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-17 15:06:29,412 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-17 15:06:29,412 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for pathway_analysis question
2025-09-17 15:06:29,412 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 15:06:29,412 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 6
2025-09-17 15:06:29,412 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 6
2025-09-17 15:06:29,413 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 15:06:29,413 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 15:06:29,413 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 15:06:29,413 | INFO | scchatbot.workflow.nodes.evaluation |    • Enrichment analyses: ['T cell', 'unknown']
2025-09-17 15:06:29,413 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 15:06:29,413 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-17 15:06:29,414 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-17 15:06:29,414 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 6 execution steps
2025-09-17 15:06:29,415 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-09-17 15:06:29,415 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-09-17 15:06:29,416 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-09-17 15:06:29,416 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-09-17 15:06:29,416 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: perform_enrichment_analyses for T cell
2025-09-17 15:06:29,416 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling perform_enrichment_analyses with EnrichmentResultAccessor
2025-09-17 15:06:29,417 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 ENRICHMENT: Loaded 3 conditions from mapping file: ['cataract', 'basal laminar drusen', 'age related macular degeneration']
2025-09-17 15:06:29,422 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: display_enrichment_visualization for step_3
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 4 function: display_enrichment_visualization
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'analysis': 'go', 'plot_type': 'both'}
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_enrichment_visualization with VisualizationResultAccessor
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 5: search_enrichment_semantic for T cell
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 SEMANTIC DEBUG: Step 5 parameters: {'cell_type': 'T cell'}
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling search_enrichment_semantic with SemanticSearchResultAccessor
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 SEMANTIC SEARCH DEBUG: Extracted cell_type='T cell', query='unknown'
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 SEMANTIC SEARCH DEBUG: Full parameters: {'cell_type': 'T cell'}
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 6: display_enrichment_visualization for T cell
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 6 function: display_enrichment_visualization
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell', 'analysis': 'go'}
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_enrichment_visualization with VisualizationResultAccessor
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 6 successful steps
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 1317 characters for synthesis
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (56 chars)
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-17 15:06:29,423 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-17 15:06:35,202 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:06:35,205 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 6 execution steps
2025-09-17 15:06:35,206 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: process_cells, success=True, has_result=True
2025-09-17 15:06:35,206 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: validate_processing_results, success=True, has_result=True
2025-09-17 15:06:35,206 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: perform_enrichment_analyses, success=True, has_result=True
2025-09-17 15:06:35,206 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: display_enrichment_visualization, success=True, has_result=True
2025-09-17 15:06:35,206 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Found multiple plots structure in display_enrichment_visualization
2025-09-17 15:06:35,206 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added bar plot plot_1: Top 10 GO_BP Terms - Bar Plot (T cell) (9119 chars)
2025-09-17 15:06:35,207 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added dot plot plot_2: Top 10 GO_BP Terms - Dot Plot (T cell) (9249 chars)
2025-09-17 15:06:35,207 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added bar plot plot_3: Top 10 GO_MF Terms - Bar Plot (T cell) (9158 chars)
2025-09-17 15:06:35,207 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added dot plot plot_4: Top 10 GO_MF Terms - Dot Plot (T cell) (9302 chars)
2025-09-17 15:06:35,207 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added bar plot plot_5: Top 10 GO_CC Terms - Bar Plot (T cell) (9108 chars)
2025-09-17 15:06:35,207 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added dot plot plot_6: Top 10 GO_CC Terms - Dot Plot (T cell) (9253 chars)
2025-09-17 15:06:35,207 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Reached max plots limit (6), stopping
2025-09-17 15:06:35,208 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 6 individual plots (total: 55,189 chars)
2025-09-17 15:06:35,208 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 6 plots, total size: 55,189 bytes
2025-09-17 15:06:35,208 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 6 individual plots
2025-09-17 15:06:35,209 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 6 plots + 1 text (plots first)
2025-09-17 15:06:35,209 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 7 total messages (plots first, then text)
2025-09-17 15:06:35,210 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (1178 chars)
2025-09-17 15:06:35,277 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-17 15:06:35,278 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-17 15:07:30,830 | INFO | scchatbot.multi_agent_base | 🔄 Reusing session state for 'b05944ce' with 8 available cell types
2025-09-17 15:07:30,832 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-17 15:07:30,833 | INFO | scchatbot.workflow.node_base |    Current message: Can you do GSEA with hallmark to T cell?...
2025-09-17 15:07:31,657 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:07:31,675 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-17 15:07:31,675 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-17 15:07:31,676 | INFO | scchatbot.workflow.nodes.input_processing | 🧹 CONTEXT CLEANUP: Removing old context message (56 chars)
2025-09-17 15:07:31,676 | INFO | scchatbot.workflow.nodes.input_processing | 🧹 CONTEXT CLEANUP: Removed 1 old context messages
2025-09-17 15:07:31,676 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-17 15:07:31,676 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 8 cell types: ['Epithelial cell', 'Natural killer cell', 'Mononuclear phagocyte', 'T cell', 'Glial cell', 'Mast cell', 'Stromal cell', 'B cell']
2025-09-17 15:07:31,676 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 250 chars, starts with: 'Cell types currently available in the dataset:
  •...'
2025-09-17 15:07:31,676 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (250 chars)
2025-09-17 15:07:31,676 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'Cell types currently available in the dataset:
  • B cell
  • Epithelial cell
  • Glial cell
  • Mas...'
2025-09-17 15:07:31,676 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (273 chars)
2025-09-17 15:07:31,676 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Preserving 8 discovered cell types from previous operations
2025-09-17 15:07:31,676 | INFO | scchatbot.workflow.nodes.input_processing |    Preserved types: ['B cell', 'Epithelial cell', 'Glial cell', 'Mast cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Stromal cell', 'T cell']
2025-09-17 15:07:31,677 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-17 15:07:31,677 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-17 15:07:31,677 | INFO | scchatbot.workflow.node_base |    Current message: Can you do GSEA with hallmark to T cell?...
2025-09-17 15:07:31,677 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-17 15:07:31,677 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-17 15:07:31,677 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 8
2025-09-17 15:07:31,677 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 4
2025-09-17 15:07:31,677 | INFO | scchatbot.workflow.nodes.planning |    • New types discovered: B cell, Mast cell, Mononuclear phagocyte, Natural killer cell, T cell
2025-09-17 15:07:31,677 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Can you do GSEA with hallmark to T cell?'
2025-09-17 15:07:40,132 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:07:41,958 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:07:41,973 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-09-17 15:07:41,973 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Epithelial cell', 'Natural killer cell', 'Mononuclear phagocyte', 'T cell', 'Glial cell', 'Mast cell', 'Stromal cell', 'B cell']
2025-09-17 15:07:41,973 | INFO | scchatbot.workflow.nodes.planning | 📋 Preserving LLM analysis step: perform_enrichment_analyses(T cell)
2025-09-17 15:07:41,973 | INFO | scchatbot.workflow.nodes.planning | ✅ 'T cell' already available
2025-09-17 15:07:41,973 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-09-17 15:07:41,973 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 0
2025-09-17 15:07:41,973 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 0
2025-09-17 15:07:41,973 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 1
2025-09-17 15:07:41,973 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-09-17 15:07:41,973 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-09-17 15:07:41,973 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 1 enrichment steps
2025-09-17 15:07:41,973 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 2 steps
2025-09-17 15:07:41,973 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Extracting keywords for step 1: T cell
2025-09-17 15:07:42,866 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:07:42,870 | INFO | scchatbot.workflow.nodes.planning | 🧠 LLM enrichment analysis: 'EXPLICIT_METHOD:gsea:hallmark'
2025-09-17 15:07:42,870 | INFO | scchatbot.workflow.nodes.planning | 🎯 Explicit method request detected: ['gsea']
2025-09-17 15:07:42,871 | INFO | scchatbot.workflow.nodes.planning |    Gene set library: hallmark
2025-09-17 15:07:42,871 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 2 steps
2025-09-17 15:07:42,871 | INFO | scchatbot.workflow.nodes.planning |    • 0 process_cells steps
2025-09-17 15:07:42,873 | INFO | scchatbot.workflow.nodes.planning |    • 0 validation steps
2025-09-17 15:07:42,874 | INFO | scchatbot.workflow.nodes.planning |    • 1 analysis steps
2025-09-17 15:07:42,874 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-17 15:07:42,874 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-17 15:07:42,875 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 15:07:42,876 | INFO | scchatbot.workflow.node_base |    Current message: Can you do GSEA with hallmark to T cell?...
2025-09-17 15:07:42,878 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Perform Gene Set Enrichment Analysis (GSEA) enrichment analysis on T cell.
2025-09-17 15:07:42,878 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'perform_enrichment_analyses'
2025-09-17 15:07:42,924 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:07:42,924 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:07:46,087 | INFO | scchatbot.multi_agent_base | ❌ Hierarchical analysis failed: No GeneSets are valid !!! Check your gene_sets input.
2025-09-17 15:07:49,280 | INFO | scchatbot.workflow.nodes.execution | ❌ Step 1 failed: No GeneSets are valid !!! Check your gene_sets input.
2025-09-17 15:07:49,281 | INFO | scchatbot.workflow.nodes.execution | 📄 Text storage: perform_enrichment_analyses - Truncated to 500 chars
2025-09-17 15:07:49,281 | INFO | scchatbot.workflow.nodes.execution | ❌ Step failed: No GeneSets are valid !!! Check your gene_sets input.
2025-09-17 15:07:49,281 | INFO | scchatbot.workflow.nodes.execution | 📝 Recording error and advancing to step 2 (no retries for deterministic operations)
2025-09-17 15:07:49,281 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 15:07:49,281 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 15:07:49,282 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Steps still remaining (1/2), skipping post-execution evaluation
2025-09-17 15:07:49,283 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 15:07:49,283 | INFO | scchatbot.workflow.node_base |    Current message: Can you do GSEA with hallmark to T cell?...
2025-09-17 15:07:49,284 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 2: Visualize the GSEA results for T cells using both barplot and dotplot.
2025-09-17 15:07:49,284 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_enrichment_visualization'
2025-09-17 15:07:49,284 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_enrichment_visualization' with step parameters: {'analysis': 'gsea', 'plot_type': 'both'}
2025-09-17 15:07:49,284 | INFO | scchatbot.workflow.nodes.execution | ❌ No successful gsea enrichment analysis found to visualize
2025-09-17 15:07:49,285 | INFO | scchatbot.workflow.nodes.execution | ❌ Step execution blocked: No gsea enrichment analysis results available to visualize
2025-09-17 15:07:49,285 | INFO | scchatbot.workflow.nodes.execution | 📄 Text storage: display_enrichment_visualization - Truncated to 500 chars
2025-09-17 15:07:49,285 | INFO | scchatbot.workflow.nodes.execution | ❌ Step failed: No gsea enrichment analysis results available to visualize
2025-09-17 15:07:49,285 | INFO | scchatbot.workflow.nodes.execution | 📝 Recording error and advancing to step 3 (no retries for deterministic operations)
2025-09-17 15:07:49,285 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 15:07:49,285 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 15:07:49,286 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (2/2), running post-execution evaluation
2025-09-17 15:07:49,286 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 15:07:49,286 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 15:07:51,115 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:07:51,938 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:07:51,947 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 15:07:51,947 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 15:07:52,697 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:07:52,699 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 15:07:53,194 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:07:53,196 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["perform_enrichment_analyses", "search_enrichment_semantic", "display_enrichment_visualization"]
```' (length: 109)
2025-09-17 15:07:53,196 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 15:07:53,197 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 15:07:53,197 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 2 entries
2025-09-17 15:07:53,197 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: []
2025-09-17 15:07:53,197 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 No direct matches found for T cell, checking for related executions...
2025-09-17 15:07:53,197 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Added enrichment_checker trigger for T cell
2025-09-17 15:07:53,197 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: perform_enrichment_analyses(T cell)
2025-09-17 15:07:53,197 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: search_enrichment_semantic(T cell)
2025-09-17 15:07:53,197 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: display_enrichment_visualization(T cell)
2025-09-17 15:07:53,197 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 3 missing steps for T cell
2025-09-17 15:07:53,197 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 3 total supplementary steps
2025-09-17 15:07:53,198 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for pathway_analysis question
2025-09-17 15:07:53,198 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 3 supplementary steps to execution plan (attempt 1/2)
2025-09-17 15:07:53,198 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-09-17 15:07:53,198 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 15:07:53,198 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 2
2025-09-17 15:07:53,198 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 0
2025-09-17 15:07:53,198 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 2
2025-09-17 15:07:53,198 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 3
2025-09-17 15:07:53,198 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 15:07:53,198 | INFO | scchatbot.workflow.nodes.evaluation |    • Enrichment analyses: ['T cell', 'unknown']
2025-09-17 15:07:53,198 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 15:07:53,199 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 15:07:53,199 | INFO | scchatbot.workflow.node_base |    Current message: Can you do GSEA with hallmark to T cell?...
2025-09-17 15:07:53,201 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Post-evaluation: perform_enrichment_analyses for T cell (with enrichment_checker)
2025-09-17 15:07:53,201 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'perform_enrichment_analyses'
2025-09-17 15:07:53,202 | INFO | scchatbot.multi_agent_base | 🧬 No specific analyses requested, using default: ['reactome', 'go', 'kegg', 'gsea']
2025-09-17 15:07:58,644 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:07:58,645 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:07:58,645 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:07:58,645 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:08:46,925 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 15:08:48,114 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-17 15:08:48,117 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-17 15:08:48,117 | INFO | scchatbot.workflow.function_history | 🔍 Starting enrichment indexing for T cell...
2025-09-17 15:08:48,117 | INFO | scchatbot.workflow.function_history | 🧬 Detected analyses: ['reactome', 'go', 'kegg', 'gsea']
2025-09-17 15:08:48,119 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/reactome/results_summary_T cell.csv (42 terms)
2025-09-17 15:08:48,120 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/reactome/results_raw_T cell.csv (42 terms)
2025-09-17 15:08:48,243 | INFO | scchatbot.workflow.function_history | 📝 Indexed 42 terms for reactome/all_combined
2025-09-17 15:08:48,244 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/reactome_bulk/results_summary_T cell_bulk.csv (32 terms)
2025-09-17 15:08:48,245 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/reactome_bulk/results_raw_T cell_bulk.csv (32 terms)
2025-09-17 15:08:48,306 | INFO | scchatbot.workflow.function_history | 📝 Indexed 32 terms for reactome/bulk
2025-09-17 15:08:48,307 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/reactome_cataract/results_summary_T cell_cataract.csv (40 terms)
2025-09-17 15:08:48,308 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/reactome_cataract/results_raw_T cell_cataract.csv (40 terms)
2025-09-17 15:08:48,387 | INFO | scchatbot.workflow.function_history | 📝 Indexed 40 terms for reactome/cataract
2025-09-17 15:08:48,388 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/reactome_basal laminar drusen/results_summary_T cell_basal laminar drusen.csv (24 terms)
2025-09-17 15:08:48,389 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/reactome_basal laminar drusen/results_raw_T cell_basal laminar drusen.csv (24 terms)
2025-09-17 15:08:48,438 | INFO | scchatbot.workflow.function_history | 📝 Indexed 24 terms for reactome/basal laminar drusen
2025-09-17 15:08:48,439 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/reactome_age related macular degeneration/results_summary_T cell_age related macular degeneration.csv (23 terms)
2025-09-17 15:08:48,439 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/reactome_age related macular degeneration/results_raw_T cell_age related macular degeneration.csv (23 terms)
2025-09-17 15:08:48,488 | INFO | scchatbot.workflow.function_history | 📝 Indexed 23 terms for reactome/age related macular degeneration
2025-09-17 15:08:48,491 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_bp/results_summary_T cell.csv (613 terms)
2025-09-17 15:08:48,495 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_bp/results_raw_T cell.csv (613 terms)
2025-09-17 15:08:49,190 | INFO | scchatbot.workflow.function_history | 📝 Indexed 613 terms for go_bp/all_combined
2025-09-17 15:08:49,192 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_bulk_bp/results_summary_T cell_bulk.csv (1060 terms)
2025-09-17 15:08:49,200 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_bulk_bp/results_raw_T cell_bulk.csv (1060 terms)
2025-09-17 15:08:50,516 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1060 terms for go_bp/bulk
2025-09-17 15:08:50,518 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_cataract_bp/results_summary_T cell_cataract.csv (1138 terms)
2025-09-17 15:08:50,527 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_cataract_bp/results_raw_T cell_cataract.csv (1138 terms)
2025-09-17 15:08:51,890 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1138 terms for go_bp/cataract
2025-09-17 15:08:51,893 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_basal laminar drusen_bp/results_summary_T cell_basal laminar drusen.csv (1175 terms)
2025-09-17 15:08:51,900 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_basal laminar drusen_bp/results_raw_T cell_basal laminar drusen.csv (1175 terms)
2025-09-17 15:08:53,267 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1175 terms for go_bp/basal laminar drusen
2025-09-17 15:08:53,269 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_age related macular degeneration_bp/results_summary_T cell_age related macular degeneration.csv (1049 terms)
2025-09-17 15:08:53,275 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_age related macular degeneration_bp/results_raw_T cell_age related macular degeneration.csv (1049 terms)
2025-09-17 15:08:54,548 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1049 terms for go_bp/age related macular degeneration
2025-09-17 15:08:54,550 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_bp/results_summary_T cell.csv (613 terms)
2025-09-17 15:08:54,554 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_bp/results_raw_T cell.csv (613 terms)
2025-09-17 15:08:55,269 | INFO | scchatbot.workflow.function_history | 📝 Indexed 613 terms for go_cc/all_combined
2025-09-17 15:08:55,271 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_bulk_bp/results_summary_T cell_bulk.csv (1060 terms)
2025-09-17 15:08:55,277 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_bulk_bp/results_raw_T cell_bulk.csv (1060 terms)
2025-09-17 15:08:56,537 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1060 terms for go_cc/bulk
2025-09-17 15:08:56,539 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_cataract_bp/results_summary_T cell_cataract.csv (1138 terms)
2025-09-17 15:08:56,546 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_cataract_bp/results_raw_T cell_cataract.csv (1138 terms)
2025-09-17 15:08:57,899 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1138 terms for go_cc/cataract
2025-09-17 15:08:57,902 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_basal laminar drusen_bp/results_summary_T cell_basal laminar drusen.csv (1175 terms)
2025-09-17 15:08:57,908 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_basal laminar drusen_bp/results_raw_T cell_basal laminar drusen.csv (1175 terms)
2025-09-17 15:08:59,335 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1175 terms for go_cc/basal laminar drusen
2025-09-17 15:08:59,338 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_age related macular degeneration_bp/results_summary_T cell_age related macular degeneration.csv (1049 terms)
2025-09-17 15:08:59,345 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_age related macular degeneration_bp/results_raw_T cell_age related macular degeneration.csv (1049 terms)
2025-09-17 15:09:00,601 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1049 terms for go_cc/age related macular degeneration
2025-09-17 15:09:00,603 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_bp/results_summary_T cell.csv (613 terms)
2025-09-17 15:09:00,607 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_bp/results_raw_T cell.csv (613 terms)
2025-09-17 15:09:01,381 | INFO | scchatbot.workflow.function_history | 📝 Indexed 613 terms for go_mf/all_combined
2025-09-17 15:09:01,383 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_bulk_bp/results_summary_T cell_bulk.csv (1060 terms)
2025-09-17 15:09:01,389 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_bulk_bp/results_raw_T cell_bulk.csv (1060 terms)
2025-09-17 15:09:02,686 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1060 terms for go_mf/bulk
2025-09-17 15:09:02,689 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_cataract_bp/results_summary_T cell_cataract.csv (1138 terms)
2025-09-17 15:09:02,695 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_cataract_bp/results_raw_T cell_cataract.csv (1138 terms)
2025-09-17 15:09:04,062 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1138 terms for go_mf/cataract
2025-09-17 15:09:04,065 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_basal laminar drusen_bp/results_summary_T cell_basal laminar drusen.csv (1175 terms)
2025-09-17 15:09:04,071 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_basal laminar drusen_bp/results_raw_T cell_basal laminar drusen.csv (1175 terms)
2025-09-17 15:09:05,485 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1175 terms for go_mf/basal laminar drusen
2025-09-17 15:09:05,487 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/go_age related macular degeneration_bp/results_summary_T cell_age related macular degeneration.csv (1049 terms)
2025-09-17 15:09:05,494 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/go_age related macular degeneration_bp/results_raw_T cell_age related macular degeneration.csv (1049 terms)
2025-09-17 15:09:06,760 | INFO | scchatbot.workflow.function_history | 📝 Indexed 1049 terms for go_mf/age related macular degeneration
2025-09-17 15:09:06,761 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/kegg/results_summary_T cell.csv (29 terms)
2025-09-17 15:09:06,762 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/kegg/results_raw_T cell.csv (29 terms)
2025-09-17 15:09:06,806 | INFO | scchatbot.workflow.function_history | 📝 Indexed 29 terms for kegg/all_combined
2025-09-17 15:09:06,808 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/kegg_bulk/results_summary_T cell_bulk.csv (28 terms)
2025-09-17 15:09:06,809 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/kegg_bulk/results_raw_T cell_bulk.csv (28 terms)
2025-09-17 15:09:06,849 | INFO | scchatbot.workflow.function_history | 📝 Indexed 28 terms for kegg/bulk
2025-09-17 15:09:06,850 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/kegg_cataract/results_summary_T cell_cataract.csv (29 terms)
2025-09-17 15:09:06,851 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/kegg_cataract/results_raw_T cell_cataract.csv (29 terms)
2025-09-17 15:09:06,893 | INFO | scchatbot.workflow.function_history | 📝 Indexed 29 terms for kegg/cataract
2025-09-17 15:09:06,894 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/kegg_basal laminar drusen/results_summary_T cell_basal laminar drusen.csv (21 terms)
2025-09-17 15:09:06,895 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/kegg_basal laminar drusen/results_raw_T cell_basal laminar drusen.csv (21 terms)
2025-09-17 15:09:06,928 | INFO | scchatbot.workflow.function_history | 📝 Indexed 21 terms for kegg/basal laminar drusen
2025-09-17 15:09:06,929 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/kegg_age related macular degeneration/results_summary_T cell_age related macular degeneration.csv (20 terms)
2025-09-17 15:09:06,930 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/kegg_age related macular degeneration/results_raw_T cell_age related macular degeneration.csv (20 terms)
2025-09-17 15:09:06,965 | INFO | scchatbot.workflow.function_history | 📝 Indexed 20 terms for kegg/age related macular degeneration
2025-09-17 15:09:06,966 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/gsea/results_summary_T cell.csv (9 terms)
2025-09-17 15:09:06,967 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/gsea/results_raw_T cell.csv (9 terms)
2025-09-17 15:09:06,986 | INFO | scchatbot.workflow.function_history | 📝 Indexed 9 terms for gsea/all_combined
2025-09-17 15:09:06,987 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/gsea_bulk/results_summary_T cell_bulk.csv (21 terms)
2025-09-17 15:09:06,988 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/gsea_bulk/results_raw_T cell_bulk.csv (21 terms)
2025-09-17 15:09:07,018 | INFO | scchatbot.workflow.function_history | 📝 Indexed 21 terms for gsea/bulk
2025-09-17 15:09:07,019 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/gsea_cataract/results_summary_T cell_cataract.csv (26 terms)
2025-09-17 15:09:07,020 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/gsea_cataract/results_raw_T cell_cataract.csv (26 terms)
2025-09-17 15:09:07,053 | INFO | scchatbot.workflow.function_history | 📝 Indexed 26 terms for gsea/cataract
2025-09-17 15:09:07,054 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/gsea_basal laminar drusen/results_summary_T cell_basal laminar drusen.csv (20 terms)
2025-09-17 15:09:07,055 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/gsea_basal laminar drusen/results_raw_T cell_basal laminar drusen.csv (20 terms)
2025-09-17 15:09:07,084 | INFO | scchatbot.workflow.function_history | 📝 Indexed 20 terms for gsea/basal laminar drusen
2025-09-17 15:09:07,085 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/gsea_age related macular degeneration/results_summary_T cell_age related macular degeneration.csv (21 terms)
2025-09-17 15:09:07,085 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/gsea_age related macular degeneration/results_raw_T cell_age related macular degeneration.csv (21 terms)
2025-09-17 15:09:07,118 | INFO | scchatbot.workflow.function_history | 📝 Indexed 21 terms for gsea/age related macular degeneration
2025-09-17 15:09:07,118 | INFO | scchatbot.workflow.function_history | ✅ Enrichment indexing complete: 15490 terms indexed for T cell
2025-09-17 15:09:07,136 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-09-17 15:09:07,138 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: perform_enrichment_analyses - Full data preserved
2025-09-17 15:09:07,138 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-09-17 15:09:07,138 | INFO | scchatbot.workflow.nodes.execution | 🚀 Continuing execution - next step is supplementary: search_enrichment_semantic
2025-09-17 15:09:07,138 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Post-evaluation: search_enrichment_semantic for T cell
2025-09-17 15:09:07,138 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'search_enrichment_semantic'
2025-09-17 15:09:07,138 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-09-17 15:09:07,139 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: search_enrichment_semantic - Full data preserved
2025-09-17 15:09:07,139 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-09-17 15:09:07,139 | INFO | scchatbot.workflow.nodes.execution | 🚀 Continuing execution - next step is supplementary: display_enrichment_visualization
2025-09-17 15:09:07,139 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 5: Post-evaluation: display_enrichment_visualization for T cell
2025-09-17 15:09:07,139 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_enrichment_visualization'
2025-09-17 15:09:07,139 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_enrichment_visualization' with step parameters: {'cell_type': 'T cell', 'analysis': 'go'}
2025-09-17 15:09:07,139 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_enrichment_visualization called with kwargs: {'cell_type': 'T cell', 'analysis': 'go'}
2025-09-17 15:09:07,139 | INFO | scchatbot.multi_agent_base | 🎨 GO Visualization call: display_enrichment_visualization(analysis='go', cell_type='T cell', plot_type='both', domain='BP')
2025-09-17 15:09:07,159 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:09:07,160 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:09:07,160 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpvo7end1r.
2025-09-17 15:09:07,164 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:09:07,164 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpxxxfx7ag.
2025-09-17 15:09:07,164 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpxxxfx7ag
2025-09-17 15:09:07,779 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpvo7end1r/index.html
2025-09-17 15:09:07,781 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:09:08,319 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:09:08,319 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:09:08,319 | INFO | kaleido.kaleido | Got E746
2025-09-17 15:09:08,319 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_BP_Terms___Bar_Plot_T_cell.png
2025-09-17 15:09:08,319 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_BP_Terms___Bar_Plot_T_cell.png.
2025-09-17 15:09:08,392 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_BP_Terms___Bar_Plot_T_cell.png.
2025-09-17 15:09:08,394 | INFO | kaleido.kaleido | Reloading tab E746 before return.
2025-09-17 15:09:08,479 | INFO | kaleido.kaleido | Putting tab E746 back (queue size: 0).
2025-09-17 15:09:08,479 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:09:08,479 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:09:08,479 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:08,479 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:08,479 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:08,479 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:08,479 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:08,480 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:08,480 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:08,481 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:08,481 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:08,482 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:08,570 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:08,570 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:08,572 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:09:08,572 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:09:08,573 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpshxjhk7r.
2025-09-17 15:09:08,573 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:09:08,573 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp835flc9s.
2025-09-17 15:09:08,573 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp835flc9s
2025-09-17 15:09:09,015 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpshxjhk7r/index.html
2025-09-17 15:09:09,016 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:09:09,590 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:09:09,590 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:09:09,590 | INFO | kaleido.kaleido | Got E968
2025-09-17 15:09:09,590 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_BP_Terms___Bar_Plot_T_cell.pdf
2025-09-17 15:09:09,591 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_BP_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 15:09:09,636 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_BP_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 15:09:09,689 | INFO | kaleido.kaleido | Reloading tab E968 before return.
2025-09-17 15:09:09,767 | INFO | kaleido.kaleido | Putting tab E968 back (queue size: 0).
2025-09-17 15:09:09,768 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:09:09,768 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:09:09,768 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:09,768 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:09,768 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:09,768 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:09,768 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:09,769 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:09,769 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:09,769 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:09,769 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:09,769 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:09,859 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:09,859 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:09,875 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:09,875 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:09,875 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:09,875 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:09,893 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:09:09,893 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:09:09,894 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmppe4mx9b8.
2025-09-17 15:09:09,894 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:09:09,894 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpc36rgih3.
2025-09-17 15:09:09,894 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpc36rgih3
2025-09-17 15:09:10,335 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmppe4mx9b8/index.html
2025-09-17 15:09:10,335 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:09:10,921 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:09:10,922 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:09:10,922 | INFO | kaleido.kaleido | Got 2AD5
2025-09-17 15:09:10,922 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_BP_Terms___Dot_Plot_T_cell.png
2025-09-17 15:09:10,922 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_BP_Terms___Dot_Plot_T_cell.png.
2025-09-17 15:09:10,998 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_BP_Terms___Dot_Plot_T_cell.png.
2025-09-17 15:09:10,999 | INFO | kaleido.kaleido | Reloading tab 2AD5 before return.
2025-09-17 15:09:11,088 | INFO | kaleido.kaleido | Putting tab 2AD5 back (queue size: 0).
2025-09-17 15:09:11,088 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:09:11,088 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:09:11,088 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:11,088 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:11,088 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:11,088 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:11,088 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:11,089 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:11,089 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:11,089 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:11,089 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:11,090 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:11,177 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:11,177 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:11,179 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:09:11,180 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:09:11,180 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp_r3q6r8r.
2025-09-17 15:09:11,180 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:09:11,181 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpgz479f3n.
2025-09-17 15:09:11,181 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpgz479f3n
2025-09-17 15:09:11,628 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp_r3q6r8r/index.html
2025-09-17 15:09:11,629 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:09:12,202 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:09:12,203 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:09:12,203 | INFO | kaleido.kaleido | Got 5765
2025-09-17 15:09:12,203 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_BP_Terms___Dot_Plot_T_cell.pdf
2025-09-17 15:09:12,203 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_BP_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 15:09:12,252 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_BP_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 15:09:12,304 | INFO | kaleido.kaleido | Reloading tab 5765 before return.
2025-09-17 15:09:12,387 | INFO | kaleido.kaleido | Putting tab 5765 back (queue size: 0).
2025-09-17 15:09:12,387 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:09:12,387 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:09:12,388 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:12,388 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:12,388 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:12,388 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:12,388 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:12,389 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:12,389 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:12,389 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:12,389 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:12,389 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:12,483 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:12,483 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:12,495 | INFO | scchatbot.multi_agent_base | 🎨 GO Visualization call: display_enrichment_visualization(analysis='go', cell_type='T cell', plot_type='both', domain='MF')
2025-09-17 15:09:12,502 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:12,502 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:12,502 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:12,502 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:12,518 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:09:12,519 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:09:12,519 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmps4_kag2y.
2025-09-17 15:09:12,519 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:09:12,520 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp4m2st3mq.
2025-09-17 15:09:12,520 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp4m2st3mq
2025-09-17 15:09:12,953 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmps4_kag2y/index.html
2025-09-17 15:09:12,954 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:09:13,467 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:09:13,467 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:09:13,467 | INFO | kaleido.kaleido | Got EDDB
2025-09-17 15:09:13,467 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_MF_Terms___Bar_Plot_T_cell.png
2025-09-17 15:09:13,468 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_MF_Terms___Bar_Plot_T_cell.png.
2025-09-17 15:09:13,532 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_MF_Terms___Bar_Plot_T_cell.png.
2025-09-17 15:09:13,533 | INFO | kaleido.kaleido | Reloading tab EDDB before return.
2025-09-17 15:09:13,818 | INFO | kaleido.kaleido | Putting tab EDDB back (queue size: 0).
2025-09-17 15:09:13,819 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:09:13,819 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:09:13,819 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:13,819 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:13,819 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:13,819 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:13,819 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:13,821 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:13,821 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:13,821 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:13,821 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:13,821 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:13,964 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:13,964 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:13,967 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:09:13,967 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:09:13,968 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpupacmor1.
2025-09-17 15:09:13,968 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:09:13,968 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpouw51vib.
2025-09-17 15:09:13,968 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpouw51vib
2025-09-17 15:09:14,406 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpupacmor1/index.html
2025-09-17 15:09:14,407 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:09:14,971 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:09:14,972 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:09:14,972 | INFO | kaleido.kaleido | Got CC59
2025-09-17 15:09:14,972 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_MF_Terms___Bar_Plot_T_cell.pdf
2025-09-17 15:09:14,972 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_MF_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 15:09:14,973 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:14,973 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:15,020 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_MF_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 15:09:15,074 | INFO | kaleido.kaleido | Reloading tab CC59 before return.
2025-09-17 15:09:15,160 | INFO | kaleido.kaleido | Putting tab CC59 back (queue size: 0).
2025-09-17 15:09:15,160 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:09:15,160 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:09:15,161 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:15,161 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:15,161 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:15,161 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:15,161 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:15,162 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:15,162 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:15,162 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:15,163 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:15,163 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:15,250 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:15,250 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:15,281 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:09:15,282 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:09:15,282 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp_qkrv5n8.
2025-09-17 15:09:15,282 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:09:15,283 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmphmo3lys6.
2025-09-17 15:09:15,283 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmphmo3lys6
2025-09-17 15:09:15,725 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp_qkrv5n8/index.html
2025-09-17 15:09:15,726 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:09:16,298 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:09:16,298 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:09:16,298 | INFO | kaleido.kaleido | Got 4D25
2025-09-17 15:09:16,298 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_MF_Terms___Dot_Plot_T_cell.png
2025-09-17 15:09:16,298 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_MF_Terms___Dot_Plot_T_cell.png.
2025-09-17 15:09:16,368 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_MF_Terms___Dot_Plot_T_cell.png.
2025-09-17 15:09:16,369 | INFO | kaleido.kaleido | Reloading tab 4D25 before return.
2025-09-17 15:09:16,450 | INFO | kaleido.kaleido | Putting tab 4D25 back (queue size: 0).
2025-09-17 15:09:16,450 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:09:16,450 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:09:16,451 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:16,451 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:16,451 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:16,451 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:16,451 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:16,452 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:16,452 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:16,452 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:16,452 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:16,452 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:16,538 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:16,538 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:16,540 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:09:16,541 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:09:16,541 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpyzbltrjn.
2025-09-17 15:09:16,541 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:09:16,542 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpxzyl5_re.
2025-09-17 15:09:16,542 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpxzyl5_re
2025-09-17 15:09:16,982 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpyzbltrjn/index.html
2025-09-17 15:09:16,984 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:09:17,526 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:09:17,527 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:09:17,527 | INFO | kaleido.kaleido | Got B981
2025-09-17 15:09:17,527 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_MF_Terms___Dot_Plot_T_cell.pdf
2025-09-17 15:09:17,527 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_MF_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 15:09:17,577 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_MF_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 15:09:17,631 | INFO | kaleido.kaleido | Reloading tab B981 before return.
2025-09-17 15:09:17,713 | INFO | kaleido.kaleido | Putting tab B981 back (queue size: 0).
2025-09-17 15:09:17,713 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:09:17,713 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:09:17,713 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:17,713 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:17,713 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:17,713 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:17,713 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:17,714 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:17,714 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:17,714 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:17,714 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:17,714 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:17,806 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:17,807 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:17,819 | INFO | scchatbot.multi_agent_base | 🎨 GO Visualization call: display_enrichment_visualization(analysis='go', cell_type='T cell', plot_type='both', domain='CC')
2025-09-17 15:09:17,827 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:17,827 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:17,827 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:17,827 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:17,844 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:17,846 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:17,847 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:09:17,847 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:09:17,848 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp_ncuwawf.
2025-09-17 15:09:17,848 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:09:17,850 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmplineu4m1.
2025-09-17 15:09:17,850 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmplineu4m1
2025-09-17 15:09:18,290 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp_ncuwawf/index.html
2025-09-17 15:09:18,291 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:09:18,854 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:09:18,854 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:09:18,854 | INFO | kaleido.kaleido | Got F014
2025-09-17 15:09:18,854 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_CC_Terms___Bar_Plot_T_cell.png
2025-09-17 15:09:18,854 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_CC_Terms___Bar_Plot_T_cell.png.
2025-09-17 15:09:18,923 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_CC_Terms___Bar_Plot_T_cell.png.
2025-09-17 15:09:18,924 | INFO | kaleido.kaleido | Reloading tab F014 before return.
2025-09-17 15:09:19,006 | INFO | kaleido.kaleido | Putting tab F014 back (queue size: 0).
2025-09-17 15:09:19,006 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:09:19,006 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:09:19,007 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:19,007 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:19,007 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:19,007 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:19,007 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:19,007 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:19,008 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:19,008 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:19,008 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:19,008 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:19,098 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:19,098 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:19,100 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:09:19,101 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:09:19,101 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp_f4w1v1c.
2025-09-17 15:09:19,102 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:09:19,102 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp93cxmme1.
2025-09-17 15:09:19,102 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp93cxmme1
2025-09-17 15:09:19,525 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp_f4w1v1c/index.html
2025-09-17 15:09:19,525 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:09:20,093 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:09:20,094 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:09:20,094 | INFO | kaleido.kaleido | Got 03E1
2025-09-17 15:09:20,094 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_CC_Terms___Bar_Plot_T_cell.pdf
2025-09-17 15:09:20,094 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_CC_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 15:09:20,141 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_CC_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 15:09:20,193 | INFO | kaleido.kaleido | Reloading tab 03E1 before return.
2025-09-17 15:09:20,276 | INFO | kaleido.kaleido | Putting tab 03E1 back (queue size: 0).
2025-09-17 15:09:20,276 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:09:20,276 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:09:20,276 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:20,276 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:20,276 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:20,276 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:20,277 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:20,277 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:20,278 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:20,278 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:20,278 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:20,278 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:20,363 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:20,363 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:20,376 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:20,376 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:20,376 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:20,377 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:20,396 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:09:20,397 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:09:20,397 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp0_n7fg7k.
2025-09-17 15:09:20,398 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:09:20,398 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp7lfmf3e0.
2025-09-17 15:09:20,398 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp7lfmf3e0
2025-09-17 15:09:20,841 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp0_n7fg7k/index.html
2025-09-17 15:09:20,843 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:09:21,373 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:09:21,374 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:09:21,374 | INFO | kaleido.kaleido | Got 8F04
2025-09-17 15:09:21,374 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_CC_Terms___Dot_Plot_T_cell.png
2025-09-17 15:09:21,374 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_CC_Terms___Dot_Plot_T_cell.png.
2025-09-17 15:09:21,443 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_CC_Terms___Dot_Plot_T_cell.png.
2025-09-17 15:09:21,444 | INFO | kaleido.kaleido | Reloading tab 8F04 before return.
2025-09-17 15:09:21,525 | INFO | kaleido.kaleido | Putting tab 8F04 back (queue size: 0).
2025-09-17 15:09:21,525 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:09:21,526 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:09:21,526 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:21,526 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:21,526 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:21,526 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:21,526 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:21,527 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:21,527 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:21,527 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:21,527 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:21,527 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:21,616 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:21,616 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:21,618 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 15:09:21,619 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 15:09:21,619 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp8ymgaa53.
2025-09-17 15:09:21,619 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 15:09:21,620 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpae2r_ro9.
2025-09-17 15:09:21,620 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpae2r_ro9
2025-09-17 15:09:22,077 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp8ymgaa53/index.html
2025-09-17 15:09:22,077 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 15:09:22,647 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 15:09:22,648 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 15:09:22,648 | INFO | kaleido.kaleido | Got 4AC3
2025-09-17 15:09:22,648 | INFO | kaleido._kaleido_tab | Processing Top_10_GO_CC_Terms___Dot_Plot_T_cell.pdf
2025-09-17 15:09:22,648 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GO_CC_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 15:09:22,649 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:22,649 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:22,695 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GO_CC_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 15:09:22,749 | INFO | kaleido.kaleido | Reloading tab 4AC3 before return.
2025-09-17 15:09:22,830 | INFO | kaleido.kaleido | Putting tab 4AC3 back (queue size: 0).
2025-09-17 15:09:22,831 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 15:09:22,831 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 15:09:22,831 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:22,831 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:22,831 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:22,831 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:22,831 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:22,832 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:22,832 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:22,832 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 15:09:22,832 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 15:09:22,832 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 15:09:22,922 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 15:09:22,922 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 15:09:22,933 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 5 completed successfully
2025-09-17 15:09:22,935 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_enrichment_visualization - HTML preserved
2025-09-17 15:09:22,935 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 6
2025-09-17 15:09:22,935 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 3 steps
2025-09-17 15:09:22,935 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 15:09:22,936 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (5/5), running post-execution evaluation
2025-09-17 15:09:22,936 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 15:09:22,936 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 15:09:24,678 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:09:26,242 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:09:26,256 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 15:09:26,257 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 15:09:26,800 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:09:26,807 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 15:09:27,281 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:09:27,287 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["perform_enrichment_analyses", "search_enrichment_semantic", "display_enrichment_visualization"]
```' (length: 109)
2025-09-17 15:09:27,288 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 15:09:27,288 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 15:09:27,290 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 5 entries
2025-09-17 15:09:27,290 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: perform_enrichment_analyses (execution 3)
2025-09-17 15:09:27,291 | INFO | scchatbot.workflow.nodes.evaluation |    → Enrichment analysis had 794 total significant results
2025-09-17 15:09:27,291 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: search_enrichment_semantic (execution 4)
2025-09-17 15:09:27,291 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_enrichment_visualization (execution 5)
2025-09-17 15:09:27,291 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 15:09:27,291 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-17 15:09:27,291 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-17 15:09:27,292 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for pathway_analysis question
2025-09-17 15:09:27,292 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 15:09:27,292 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 5
2025-09-17 15:09:27,293 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-09-17 15:09:27,293 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 2
2025-09-17 15:09:27,293 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 15:09:27,293 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 15:09:27,294 | INFO | scchatbot.workflow.nodes.evaluation |    • Enrichment analyses: ['T cell', 'unknown']
2025-09-17 15:09:27,294 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 15:09:27,296 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (5/5), running post-execution evaluation
2025-09-17 15:09:27,297 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 15:09:27,297 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 15:09:29,671 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:09:30,219 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:09:30,220 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 15:09:30,220 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 15:09:31,414 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:09:31,415 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 15:09:31,997 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:09:32,005 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["perform_enrichment_analyses", "search_enrichment_semantic", "display_enrichment_visualization"]
```' (length: 109)
2025-09-17 15:09:32,005 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 15:09:32,005 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 15:09:32,005 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 5 entries
2025-09-17 15:09:32,005 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: perform_enrichment_analyses (execution 3)
2025-09-17 15:09:32,005 | INFO | scchatbot.workflow.nodes.evaluation |    → Enrichment analysis had 794 total significant results
2025-09-17 15:09:32,005 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: search_enrichment_semantic (execution 4)
2025-09-17 15:09:32,005 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_enrichment_visualization (execution 5)
2025-09-17 15:09:32,005 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 15:09:32,005 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-17 15:09:32,005 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-17 15:09:32,005 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for pathway_analysis question
2025-09-17 15:09:32,006 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 15:09:32,006 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 5
2025-09-17 15:09:32,006 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 3
2025-09-17 15:09:32,006 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 2
2025-09-17 15:09:32,006 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 15:09:32,006 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 15:09:32,006 | INFO | scchatbot.workflow.nodes.evaluation |    • Enrichment analyses: ['T cell', 'unknown']
2025-09-17 15:09:32,006 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 15:09:32,006 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-17 15:09:32,006 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-17 15:09:32,006 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 5 execution steps
2025-09-17 15:09:32,006 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: perform_enrichment_analyses for T cell
2025-09-17 15:09:32,007 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling perform_enrichment_analyses with EnrichmentResultAccessor
2025-09-17 15:09:32,007 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 ENRICHMENT: Loaded 3 conditions from mapping file: ['cataract', 'basal laminar drusen', 'age related macular degeneration']
2025-09-17 15:09:32,017 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: search_enrichment_semantic for T cell
2025-09-17 15:09:32,017 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 SEMANTIC DEBUG: Step 4 parameters: {'cell_type': 'T cell'}
2025-09-17 15:09:32,017 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling search_enrichment_semantic with SemanticSearchResultAccessor
2025-09-17 15:09:32,017 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 SEMANTIC SEARCH DEBUG: Extracted cell_type='T cell', query='unknown'
2025-09-17 15:09:32,017 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 SEMANTIC SEARCH DEBUG: Full parameters: {'cell_type': 'T cell'}
2025-09-17 15:09:32,017 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 5: display_enrichment_visualization for T cell
2025-09-17 15:09:32,017 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 5 function: display_enrichment_visualization
2025-09-17 15:09:32,017 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell', 'analysis': 'go'}
2025-09-17 15:09:32,017 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_enrichment_visualization with VisualizationResultAccessor
2025-09-17 15:09:32,017 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 3 successful steps
2025-09-17 15:09:32,018 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 1762 characters for synthesis
2025-09-17 15:09:32,018 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-17 15:09:32,018 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-17 15:09:32,018 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (273 chars)
2025-09-17 15:09:32,018 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-17 15:09:32,018 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-17 15:09:32,018 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-17 15:09:35,300 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:09:35,323 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 5 execution steps
2025-09-17 15:09:35,323 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: perform_enrichment_analyses, success=False, has_result=True
2025-09-17 15:09:35,323 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: display_enrichment_visualization, success=False, has_result=True
2025-09-17 15:09:35,323 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: perform_enrichment_analyses, success=True, has_result=True
2025-09-17 15:09:35,324 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: search_enrichment_semantic, success=True, has_result=True
2025-09-17 15:09:35,324 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 5: display_enrichment_visualization, success=True, has_result=True
2025-09-17 15:09:35,324 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Found multiple plots structure in display_enrichment_visualization
2025-09-17 15:09:35,324 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added bar plot plot_1: Top 10 GO_BP Terms - Bar Plot (T cell) (9119 chars)
2025-09-17 15:09:35,324 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added dot plot plot_2: Top 10 GO_BP Terms - Dot Plot (T cell) (9249 chars)
2025-09-17 15:09:35,324 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added bar plot plot_3: Top 10 GO_MF Terms - Bar Plot (T cell) (9158 chars)
2025-09-17 15:09:35,324 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added dot plot plot_4: Top 10 GO_MF Terms - Dot Plot (T cell) (9302 chars)
2025-09-17 15:09:35,324 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added bar plot plot_5: Top 10 GO_CC Terms - Bar Plot (T cell) (9108 chars)
2025-09-17 15:09:35,324 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added dot plot plot_6: Top 10 GO_CC Terms - Dot Plot (T cell) (9253 chars)
2025-09-17 15:09:35,324 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 6 individual plots (total: 55,189 chars)
2025-09-17 15:09:35,324 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 6 plots, total size: 55,189 bytes
2025-09-17 15:09:35,324 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 6 individual plots
2025-09-17 15:09:35,324 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 6 plots + 1 text (plots first)
2025-09-17 15:09:35,324 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 7 total messages (plots first, then text)
2025-09-17 15:09:35,325 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (533 chars)
2025-09-17 15:09:35,357 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-17 15:09:35,358 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-17 15:29:22,038 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-17 15:29:27,357 | INFO | faiss.loader | Loading faiss.
2025-09-17 15:29:27,383 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-17 15:29:28,389 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 15:29:30,084 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 15:29:30,170 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-17 15:29:30,171 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 15:29:30,180 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-17 15:29:31,128 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-17 15:29:31,128 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-17 15:29:31,132 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-17 15:29:48,037 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:30:19,650 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:33:56,376 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:33:57,281 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-09-17 15:33:57,282 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-09-17 15:33:57,282 | INFO | scchatbot.multi_agent_base | 1
2025-09-17 15:33:57,718 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-09-17 15:33:57,718 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-17 15:33:59,444 | INFO | scchatbot.multi_agent_base | 2
2025-09-17 15:33:59,446 | INFO | scchatbot.multi_agent_base | 3
2025-09-17 15:33:59,446 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-09-17 15:34:01,178 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 15:34:04,203 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 15:34:07,215 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 15:34:09,324 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'b05944ce'
2025-09-17 15:34:09,327 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-17 15:34:09,327 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 15:34:09,996 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:34:10,010 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-17 15:34:10,010 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-17 15:34:10,010 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-17 15:34:10,010 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 0 cell types: []
2025-09-17 15:34:10,010 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 33 chars, starts with: 'No current session data available...'
2025-09-17 15:34:10,011 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (33 chars)
2025-09-17 15:34:10,011 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'No current session data available...'
2025-09-17 15:34:10,011 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (56 chars)
2025-09-17 15:34:10,011 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 4 initial cell types
2025-09-17 15:34:10,011 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-17 15:34:10,012 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-17 15:34:10,012 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 15:34:10,012 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-17 15:34:10,012 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-17 15:34:10,012 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 4
2025-09-17 15:34:10,012 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-09-17 15:34:10,012 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Do GSEA with Hallmark to T cell'
2025-09-17 15:34:19,612 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:34:21,577 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:34:21,578 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-09-17 15:34:21,578 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Epithelial cell', 'Stromal cell', 'Immune cell', 'Glial cell']
2025-09-17 15:34:21,578 | INFO | scchatbot.workflow.nodes.planning | 📋 Preserving LLM analysis step: perform_enrichment_analyses(Immune cell)
2025-09-17 15:34:21,578 | INFO | scchatbot.workflow.nodes.planning | 🔧 Fixed cell type name using RAG-validated type: 'Immune cell' → 'T cell'
2025-09-17 15:34:21,607 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-09-17 15:34:21,634 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-09-17 15:34:21,635 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-09-17 15:34:21,635 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-09-17 15:34:21,635 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-09-17 15:34:21,635 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-09-17 15:34:21,635 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-09-17 15:34:21,635 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-09-17 15:34:21,635 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 1
2025-09-17 15:34:21,635 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-09-17 15:34:21,635 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-09-17 15:34:21,635 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 1 enrichment steps
2025-09-17 15:34:21,635 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 4 steps
2025-09-17 15:34:21,635 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Extracting keywords for step 3: T cell
2025-09-17 15:34:22,227 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:34:22,229 | INFO | scchatbot.workflow.nodes.planning | 🧠 LLM enrichment analysis: '"EXPLICIT_METHOD:gsea:Hallmark"'
2025-09-17 15:34:22,230 | INFO | scchatbot.workflow.nodes.planning | 🔍 Pathway-specific request: Using enrichment_checker for '"EXPLICIT_METHOD:gsea:Hallmark"'
2025-09-17 15:34:22,713 | INFO | scchatbot.workflow.nodes.planning | ✅ EnrichmentChecker enhanced step:
2025-09-17 15:34:22,714 | INFO | scchatbot.workflow.nodes.planning |    • analyses: ['go', 'gsea']
2025-09-17 15:34:22,714 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 4 steps
2025-09-17 15:34:22,714 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-09-17 15:34:22,714 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-09-17 15:34:22,714 | INFO | scchatbot.workflow.nodes.planning |    • 2 analysis steps
2025-09-17 15:34:22,714 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-17 15:34:22,714 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-17 15:34:22,715 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 15:34:22,715 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 15:34:22,717 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-09-17 15:34:22,717 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-09-17 15:34:29,400 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:40:04,374 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-17 15:40:09,091 | INFO | faiss.loader | Loading faiss.
2025-09-17 15:40:09,117 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-17 15:40:09,944 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 15:40:11,832 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 15:40:11,916 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-17 15:40:11,916 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 15:40:11,924 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-17 15:40:12,816 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-17 15:40:12,816 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-17 15:40:12,818 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-17 15:40:24,892 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:40:43,715 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:43:30,758 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:43:31,540 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-09-17 15:43:31,540 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-09-17 15:43:31,540 | INFO | scchatbot.multi_agent_base | 1
2025-09-17 15:43:31,953 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-09-17 15:43:31,954 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-17 15:43:33,332 | INFO | scchatbot.multi_agent_base | 2
2025-09-17 15:43:33,335 | INFO | scchatbot.multi_agent_base | 3
2025-09-17 15:43:33,335 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-09-17 15:44:10,375 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 15:44:13,682 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 15:44:16,695 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 15:44:18,220 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'b05944ce'
2025-09-17 15:44:18,222 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-17 15:44:18,223 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 15:44:19,643 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:44:19,652 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-17 15:44:19,653 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-17 15:44:19,653 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-17 15:44:19,653 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 0 cell types: []
2025-09-17 15:44:19,653 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 33 chars, starts with: 'No current session data available...'
2025-09-17 15:44:19,653 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (33 chars)
2025-09-17 15:44:19,653 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'No current session data available...'
2025-09-17 15:44:19,654 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (56 chars)
2025-09-17 15:44:19,654 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 4 initial cell types
2025-09-17 15:44:19,654 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-17 15:44:19,655 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-17 15:44:19,656 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 15:44:19,658 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-17 15:44:19,659 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-17 15:44:19,659 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 4
2025-09-17 15:44:19,660 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-09-17 15:44:19,660 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Do GSEA with Hallmark to T cell'
2025-09-17 15:44:24,830 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:44:26,468 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:44:26,471 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-09-17 15:44:26,471 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Epithelial cell', 'Stromal cell', 'Immune cell', 'Glial cell']
2025-09-17 15:44:26,471 | INFO | scchatbot.workflow.nodes.planning | 📋 Preserving LLM analysis step: perform_enrichment_analyses(Immune cell)
2025-09-17 15:44:26,471 | INFO | scchatbot.workflow.nodes.planning | 🔧 Fixed cell type name using RAG-validated type: 'Immune cell' → 'T cell'
2025-09-17 15:44:26,503 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-09-17 15:44:26,518 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-09-17 15:44:26,518 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-09-17 15:44:26,518 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-09-17 15:44:26,518 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-09-17 15:44:26,518 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-09-17 15:44:26,518 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-09-17 15:44:26,518 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-09-17 15:44:26,518 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 1
2025-09-17 15:44:26,518 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-09-17 15:44:26,518 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-09-17 15:44:26,518 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 1 enrichment steps
2025-09-17 15:44:26,518 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 4 steps
2025-09-17 15:44:26,518 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Extracting keywords for step 3: T cell
2025-09-17 15:44:27,444 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:44:27,455 | INFO | scchatbot.workflow.nodes.planning | 🧠 LLM enrichment analysis: 'EXPLICIT_METHOD:gsea:Hallmark'
2025-09-17 15:44:27,455 | INFO | scchatbot.workflow.nodes.planning | 🧠 LLM result after cleaning: 'EXPLICIT_METHOD:gsea:Hallmark'
2025-09-17 15:44:27,455 | INFO | scchatbot.workflow.nodes.planning | 🔍 Searching for gene set library matching 'Hallmark'
2025-09-17 15:44:27,490 | INFO | scchatbot.workflow.nodes.planning | ⚠️ Could not find gene set library for 'Hallmark', using default
2025-09-17 15:44:27,490 | INFO | scchatbot.workflow.nodes.planning | 🎯 Explicit method request detected: ['gsea']
2025-09-17 15:44:27,490 | INFO | scchatbot.workflow.nodes.planning |    Gene set library: MSigDB_Hallmark_2020
2025-09-17 15:44:27,490 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 4 steps
2025-09-17 15:44:27,490 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-09-17 15:44:27,490 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-09-17 15:44:27,490 | INFO | scchatbot.workflow.nodes.planning |    • 2 analysis steps
2025-09-17 15:44:27,491 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-17 15:44:27,491 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-17 15:44:27,491 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 15:44:27,491 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 15:44:27,492 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-09-17 15:44:27,492 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-09-17 15:44:33,017 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 15:44:38,562 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:03:04,291 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-17 16:03:07,761 | INFO | faiss.loader | Loading faiss.
2025-09-17 16:03:07,774 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-17 16:03:08,413 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 16:03:10,095 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 16:03:10,166 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-17 16:03:10,167 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 16:03:10,174 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-17 16:03:11,117 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-17 16:03:11,117 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-17 16:03:11,119 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-17 16:03:31,705 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:04:01,502 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:07:28,045 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:07:28,711 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-09-17 16:07:28,712 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-09-17 16:07:28,712 | INFO | scchatbot.multi_agent_base | 1
2025-09-17 16:07:29,147 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-09-17 16:07:29,147 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-17 16:07:30,894 | INFO | scchatbot.multi_agent_base | 2
2025-09-17 16:07:30,896 | INFO | scchatbot.multi_agent_base | 3
2025-09-17 16:07:30,896 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-09-17 16:07:46,454 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 16:07:49,658 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 16:07:52,671 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 16:07:53,419 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'b05944ce'
2025-09-17 16:07:53,421 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-17 16:07:53,421 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 16:07:54,467 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:07:54,470 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state", "recent analysis results", "what other analyses available"]
```'
2025-09-17 16:07:54,471 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 3 context sources: ['current_session_state', 'recent analysis results', 'what other analyses available']
2025-09-17 16:07:54,471 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-17 16:07:54,471 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 0 cell types: []
2025-09-17 16:07:54,471 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 33 chars, starts with: 'No current session data available...'
2025-09-17 16:07:54,471 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (33 chars)
2025-09-17 16:07:54,471 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'No current session data available...'
2025-09-17 16:07:54,523 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (56 chars)
2025-09-17 16:07:54,523 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 4 initial cell types
2025-09-17 16:07:54,523 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-17 16:07:54,524 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-17 16:07:54,524 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 16:07:54,524 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-17 16:07:54,524 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-17 16:07:54,524 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 4
2025-09-17 16:07:54,524 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-09-17 16:07:54,524 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Do GSEA with Hallmark to T cell'
2025-09-17 16:08:11,349 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:08:13,896 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:08:13,910 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-09-17 16:08:13,911 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Epithelial cell', 'Stromal cell', 'Immune cell', 'Glial cell']
2025-09-17 16:08:13,911 | INFO | scchatbot.workflow.nodes.planning | 📋 Preserving LLM analysis step: perform_enrichment_analyses(Immune cell)
2025-09-17 16:08:13,911 | INFO | scchatbot.workflow.nodes.planning | 🔧 Fixed cell type name using RAG-validated type: 'Immune cell' → 'T cell'
2025-09-17 16:08:13,945 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-09-17 16:08:13,962 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-09-17 16:08:13,962 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-09-17 16:08:13,962 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-09-17 16:08:13,962 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-09-17 16:08:13,962 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-09-17 16:08:13,962 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-09-17 16:08:13,962 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-09-17 16:08:13,962 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 1
2025-09-17 16:08:13,962 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-09-17 16:08:13,962 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-09-17 16:08:13,962 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 1 enrichment steps
2025-09-17 16:08:13,962 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 4 steps
2025-09-17 16:08:13,962 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Extracting keywords for step 3: T cell
2025-09-17 16:08:14,843 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:08:14,847 | INFO | scchatbot.workflow.nodes.planning | 🧠 LLM enrichment analysis: 'EXPLICIT_METHOD:gsea:Hallmark'
2025-09-17 16:08:14,847 | INFO | scchatbot.workflow.nodes.planning | 🧠 LLM result after cleaning: 'EXPLICIT_METHOD:gsea:Hallmark'
2025-09-17 16:08:14,847 | INFO | scchatbot.workflow.nodes.planning | 🔍 Searching for gene set library matching 'Hallmark'
2025-09-17 16:08:15,914 | INFO | scchatbot.workflow.nodes.planning | ✅ Selected best match: 'MSigDB_Hallmark_2020'
2025-09-17 16:08:15,914 | INFO | scchatbot.workflow.nodes.planning | 🎯 Explicit method request detected: ['gsea']
2025-09-17 16:08:15,914 | INFO | scchatbot.workflow.nodes.planning |    Gene set library: MSigDB_Hallmark_2020
2025-09-17 16:08:15,914 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 4 steps
2025-09-17 16:08:15,914 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-09-17 16:08:15,914 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-09-17 16:08:15,914 | INFO | scchatbot.workflow.nodes.planning |    • 2 analysis steps
2025-09-17 16:08:15,915 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-17 16:08:15,915 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-17 16:08:15,915 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 16:08:15,915 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 16:08:15,916 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-09-17 16:08:15,916 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-09-17 16:08:24,516 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:08:36,970 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:09:12,732 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:09:12,738 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-09-17 16:09:12,738 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-09-17 16:09:12,740 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['T cell', 'B cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Mast cell']
2025-09-17 16:09:12,759 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: T cell
2025-09-17 16:09:12,759 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: B cell
2025-09-17 16:09:12,759 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mononuclear phagocyte
2025-09-17 16:09:12,759 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Natural killer cell
2025-09-17 16:09:12,759 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mast cell
2025-09-17 16:09:12,761 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-09-17 16:09:12,761 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-09-17 16:09:12,761 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 16:09:12,761 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 16:09:12,762 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-09-17 16:09:12,762 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-09-17 16:09:12,762 | INFO | scchatbot.workflow.node_base |    Current message: Validating Immune cell -> ['T cell']...
2025-09-17 16:09:12,762 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'T cell'
2025-09-17 16:09:12,762 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-09-17 16:09:12,762 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Validation passed: All 1 expected cell types found successfully
2025-09-17 16:09:12,762 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: success
2025-09-17 16:09:12,762 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['T cell'], found=['T cell'], missing=[]
2025-09-17 16:09:12,762 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'success', 'message': 'All 1 expected cell types found successfully', 'found_children': ['T cell'], 'missing_children': [], 'available_types': ['Epithelial cell', 'Mononuclear phagocyte', 'T cell', 'B cell', 'Glial cell', 'Stromal cell', 'Natural killer cell', 'Mast cell']}
2025-09-17 16:09:12,762 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: []
2025-09-17 16:09:12,762 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 2 remaining steps...
2025-09-17 16:09:12,762 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3: perform_enrichment_analyses(cell_type='T cell')
2025-09-17 16:09:12,762 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3 cell type 'T cell' not in missing list []
2025-09-17 16:09:12,762 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 4: display_enrichment_visualization(analysis='gsea')
2025-09-17 16:09:12,762 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 4 cell type 'None' not in missing list []
2025-09-17 16:09:12,762 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 3
2025-09-17 16:09:12,762 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 16:09:12,762 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 16:09:12,763 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Perform Gene Set Enrichment Analysis (GSEA) enrichment analysis on T cell.
2025-09-17 16:09:12,763 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'perform_enrichment_analyses'
2025-09-17 16:09:31,271 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 16:09:32,865 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-17 16:09:32,866 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-17 16:09:32,866 | INFO | scchatbot.workflow.function_history | 🔍 Starting enrichment indexing for T cell...
2025-09-17 16:09:32,867 | INFO | scchatbot.workflow.function_history | 🧬 Detected analyses: ['gsea']
2025-09-17 16:09:32,867 | INFO | scchatbot.workflow.function_history | ⚠️ Summary CSV not found: scchatbot/enrichment/gsea/results_summary_T cell.csv
2025-09-17 16:09:32,867 | INFO | scchatbot.workflow.function_history | ⚠️ Summary CSV not found: scchatbot/enrichment/gsea_bulk/results_summary_T cell_bulk.csv
2025-09-17 16:09:32,867 | INFO | scchatbot.workflow.function_history | ⚠️ Summary CSV not found: scchatbot/enrichment/gsea_cataract/results_summary_T cell_cataract.csv
2025-09-17 16:09:32,867 | INFO | scchatbot.workflow.function_history | ⚠️ Summary CSV not found: scchatbot/enrichment/gsea_basal laminar drusen/results_summary_T cell_basal laminar drusen.csv
2025-09-17 16:09:32,867 | INFO | scchatbot.workflow.function_history | ⚠️ Summary CSV not found: scchatbot/enrichment/gsea_age related macular degeneration/results_summary_T cell_age related macular degeneration.csv
2025-09-17 16:09:32,867 | INFO | scchatbot.workflow.function_history | ✅ Enrichment indexing complete: 0 terms indexed for T cell
2025-09-17 16:09:32,867 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-09-17 16:09:32,869 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: perform_enrichment_analyses - Full data preserved
2025-09-17 16:09:32,869 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-09-17 16:09:32,869 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 16:09:32,869 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 16:09:32,870 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Steps still remaining (3/4), skipping post-execution evaluation
2025-09-17 16:09:32,871 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 16:09:32,871 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 16:09:32,872 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Visualize the GSEA enrichment results for the Immune cell type using both barplot and dotplot.
2025-09-17 16:09:32,872 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_enrichment_visualization'
2025-09-17 16:09:32,872 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_enrichment_visualization' with step parameters: {'analysis': 'gsea', 'plot_type': 'both'}
2025-09-17 16:09:32,873 | INFO | scchatbot.workflow.nodes.execution | ✅ Found matching gsea analysis for visualization: T cell
2025-09-17 16:09:32,873 | INFO | scchatbot.workflow.nodes.execution | 📝 Updating step parameters with enhanced params for execution history tracking
2025-09-17 16:09:32,873 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_enrichment_visualization called with kwargs: {'analysis': 'gsea', 'plot_type': 'both', 'cell_type': 'T cell'}
2025-09-17 16:09:32,873 | INFO | scchatbot.multi_agent_base | 🎨 Visualization call: display_enrichment_visualization(analysis='gsea', cell_type='T cell', plot_type='both', kwargs={})
2025-09-17 16:09:33,034 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 16:09:33,035 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 16:09:33,035 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpo7niaslk.
2025-09-17 16:09:33,035 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 16:09:33,035 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpi8l_t9dy.
2025-09-17 16:09:33,035 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpi8l_t9dy
2025-09-17 16:09:33,625 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpo7niaslk/index.html
2025-09-17 16:09:33,626 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 16:09:34,179 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 16:09:34,180 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 16:09:34,180 | INFO | kaleido.kaleido | Got 1378
2025-09-17 16:09:34,180 | INFO | kaleido._kaleido_tab | Processing Top_10_GSEA_Terms___Bar_Plot_T_cell.png
2025-09-17 16:09:34,180 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GSEA_Terms___Bar_Plot_T_cell.png.
2025-09-17 16:09:34,252 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GSEA_Terms___Bar_Plot_T_cell.png.
2025-09-17 16:09:34,253 | INFO | kaleido.kaleido | Reloading tab 1378 before return.
2025-09-17 16:09:34,330 | INFO | kaleido.kaleido | Putting tab 1378 back (queue size: 0).
2025-09-17 16:09:34,330 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 16:09:34,330 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 16:09:34,331 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:09:34,331 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:09:34,331 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:09:34,331 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:09:34,331 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:09:34,332 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:09:34,332 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:09:34,332 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:09:34,332 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:09:34,332 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:09:34,419 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:09:34,419 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:09:34,421 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 16:09:34,422 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 16:09:34,422 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpu81bg26f.
2025-09-17 16:09:34,422 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 16:09:34,423 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp7pruukcl.
2025-09-17 16:09:34,423 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp7pruukcl
2025-09-17 16:09:34,832 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpu81bg26f/index.html
2025-09-17 16:09:34,834 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 16:09:35,358 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 16:09:35,359 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 16:09:35,359 | INFO | kaleido.kaleido | Got E107
2025-09-17 16:09:35,359 | INFO | kaleido._kaleido_tab | Processing Top_10_GSEA_Terms___Bar_Plot_T_cell.pdf
2025-09-17 16:09:35,359 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GSEA_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 16:09:35,404 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GSEA_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 16:09:35,453 | INFO | kaleido.kaleido | Reloading tab E107 before return.
2025-09-17 16:09:35,527 | INFO | kaleido.kaleido | Putting tab E107 back (queue size: 0).
2025-09-17 16:09:35,528 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 16:09:35,528 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 16:09:35,528 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:09:35,528 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:09:35,528 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:09:35,528 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:09:35,528 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:09:35,529 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:09:35,529 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:09:35,529 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:09:35,530 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:09:35,530 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:09:35,619 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:09:35,619 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:09:35,635 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:09:35,635 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:09:35,654 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 16:09:35,655 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 16:09:35,655 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpl7dl2bdo.
2025-09-17 16:09:35,655 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 16:09:35,656 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpljp923qz.
2025-09-17 16:09:35,656 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpljp923qz
2025-09-17 16:09:36,080 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpl7dl2bdo/index.html
2025-09-17 16:09:36,081 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 16:09:36,636 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 16:09:36,639 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 16:09:36,639 | INFO | kaleido.kaleido | Got C293
2025-09-17 16:09:36,639 | INFO | kaleido._kaleido_tab | Processing Top_10_GSEA_Terms___Dot_Plot_T_cell.png
2025-09-17 16:09:36,640 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GSEA_Terms___Dot_Plot_T_cell.png.
2025-09-17 16:09:36,709 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GSEA_Terms___Dot_Plot_T_cell.png.
2025-09-17 16:09:36,710 | INFO | kaleido.kaleido | Reloading tab C293 before return.
2025-09-17 16:09:36,785 | INFO | kaleido.kaleido | Putting tab C293 back (queue size: 0).
2025-09-17 16:09:36,786 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 16:09:36,786 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 16:09:36,786 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:09:36,787 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:09:36,787 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:09:36,787 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:09:36,787 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:09:36,788 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:09:36,788 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:09:36,788 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:09:36,788 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:09:36,788 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:09:36,879 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:09:36,879 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:09:36,881 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 16:09:36,883 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 16:09:36,883 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpdwirhk4y.
2025-09-17 16:09:36,884 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 16:09:36,884 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpez3pj41f.
2025-09-17 16:09:36,884 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpez3pj41f
2025-09-17 16:09:37,314 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpdwirhk4y/index.html
2025-09-17 16:09:37,316 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 16:09:37,839 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 16:09:37,840 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 16:09:37,840 | INFO | kaleido.kaleido | Got AE46
2025-09-17 16:09:37,840 | INFO | kaleido._kaleido_tab | Processing Top_10_GSEA_Terms___Dot_Plot_T_cell.pdf
2025-09-17 16:09:37,840 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GSEA_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 16:09:37,887 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GSEA_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 16:09:37,940 | INFO | kaleido.kaleido | Reloading tab AE46 before return.
2025-09-17 16:09:38,019 | INFO | kaleido.kaleido | Putting tab AE46 back (queue size: 0).
2025-09-17 16:09:38,019 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 16:09:38,020 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 16:09:38,020 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:09:38,020 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:09:38,020 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:09:38,020 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:09:38,020 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:09:38,021 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:09:38,021 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:09:38,021 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:09:38,021 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:09:38,021 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:09:38,110 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:09:38,110 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:09:38,121 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-09-17 16:09:38,122 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_enrichment_visualization - HTML preserved
2025-09-17 16:09:38,122 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-09-17 16:09:38,122 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 16:09:38,122 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 16:09:38,123 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-17 16:09:38,123 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 16:09:38,123 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 16:09:41,127 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:09:41,927 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:09:41,944 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 16:09:41,944 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 16:09:42,396 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:09:42,400 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 16:09:43,194 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:09:43,206 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["perform_enrichment_analyses", "search_enrichment_semantic", "display_enrichment_visualization"]
```' (length: 109)
2025-09-17 16:09:43,208 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 16:09:43,208 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 16:09:43,208 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-17 16:09:43,209 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: perform_enrichment_analyses (execution 3)
2025-09-17 16:09:43,210 | INFO | scchatbot.workflow.nodes.evaluation |    → Enrichment analysis had 0 total significant results
2025-09-17 16:09:43,210 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['perform_enrichment_analyses']
2025-09-17 16:09:43,210 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: search_enrichment_semantic(T cell)
2025-09-17 16:09:43,211 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: display_enrichment_visualization(T cell)
2025-09-17 16:09:43,211 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 2 missing steps for T cell
2025-09-17 16:09:43,212 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 2 total supplementary steps
2025-09-17 16:09:43,213 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for pathway_analysis question
2025-09-17 16:09:43,215 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 2 supplementary steps to execution plan (attempt 1/2)
2025-09-17 16:09:43,216 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-09-17 16:09:43,216 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 16:09:43,216 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-17 16:09:43,216 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-17 16:09:43,216 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 16:09:43,216 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 2
2025-09-17 16:09:43,216 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 16:09:43,216 | INFO | scchatbot.workflow.nodes.evaluation |    • Enrichment analyses: ['T cell', 'unknown']
2025-09-17 16:09:43,216 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 16:09:43,217 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 16:09:43,217 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 16:09:43,219 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 5: Post-evaluation: search_enrichment_semantic for T cell
2025-09-17 16:09:43,219 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'search_enrichment_semantic'
2025-09-17 16:09:43,220 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 5 completed successfully
2025-09-17 16:09:43,221 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: search_enrichment_semantic - Full data preserved
2025-09-17 16:09:43,221 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 6
2025-09-17 16:09:43,221 | INFO | scchatbot.workflow.nodes.execution | 🚀 Continuing execution - next step is supplementary: display_enrichment_visualization
2025-09-17 16:09:43,221 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 6: Post-evaluation: display_enrichment_visualization for T cell
2025-09-17 16:09:43,221 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_enrichment_visualization'
2025-09-17 16:09:43,222 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_enrichment_visualization' with step parameters: {'cell_type': 'T cell', 'analysis': 'go'}
2025-09-17 16:09:43,222 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_enrichment_visualization called with kwargs: {'cell_type': 'T cell', 'analysis': 'go'}
2025-09-17 16:09:43,222 | INFO | scchatbot.multi_agent_base | 🎨 GO Visualization call: display_enrichment_visualization(analysis='go', cell_type='T cell', plot_type='both', domain='BP')
2025-09-17 16:09:43,222 | INFO | scchatbot.multi_agent_base | 🎨 GO Visualization call: display_enrichment_visualization(analysis='go', cell_type='T cell', plot_type='both', domain='MF')
2025-09-17 16:09:43,223 | INFO | scchatbot.multi_agent_base | 🎨 GO Visualization call: display_enrichment_visualization(analysis='go', cell_type='T cell', plot_type='both', domain='CC')
2025-09-17 16:09:43,223 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 6 completed successfully
2025-09-17 16:09:43,224 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_enrichment_visualization - HTML preserved
2025-09-17 16:09:43,224 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 7
2025-09-17 16:09:43,224 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 2 steps
2025-09-17 16:09:43,224 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 16:09:43,224 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (6/6), running post-execution evaluation
2025-09-17 16:09:43,224 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 16:09:43,225 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 16:09:45,493 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:09:46,166 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:09:46,178 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 16:09:46,178 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 16:09:46,610 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:09:46,611 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 16:09:47,504 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:09:47,515 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["perform_enrichment_analyses", "search_enrichment_semantic", "display_enrichment_visualization"]
```' (length: 109)
2025-09-17 16:09:47,516 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 16:09:47,516 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 16:09:47,516 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 6 entries
2025-09-17 16:09:47,516 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: perform_enrichment_analyses (execution 3)
2025-09-17 16:09:47,516 | INFO | scchatbot.workflow.nodes.evaluation |    → Enrichment analysis had 0 total significant results
2025-09-17 16:09:47,517 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: search_enrichment_semantic (execution 5)
2025-09-17 16:09:47,517 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_enrichment_visualization (execution 6)
2025-09-17 16:09:47,517 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 16:09:47,517 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-17 16:09:47,517 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-17 16:09:47,517 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for pathway_analysis question
2025-09-17 16:09:47,517 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 16:09:47,517 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 6
2025-09-17 16:09:47,517 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 6
2025-09-17 16:09:47,518 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 16:09:47,518 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 16:09:47,518 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 16:09:47,518 | INFO | scchatbot.workflow.nodes.evaluation |    • Enrichment analyses: ['T cell', 'unknown']
2025-09-17 16:09:47,518 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 16:09:47,519 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (6/6), running post-execution evaluation
2025-09-17 16:09:47,519 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 16:09:47,519 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 16:09:50,004 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:09:50,517 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:09:50,520 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 16:09:50,521 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 16:09:50,975 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:09:50,982 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 16:09:51,744 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:09:51,747 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["perform_enrichment_analyses", "search_enrichment_semantic", "display_enrichment_visualization"]
```' (length: 109)
2025-09-17 16:09:51,747 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 16:09:51,748 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 16:09:51,748 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 6 entries
2025-09-17 16:09:51,748 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: perform_enrichment_analyses (execution 3)
2025-09-17 16:09:51,748 | INFO | scchatbot.workflow.nodes.evaluation |    → Enrichment analysis had 0 total significant results
2025-09-17 16:09:51,748 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: search_enrichment_semantic (execution 5)
2025-09-17 16:09:51,748 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_enrichment_visualization (execution 6)
2025-09-17 16:09:51,748 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 16:09:51,748 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-17 16:09:51,749 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-17 16:09:51,749 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for pathway_analysis question
2025-09-17 16:09:51,749 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 16:09:51,749 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 6
2025-09-17 16:09:51,749 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 6
2025-09-17 16:09:51,749 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 16:09:51,749 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 16:09:51,749 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 16:09:51,749 | INFO | scchatbot.workflow.nodes.evaluation |    • Enrichment analyses: ['T cell', 'unknown']
2025-09-17 16:09:51,749 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 16:09:51,751 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-17 16:09:51,752 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-17 16:09:51,753 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 6 execution steps
2025-09-17 16:09:51,753 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-09-17 16:09:51,753 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-09-17 16:09:51,753 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-09-17 16:09:51,753 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-09-17 16:09:51,754 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: perform_enrichment_analyses for T cell
2025-09-17 16:09:51,754 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling perform_enrichment_analyses with EnrichmentResultAccessor
2025-09-17 16:09:51,754 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 ENRICHMENT: Loaded 3 conditions from mapping file: ['cataract', 'basal laminar drusen', 'age related macular degeneration']
2025-09-17 16:09:51,755 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: display_enrichment_visualization for step_3
2025-09-17 16:09:51,755 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 4 function: display_enrichment_visualization
2025-09-17 16:09:51,755 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'analysis': 'gsea', 'plot_type': 'both'}
2025-09-17 16:09:51,755 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_enrichment_visualization with VisualizationResultAccessor
2025-09-17 16:09:51,755 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 5: search_enrichment_semantic for T cell
2025-09-17 16:09:51,755 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 SEMANTIC DEBUG: Step 5 parameters: {'cell_type': 'T cell'}
2025-09-17 16:09:51,755 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling search_enrichment_semantic with SemanticSearchResultAccessor
2025-09-17 16:09:51,755 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 SEMANTIC SEARCH DEBUG: Extracted cell_type='T cell', query='unknown'
2025-09-17 16:09:51,755 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 SEMANTIC SEARCH DEBUG: Full parameters: {'cell_type': 'T cell'}
2025-09-17 16:09:51,755 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 6: display_enrichment_visualization for T cell
2025-09-17 16:09:51,755 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 6 function: display_enrichment_visualization
2025-09-17 16:09:51,756 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell', 'analysis': 'go'}
2025-09-17 16:09:51,756 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_enrichment_visualization with VisualizationResultAccessor
2025-09-17 16:09:51,756 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 6 successful steps
2025-09-17 16:09:51,756 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 697 characters for synthesis
2025-09-17 16:09:51,756 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-17 16:09:51,756 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-17 16:09:51,756 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (56 chars)
2025-09-17 16:09:51,756 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-17 16:09:51,756 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-17 16:09:51,756 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-17 16:09:53,180 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:09:53,183 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 6 execution steps
2025-09-17 16:09:53,184 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: process_cells, success=True, has_result=True
2025-09-17 16:09:53,184 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: validate_processing_results, success=True, has_result=True
2025-09-17 16:09:53,184 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: perform_enrichment_analyses, success=True, has_result=True
2025-09-17 16:09:53,184 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: display_enrichment_visualization, success=True, has_result=True
2025-09-17 16:09:53,184 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Found multiple plots structure in display_enrichment_visualization
2025-09-17 16:09:53,184 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added bar plot plot_1: Top 10 GSEA Terms - Bar Plot (T cell) (9073 chars)
2025-09-17 16:09:53,184 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added dot plot plot_2: Top 10 GSEA Terms - Dot Plot (T cell) (9217 chars)
2025-09-17 16:09:53,184 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 5: search_enrichment_semantic, success=True, has_result=True
2025-09-17 16:09:53,184 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 6: display_enrichment_visualization, success=True, has_result=True
2025-09-17 16:09:53,185 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Found multiple plots structure in display_enrichment_visualization
2025-09-17 16:09:53,185 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added both plot plot_3: GO_BP Enrichment - T cell (101 chars)
2025-09-17 16:09:53,185 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added both plot plot_4: GO_MF Enrichment - T cell (101 chars)
2025-09-17 16:09:53,185 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added both plot plot_5: GO_CC Enrichment - T cell (101 chars)
2025-09-17 16:09:53,185 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 5 individual plots (total: 18,593 chars)
2025-09-17 16:09:53,185 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 5 plots, total size: 18,593 bytes
2025-09-17 16:09:53,185 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 5 individual plots
2025-09-17 16:09:53,185 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 5 plots + 1 text (plots first)
2025-09-17 16:09:53,185 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 6 total messages (plots first, then text)
2025-09-17 16:09:53,188 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (375 chars)
2025-09-17 16:09:53,262 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-17 16:09:53,262 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-17 16:14:57,526 | INFO | django.utils.autoreload | /Users/seanchiu/Desktop/scchat_fin/scChat/scchatbot/analysis/visualizations.py changed, reloading.
2025-09-17 16:14:58,213 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:14:58,214 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:14:58,215 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:14:58,215 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:14:58,215 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:14:58,216 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:14:59,935 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-17 16:15:04,510 | INFO | faiss.loader | Loading faiss.
2025-09-17 16:15:04,525 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-17 16:15:05,392 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 16:15:07,119 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 16:15:07,166 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-17 16:15:07,166 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 16:15:07,175 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-17 16:15:08,020 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-17 16:15:08,020 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-17 16:15:08,021 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-17 16:15:12,198 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 16:19:23,057 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-17 16:19:28,272 | INFO | faiss.loader | Loading faiss.
2025-09-17 16:19:28,298 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-17 16:19:29,126 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 16:19:30,862 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 16:19:30,938 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-17 16:19:30,939 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 16:19:30,946 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-17 16:19:31,898 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-17 16:19:31,898 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-17 16:19:31,900 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-17 16:19:49,586 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:19:58,775 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:20:18,747 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:20:19,819 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-09-17 16:20:19,819 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-09-17 16:20:19,819 | INFO | scchatbot.multi_agent_base | 1
2025-09-17 16:20:20,210 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-09-17 16:20:20,210 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-17 16:20:21,585 | INFO | scchatbot.multi_agent_base | 2
2025-09-17 16:20:21,587 | INFO | scchatbot.multi_agent_base | 3
2025-09-17 16:20:21,587 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-09-17 16:22:36,106 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 16:22:39,691 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 16:22:41,814 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'b05944ce'
2025-09-17 16:22:41,817 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-17 16:22:41,817 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 16:22:42,706 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 16:22:42,773 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:22:42,788 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-17 16:22:42,788 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-17 16:22:42,788 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-17 16:22:42,788 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 0 cell types: []
2025-09-17 16:22:42,788 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 33 chars, starts with: 'No current session data available...'
2025-09-17 16:22:42,788 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (33 chars)
2025-09-17 16:22:42,788 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'No current session data available...'
2025-09-17 16:22:42,788 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (56 chars)
2025-09-17 16:22:42,788 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 4 initial cell types
2025-09-17 16:22:42,788 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-17 16:22:42,789 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-17 16:22:42,789 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 16:22:42,789 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-17 16:22:42,789 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-17 16:22:42,789 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 4
2025-09-17 16:22:42,789 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-09-17 16:22:42,789 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Do GSEA with Hallmark to T cell'
2025-09-17 16:22:53,115 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:22:54,967 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:22:54,978 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-09-17 16:22:54,978 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Epithelial cell', 'Stromal cell', 'Immune cell', 'Glial cell']
2025-09-17 16:22:54,979 | INFO | scchatbot.workflow.nodes.planning | 📋 Preserving LLM analysis step: perform_enrichment_analyses(T cell)
2025-09-17 16:22:55,021 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-09-17 16:22:55,049 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-09-17 16:22:55,050 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-09-17 16:22:55,050 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-09-17 16:22:55,050 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-09-17 16:22:55,050 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-09-17 16:22:55,050 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-09-17 16:22:55,050 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-09-17 16:22:55,051 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 1
2025-09-17 16:22:55,051 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-09-17 16:22:55,051 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-09-17 16:22:55,051 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 1 enrichment steps
2025-09-17 16:22:55,051 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 4 steps
2025-09-17 16:22:55,051 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Extracting keywords for step 3: T cell
2025-09-17 16:22:55,695 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:22:55,696 | INFO | scchatbot.workflow.nodes.planning | 🧠 LLM enrichment analysis: 'EXPLICIT_METHOD:gsea:Hallmark'
2025-09-17 16:22:55,696 | INFO | scchatbot.workflow.nodes.planning | 🧠 LLM result after cleaning: 'EXPLICIT_METHOD:gsea:Hallmark'
2025-09-17 16:22:55,696 | INFO | scchatbot.workflow.nodes.planning | 🔍 Searching for gene set library matching 'Hallmark'
2025-09-17 16:22:56,815 | INFO | scchatbot.workflow.nodes.planning | ✅ Selected best match: 'MSigDB_Hallmark_2020'
2025-09-17 16:22:56,815 | INFO | scchatbot.workflow.nodes.planning | 🎯 Explicit method request detected: ['gsea']
2025-09-17 16:22:56,815 | INFO | scchatbot.workflow.nodes.planning |    Gene set library: MSigDB_Hallmark_2020
2025-09-17 16:22:56,815 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 4 steps
2025-09-17 16:22:56,815 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-09-17 16:22:56,815 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-09-17 16:22:56,815 | INFO | scchatbot.workflow.nodes.planning |    • 2 analysis steps
2025-09-17 16:22:56,815 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-17 16:22:56,815 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-17 16:22:56,815 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 16:22:56,815 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 16:22:56,816 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-09-17 16:22:56,816 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-09-17 16:23:03,662 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:23:10,443 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:23:30,692 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:23:30,696 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-09-17 16:23:30,696 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-09-17 16:23:30,697 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['T cell', 'B cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Mast cell']
2025-09-17 16:23:30,721 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: T cell
2025-09-17 16:23:30,721 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: B cell
2025-09-17 16:23:30,722 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mononuclear phagocyte
2025-09-17 16:23:30,722 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Natural killer cell
2025-09-17 16:23:30,722 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mast cell
2025-09-17 16:23:30,723 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-09-17 16:23:30,723 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-09-17 16:23:30,723 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 16:23:30,723 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 16:23:30,724 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-09-17 16:23:30,724 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-09-17 16:23:30,724 | INFO | scchatbot.workflow.node_base |    Current message: Validating Immune cell -> ['T cell']...
2025-09-17 16:23:30,725 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'T cell'
2025-09-17 16:23:30,725 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-09-17 16:23:30,725 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Validation passed: All 1 expected cell types found successfully
2025-09-17 16:23:30,725 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: success
2025-09-17 16:23:30,725 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['T cell'], found=['T cell'], missing=[]
2025-09-17 16:23:30,725 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'success', 'message': 'All 1 expected cell types found successfully', 'found_children': ['T cell'], 'missing_children': [], 'available_types': ['T cell', 'Mast cell', 'Epithelial cell', 'Glial cell', 'Natural killer cell', 'Stromal cell', 'B cell', 'Mononuclear phagocyte']}
2025-09-17 16:23:30,725 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: []
2025-09-17 16:23:30,725 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 2 remaining steps...
2025-09-17 16:23:30,725 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3: perform_enrichment_analyses(cell_type='T cell')
2025-09-17 16:23:30,725 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3 cell type 'T cell' not in missing list []
2025-09-17 16:23:30,725 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 4: display_enrichment_visualization(analysis='gsea')
2025-09-17 16:23:30,725 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 4 cell type 'None' not in missing list []
2025-09-17 16:23:30,726 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 3
2025-09-17 16:23:30,726 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 16:23:30,726 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 16:23:30,727 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Perform Gene Set Enrichment Analysis (GSEA) enrichment analysis on T cell.
2025-09-17 16:23:30,727 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'perform_enrichment_analyses'
2025-09-17 16:23:52,155 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 16:23:53,700 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-17 16:23:53,704 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-17 16:23:53,704 | INFO | scchatbot.workflow.function_history | 🔍 Starting enrichment indexing for T cell...
2025-09-17 16:23:53,704 | INFO | scchatbot.workflow.function_history | 🧬 Detected analyses: ['gsea']
2025-09-17 16:23:53,704 | INFO | scchatbot.workflow.function_history | ⚠️ Summary CSV not found: scchatbot/enrichment/gsea/results_summary_T cell.csv
2025-09-17 16:23:53,704 | INFO | scchatbot.workflow.function_history | ⚠️ Summary CSV not found: scchatbot/enrichment/gsea_bulk/results_summary_T cell_bulk.csv
2025-09-17 16:23:53,704 | INFO | scchatbot.workflow.function_history | ⚠️ Summary CSV not found: scchatbot/enrichment/gsea_cataract/results_summary_T cell_cataract.csv
2025-09-17 16:23:53,705 | INFO | scchatbot.workflow.function_history | ⚠️ Summary CSV not found: scchatbot/enrichment/gsea_basal laminar drusen/results_summary_T cell_basal laminar drusen.csv
2025-09-17 16:23:53,705 | INFO | scchatbot.workflow.function_history | ⚠️ Summary CSV not found: scchatbot/enrichment/gsea_age related macular degeneration/results_summary_T cell_age related macular degeneration.csv
2025-09-17 16:23:53,705 | INFO | scchatbot.workflow.function_history | ✅ Enrichment indexing complete: 0 terms indexed for T cell
2025-09-17 16:23:53,705 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-09-17 16:23:53,706 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: perform_enrichment_analyses - Full data preserved
2025-09-17 16:23:53,707 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-09-17 16:23:53,707 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 16:23:53,707 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 16:23:53,708 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Steps still remaining (3/4), skipping post-execution evaluation
2025-09-17 16:23:53,708 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 16:23:53,708 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 16:23:53,709 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Visualize the GSEA enrichment results for T cells using both barplot and dotplot.
2025-09-17 16:23:53,709 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_enrichment_visualization'
2025-09-17 16:23:53,709 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_enrichment_visualization' with step parameters: {'analysis': 'gsea', 'plot_type': 'both'}
2025-09-17 16:23:53,710 | INFO | scchatbot.workflow.nodes.execution | ✅ Found matching gsea analysis for visualization: T cell
2025-09-17 16:23:53,710 | INFO | scchatbot.workflow.nodes.execution | 📝 Updating step parameters with enhanced params for execution history tracking
2025-09-17 16:23:53,710 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_enrichment_visualization called with kwargs: {'analysis': 'gsea', 'plot_type': 'both', 'cell_type': 'T cell'}
2025-09-17 16:23:53,710 | INFO | scchatbot.multi_agent_base | 🎨 Visualization call: display_enrichment_visualization(analysis='gsea', cell_type='T cell', plot_type='both', kwargs={})
2025-09-17 16:23:53,883 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 16:23:53,884 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 16:23:53,884 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp_e5or7bc.
2025-09-17 16:23:53,885 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 16:23:53,885 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpnwk5brbc.
2025-09-17 16:23:53,885 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpnwk5brbc
2025-09-17 16:23:54,582 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp_e5or7bc/index.html
2025-09-17 16:23:54,584 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 16:23:55,100 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 16:23:55,101 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 16:23:55,101 | INFO | kaleido.kaleido | Got 4258
2025-09-17 16:23:55,101 | INFO | kaleido._kaleido_tab | Processing Top_10_GSEA_Terms___Bar_Plot_T_cell.png
2025-09-17 16:23:55,101 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GSEA_Terms___Bar_Plot_T_cell.png.
2025-09-17 16:23:55,169 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GSEA_Terms___Bar_Plot_T_cell.png.
2025-09-17 16:23:55,170 | INFO | kaleido.kaleido | Reloading tab 4258 before return.
2025-09-17 16:23:55,243 | INFO | kaleido.kaleido | Putting tab 4258 back (queue size: 0).
2025-09-17 16:23:55,243 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 16:23:55,243 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 16:23:55,244 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:23:55,244 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:23:55,244 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:23:55,244 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:23:55,244 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:23:55,245 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:23:55,245 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:23:55,245 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:23:55,245 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:23:55,245 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:23:55,334 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:23:55,334 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:23:55,336 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 16:23:55,336 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 16:23:55,337 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpx8s0r35h.
2025-09-17 16:23:55,337 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 16:23:55,337 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpavadlvrj.
2025-09-17 16:23:55,337 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpavadlvrj
2025-09-17 16:23:55,779 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpx8s0r35h/index.html
2025-09-17 16:23:55,780 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 16:23:56,293 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 16:23:56,293 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 16:23:56,293 | INFO | kaleido.kaleido | Got 8904
2025-09-17 16:23:56,294 | INFO | kaleido._kaleido_tab | Processing Top_10_GSEA_Terms___Bar_Plot_T_cell.pdf
2025-09-17 16:23:56,294 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GSEA_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 16:23:56,340 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GSEA_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 16:23:56,391 | INFO | kaleido.kaleido | Reloading tab 8904 before return.
2025-09-17 16:23:56,464 | INFO | kaleido.kaleido | Putting tab 8904 back (queue size: 0).
2025-09-17 16:23:56,466 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 16:23:56,466 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 16:23:56,467 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:23:56,467 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:23:56,467 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:23:56,467 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:23:56,467 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:23:56,467 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:23:56,468 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:23:56,468 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:23:56,468 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:23:56,468 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:23:56,553 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:23:56,553 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:23:56,570 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:23:56,570 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:23:56,589 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 16:23:56,589 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 16:23:56,590 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpdd8xlrfl.
2025-09-17 16:23:56,590 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 16:23:56,591 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp9s040bb7.
2025-09-17 16:23:56,591 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp9s040bb7
2025-09-17 16:23:57,022 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpdd8xlrfl/index.html
2025-09-17 16:23:57,024 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 16:23:57,545 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 16:23:57,546 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 16:23:57,546 | INFO | kaleido.kaleido | Got 2A49
2025-09-17 16:23:57,546 | INFO | kaleido._kaleido_tab | Processing Top_10_GSEA_Terms___Dot_Plot_T_cell.png
2025-09-17 16:23:57,546 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GSEA_Terms___Dot_Plot_T_cell.png.
2025-09-17 16:23:57,615 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GSEA_Terms___Dot_Plot_T_cell.png.
2025-09-17 16:23:57,616 | INFO | kaleido.kaleido | Reloading tab 2A49 before return.
2025-09-17 16:23:57,695 | INFO | kaleido.kaleido | Putting tab 2A49 back (queue size: 0).
2025-09-17 16:23:57,695 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 16:23:57,695 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 16:23:57,695 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:23:57,695 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:23:57,695 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:23:57,695 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:23:57,695 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:23:57,696 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:23:57,696 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:23:57,696 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:23:57,697 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:23:57,697 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:23:57,798 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:23:57,799 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:23:57,800 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 16:23:57,801 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 16:23:57,801 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpw9uulrgy.
2025-09-17 16:23:57,801 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 16:23:57,802 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp1ioyou3j.
2025-09-17 16:23:57,802 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp1ioyou3j
2025-09-17 16:23:58,231 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpw9uulrgy/index.html
2025-09-17 16:23:58,231 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 16:23:59,082 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 16:23:59,083 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 16:23:59,083 | INFO | kaleido.kaleido | Got 6924
2025-09-17 16:23:59,083 | INFO | kaleido._kaleido_tab | Processing Top_10_GSEA_Terms___Dot_Plot_T_cell.pdf
2025-09-17 16:23:59,083 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GSEA_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 16:23:59,132 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GSEA_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 16:23:59,185 | INFO | kaleido.kaleido | Reloading tab 6924 before return.
2025-09-17 16:23:59,261 | INFO | kaleido.kaleido | Putting tab 6924 back (queue size: 0).
2025-09-17 16:23:59,262 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 16:23:59,262 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 16:23:59,262 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:23:59,262 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:23:59,262 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:23:59,262 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:23:59,262 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:23:59,263 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:23:59,263 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:23:59,263 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:23:59,263 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:23:59,263 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:23:59,350 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:23:59,350 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:23:59,361 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-09-17 16:23:59,363 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_enrichment_visualization - HTML preserved
2025-09-17 16:23:59,363 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-09-17 16:23:59,363 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 16:23:59,363 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 16:23:59,364 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-17 16:23:59,364 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 16:23:59,364 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 16:24:01,346 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:24:01,347 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:24:01,347 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:24:01,993 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:24:02,014 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 16:24:02,014 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 16:24:02,750 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:24:02,777 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 16:24:03,872 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:24:03,876 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["perform_enrichment_analyses", "search_enrichment_semantic", "display_enrichment_visualization"]
```' (length: 109)
2025-09-17 16:24:03,877 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 16:24:03,877 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 16:24:03,877 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-17 16:24:03,877 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: perform_enrichment_analyses (execution 3)
2025-09-17 16:24:03,878 | INFO | scchatbot.workflow.nodes.evaluation |    → Enrichment analysis had 0 total significant results
2025-09-17 16:24:03,878 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['perform_enrichment_analyses']
2025-09-17 16:24:03,878 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: search_enrichment_semantic(T cell)
2025-09-17 16:24:03,878 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: display_enrichment_visualization(T cell)
2025-09-17 16:24:03,878 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 2 missing steps for T cell
2025-09-17 16:24:03,878 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 2 total supplementary steps
2025-09-17 16:24:03,878 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for pathway_analysis question
2025-09-17 16:24:03,878 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 2 supplementary steps to execution plan (attempt 1/2)
2025-09-17 16:24:03,878 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-09-17 16:24:03,879 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 16:24:03,879 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-17 16:24:03,879 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-17 16:24:03,880 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 16:24:03,880 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 2
2025-09-17 16:24:03,881 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 16:24:03,881 | INFO | scchatbot.workflow.nodes.evaluation |    • Enrichment analyses: ['T cell', 'unknown']
2025-09-17 16:24:03,881 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 16:24:03,882 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 16:24:03,882 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 16:24:03,884 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 5: Post-evaluation: search_enrichment_semantic for T cell
2025-09-17 16:24:03,885 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'search_enrichment_semantic'
2025-09-17 16:24:03,886 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 5 completed successfully
2025-09-17 16:24:03,887 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: search_enrichment_semantic - Full data preserved
2025-09-17 16:24:03,887 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 6
2025-09-17 16:24:03,887 | INFO | scchatbot.workflow.nodes.execution | 🚀 Continuing execution - next step is supplementary: display_enrichment_visualization
2025-09-17 16:24:03,887 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 6: Post-evaluation: display_enrichment_visualization for T cell
2025-09-17 16:24:03,887 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_enrichment_visualization'
2025-09-17 16:24:03,888 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_enrichment_visualization' with step parameters: {'cell_type': 'T cell', 'analysis': 'go'}
2025-09-17 16:24:03,888 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_enrichment_visualization called with kwargs: {'cell_type': 'T cell', 'analysis': 'go'}
2025-09-17 16:24:03,888 | INFO | scchatbot.multi_agent_base | 🎨 GO Visualization call: display_enrichment_visualization(analysis='go', cell_type='T cell', plot_type='both', domain='BP')
2025-09-17 16:24:03,888 | INFO | scchatbot.multi_agent_base | 🎨 GO Visualization call: display_enrichment_visualization(analysis='go', cell_type='T cell', plot_type='both', domain='MF')
2025-09-17 16:24:03,888 | INFO | scchatbot.multi_agent_base | 🎨 GO Visualization call: display_enrichment_visualization(analysis='go', cell_type='T cell', plot_type='both', domain='CC')
2025-09-17 16:24:03,888 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 6 completed successfully
2025-09-17 16:24:03,889 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_enrichment_visualization - HTML preserved
2025-09-17 16:24:03,889 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 7
2025-09-17 16:24:03,889 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 2 steps
2025-09-17 16:24:03,889 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 16:24:03,889 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (6/6), running post-execution evaluation
2025-09-17 16:24:03,889 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 16:24:03,890 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 16:24:05,716 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:24:06,291 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:24:06,293 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 16:24:06,293 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 16:24:07,009 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:24:07,012 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 16:24:07,740 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:24:07,750 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["perform_enrichment_analyses", "search_enrichment_semantic", "display_enrichment_visualization"]
```' (length: 109)
2025-09-17 16:24:07,751 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 16:24:07,751 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 16:24:07,751 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 6 entries
2025-09-17 16:24:07,751 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: perform_enrichment_analyses (execution 3)
2025-09-17 16:24:07,751 | INFO | scchatbot.workflow.nodes.evaluation |    → Enrichment analysis had 0 total significant results
2025-09-17 16:24:07,751 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: search_enrichment_semantic (execution 5)
2025-09-17 16:24:07,751 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_enrichment_visualization (execution 6)
2025-09-17 16:24:07,751 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 16:24:07,751 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-17 16:24:07,751 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-17 16:24:07,751 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for pathway_analysis question
2025-09-17 16:24:07,751 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 16:24:07,751 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 6
2025-09-17 16:24:07,752 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 6
2025-09-17 16:24:07,752 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 16:24:07,752 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 16:24:07,752 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 16:24:07,752 | INFO | scchatbot.workflow.nodes.evaluation |    • Enrichment analyses: ['T cell', 'unknown']
2025-09-17 16:24:07,752 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 16:24:07,752 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (6/6), running post-execution evaluation
2025-09-17 16:24:07,752 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 16:24:07,752 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 16:24:09,527 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:24:10,141 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:24:10,146 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 16:24:10,147 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 16:24:10,643 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:24:10,653 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 16:24:12,085 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:24:12,094 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["perform_enrichment_analyses", "search_enrichment_semantic", "display_enrichment_visualization"]
```' (length: 109)
2025-09-17 16:24:12,095 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 16:24:12,096 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 16:24:12,096 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 6 entries
2025-09-17 16:24:12,096 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: perform_enrichment_analyses (execution 3)
2025-09-17 16:24:12,096 | INFO | scchatbot.workflow.nodes.evaluation |    → Enrichment analysis had 0 total significant results
2025-09-17 16:24:12,097 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: search_enrichment_semantic (execution 5)
2025-09-17 16:24:12,097 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_enrichment_visualization (execution 6)
2025-09-17 16:24:12,097 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 16:24:12,098 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-17 16:24:12,098 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-17 16:24:12,099 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for pathway_analysis question
2025-09-17 16:24:12,099 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 16:24:12,099 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 6
2025-09-17 16:24:12,099 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 6
2025-09-17 16:24:12,099 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 16:24:12,099 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 16:24:12,100 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 16:24:12,100 | INFO | scchatbot.workflow.nodes.evaluation |    • Enrichment analyses: ['T cell', 'unknown']
2025-09-17 16:24:12,101 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 16:24:12,101 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-17 16:24:12,101 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-17 16:24:12,102 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 6 execution steps
2025-09-17 16:24:12,102 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-09-17 16:24:12,102 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-09-17 16:24:12,102 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-09-17 16:24:12,102 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-09-17 16:24:12,102 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: perform_enrichment_analyses for T cell
2025-09-17 16:24:12,102 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling perform_enrichment_analyses with EnrichmentResultAccessor
2025-09-17 16:24:12,103 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 ENRICHMENT: Loaded 3 conditions from mapping file: ['cataract', 'basal laminar drusen', 'age related macular degeneration']
2025-09-17 16:24:12,103 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: display_enrichment_visualization for step_3
2025-09-17 16:24:12,103 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 4 function: display_enrichment_visualization
2025-09-17 16:24:12,103 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'analysis': 'gsea', 'plot_type': 'both'}
2025-09-17 16:24:12,103 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_enrichment_visualization with VisualizationResultAccessor
2025-09-17 16:24:12,103 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 5: search_enrichment_semantic for T cell
2025-09-17 16:24:12,103 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 SEMANTIC DEBUG: Step 5 parameters: {'cell_type': 'T cell'}
2025-09-17 16:24:12,103 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling search_enrichment_semantic with SemanticSearchResultAccessor
2025-09-17 16:24:12,103 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 SEMANTIC SEARCH DEBUG: Extracted cell_type='T cell', query='unknown'
2025-09-17 16:24:12,103 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 SEMANTIC SEARCH DEBUG: Full parameters: {'cell_type': 'T cell'}
2025-09-17 16:24:12,104 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 6: display_enrichment_visualization for T cell
2025-09-17 16:24:12,104 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 6 function: display_enrichment_visualization
2025-09-17 16:24:12,104 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell', 'analysis': 'go'}
2025-09-17 16:24:12,104 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_enrichment_visualization with VisualizationResultAccessor
2025-09-17 16:24:12,104 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 6 successful steps
2025-09-17 16:24:12,104 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 697 characters for synthesis
2025-09-17 16:24:12,104 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-17 16:24:12,104 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-17 16:24:12,104 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (56 chars)
2025-09-17 16:24:12,104 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-17 16:24:12,104 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-17 16:24:12,104 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-17 16:24:14,891 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:24:14,902 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 6 execution steps
2025-09-17 16:24:14,903 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: process_cells, success=True, has_result=True
2025-09-17 16:24:14,903 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: validate_processing_results, success=True, has_result=True
2025-09-17 16:24:14,903 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: perform_enrichment_analyses, success=True, has_result=True
2025-09-17 16:24:14,903 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: display_enrichment_visualization, success=True, has_result=True
2025-09-17 16:24:14,903 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Found multiple plots structure in display_enrichment_visualization
2025-09-17 16:24:14,904 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added bar plot plot_1: Top 10 GSEA Terms - Bar Plot (T cell) (9073 chars)
2025-09-17 16:24:14,904 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added dot plot plot_2: Top 10 GSEA Terms - Dot Plot (T cell) (9217 chars)
2025-09-17 16:24:14,904 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 5: search_enrichment_semantic, success=True, has_result=True
2025-09-17 16:24:14,904 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 6: display_enrichment_visualization, success=True, has_result=True
2025-09-17 16:24:14,904 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Found multiple plots structure in display_enrichment_visualization
2025-09-17 16:24:14,904 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added both plot plot_3: GO_BP Enrichment - T cell (101 chars)
2025-09-17 16:24:14,904 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added both plot plot_4: GO_MF Enrichment - T cell (101 chars)
2025-09-17 16:24:14,904 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added both plot plot_5: GO_CC Enrichment - T cell (101 chars)
2025-09-17 16:24:14,905 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 5 individual plots (total: 18,593 chars)
2025-09-17 16:24:14,905 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 5 plots, total size: 18,593 bytes
2025-09-17 16:24:14,905 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 5 individual plots
2025-09-17 16:24:14,905 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 5 plots + 1 text (plots first)
2025-09-17 16:24:14,905 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 6 total messages (plots first, then text)
2025-09-17 16:24:14,906 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (706 chars)
2025-09-17 16:24:14,990 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-17 16:24:14,990 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
2025-09-17 16:29:51,950 | INFO | django.utils.autoreload | /Users/seanchiu/Desktop/scchat_fin/scChat/scchatbot/workflow/function_history.py changed, reloading.
2025-09-17 16:29:52,437 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:29:52,437 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:29:52,438 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:29:52,438 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:29:54,402 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-17 16:29:59,186 | INFO | faiss.loader | Loading faiss.
2025-09-17 16:29:59,201 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-17 16:30:00,051 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 16:30:01,760 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 16:30:01,817 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-17 16:30:01,818 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 16:30:01,827 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-17 16:30:02,711 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-17 16:30:02,718 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-17 16:30:02,719 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-17 16:30:16,455 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:30:20,454 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:31:58,437 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 16:35:14,280 | INFO | django.utils.autoreload | Watching for file changes with StatReloader
2025-09-17 16:35:19,546 | INFO | faiss.loader | Loading faiss.
2025-09-17 16:35:19,572 | INFO | faiss.loader | Successfully loaded faiss.
2025-09-17 16:35:20,515 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 16:35:22,233 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 16:35:22,312 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-17 16:35:22,313 | INFO | chromadb.telemetry.product.posthog | Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-09-17 16:35:22,321 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-17 16:35:23,205 | INFO | jax._src.xla_bridge | Unable to initialize backend 'cuda': 
2025-09-17 16:35:23,205 | INFO | jax._src.xla_bridge | Unable to initialize backend 'rocm': module 'jaxlib.xla_extension' has no attribute 'GpuAllocatorConfig'
2025-09-17 16:35:23,207 | INFO | jax._src.xla_bridge | Unable to initialize backend 'tpu': INTERNAL: Failed to open libtpu.so: dlopen(libtpu.so, 0x0001): tried: 'libtpu.so' (no such file), '/System/Volumes/Preboot/Cryptexes/OSlibtpu.so' (no such file), '/opt/anaconda3/envs/ScChatbot/bin/../lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache), 'libtpu.so' (no such file), '/usr/local/lib/libtpu.so' (no such file), '/usr/lib/libtpu.so' (no such file, not in dyld cache)
2025-09-17 16:35:39,145 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:35:44,221 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:39:26,067 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:39:26,910 | INFO | scchatbot.multi_agent_base | ✅ Unified hierarchical cell type management initialized
2025-09-17 16:39:26,910 | INFO | scchatbot.multi_agent_base | ✅ Unified cell type extractor initialized
2025-09-17 16:39:26,911 | INFO | scchatbot.multi_agent_base | 1
2025-09-17 16:39:27,395 | INFO | sentence_transformers.SentenceTransformer | Use pytorch device_name: mps
2025-09-17 16:39:27,395 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-09-17 16:39:28,995 | INFO | scchatbot.multi_agent_base | 2
2025-09-17 16:39:28,998 | INFO | scchatbot.multi_agent_base | 3
2025-09-17 16:39:28,998 | INFO | scchatbot.multi_agent_base | ✅ Session state management initialized
2025-09-17 16:40:45,428 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 16:40:48,707 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 16:40:51,453 | INFO | scchatbot.multi_agent_base | 🆕 Creating new session state for 'b05944ce'
2025-09-17 16:40:51,455 | INFO | scchatbot.workflow.node_base | 🔄 InputProcessor: Starting execution
2025-09-17 16:40:51,455 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 16:40:51,731 | WARNING | django.request | Not Found: /ws/chat/b05944ce/
2025-09-17 16:40:52,358 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:40:52,369 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 LLM search query response: '```json
["current_session_state"]
```'
2025-09-17 16:40:52,371 | INFO | scchatbot.workflow.nodes.input_processing | 🧠 LLM requested 1 context sources: ['current_session_state']
2025-09-17 16:40:52,372 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Building session context...
2025-09-17 16:40:52,372 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Found 0 cell types: []
2025-09-17 16:40:52,373 | INFO | scchatbot.workflow.node_base | 🔍 CONTEXT BUILDER: Generated 33 chars, starts with: 'No current session data available...'
2025-09-17 16:40:52,373 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added current session state context (33 chars)
2025-09-17 16:40:52,374 | INFO | scchatbot.workflow.nodes.input_processing | 🔍 SESSION CONTEXT DEBUG: First 100 chars: 'No current session data available...'
2025-09-17 16:40:52,374 | INFO | scchatbot.workflow.nodes.input_processing | ✅ Added fresh unified context (56 chars)
2025-09-17 16:40:52,374 | INFO | scchatbot.workflow.nodes.input_processing | 🔄 Initialized with 4 initial cell types
2025-09-17 16:40:52,377 | INFO | scchatbot.workflow.node_base | ✅ InputProcessor: Execution complete
2025-09-17 16:40:52,388 | INFO | scchatbot.workflow.node_base | 🔄 Planner: Starting execution
2025-09-17 16:40:52,389 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 16:40:52,389 | INFO | scchatbot.workflow.nodes.planning | 🧬 PLANNER: Cell type status for planning:
2025-09-17 16:40:52,390 | INFO | scchatbot.workflow.nodes.planning |    • Initial types: 4
2025-09-17 16:40:52,390 | INFO | scchatbot.workflow.nodes.planning |    • Currently available: 4
2025-09-17 16:40:52,392 | INFO | scchatbot.workflow.nodes.planning |    • Discovered this session: 0
2025-09-17 16:40:52,393 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planning for question: 'Do GSEA with Hallmark to T cell'
2025-09-17 16:41:01,995 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:41:10,865 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:41:10,874 | INFO | scchatbot.workflow.nodes.planning | 🧬 Planner identified needed cell types: ['T cell']
2025-09-17 16:41:10,875 | INFO | scchatbot.workflow.nodes.planning | 🧬 Available cell types: ['Epithelial cell', 'Stromal cell', 'Immune cell', 'Glial cell']
2025-09-17 16:41:10,875 | INFO | scchatbot.workflow.nodes.planning | 📋 Preserving LLM analysis step: perform_enrichment_analyses(Immune cell)
2025-09-17 16:41:10,875 | INFO | scchatbot.workflow.nodes.planning | 🔧 Fixed cell type name using RAG-validated type: 'Immune cell' → 'T cell'
2025-09-17 16:41:10,913 | INFO | scchatbot.workflow.nodes.planning | 🧬 Creating discovery steps only...
2025-09-17 16:41:10,940 | INFO | scchatbot.workflow.nodes.planning | 🔄 Found path from 'Immune cell' to 'T cell': Immune cell → T cell
2025-09-17 16:41:10,942 | INFO | scchatbot.workflow.nodes.planning | 🧬 Added process_cells(Immune cell) to discover ['T cell']
2025-09-17 16:41:10,942 | INFO | scchatbot.workflow.nodes.planning | 🔍 Created validation step for process_cells(Immune cell) expecting: ['T cell']
2025-09-17 16:41:10,943 | INFO | scchatbot.workflow.nodes.planning | 🔄 Interleaved: process_cells(Immune cell) → validation(Immune cell)
2025-09-17 16:41:10,943 | INFO | scchatbot.workflow.nodes.planning | 📋 Plan merge complete:
2025-09-17 16:41:10,943 | INFO | scchatbot.workflow.nodes.planning |    - Discovery steps: 1
2025-09-17 16:41:10,943 | INFO | scchatbot.workflow.nodes.planning |    - Validation steps: 1
2025-09-17 16:41:10,944 | INFO | scchatbot.workflow.nodes.planning |    - Analysis steps: 1
2025-09-17 16:41:10,944 | INFO | scchatbot.workflow.nodes.planning |    - Other steps: 1
2025-09-17 16:41:10,944 | INFO | scchatbot.workflow.nodes.planning |    - Filtered out: 0 steps for undiscoverable types
2025-09-17 16:41:10,944 | INFO | scchatbot.workflow.nodes.planning | 🔍 ENRICHMENT DEBUG: Found 1 enrichment steps
2025-09-17 16:41:10,944 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Processing 4 steps
2025-09-17 16:41:10,944 | INFO | scchatbot.workflow.nodes.planning | 🔍 PATHWAY EXTRACTOR: Extracting keywords for step 3: T cell
2025-09-17 16:41:11,920 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:41:11,930 | INFO | scchatbot.workflow.nodes.planning | 🧠 LLM enrichment analysis: 'EXPLICIT_METHOD:gsea:Hallmark'
2025-09-17 16:41:11,931 | INFO | scchatbot.workflow.nodes.planning | 🧠 LLM result after cleaning: 'EXPLICIT_METHOD:gsea:Hallmark'
2025-09-17 16:41:11,931 | INFO | scchatbot.workflow.nodes.planning | 🔍 Searching for gene set library matching 'Hallmark'
2025-09-17 16:41:13,140 | INFO | scchatbot.workflow.nodes.planning | ✅ Selected best match: 'MSigDB_Hallmark_2020'
2025-09-17 16:41:13,141 | INFO | scchatbot.workflow.nodes.planning | 🎯 Explicit method request detected: ['gsea']
2025-09-17 16:41:13,141 | INFO | scchatbot.workflow.nodes.planning |    Gene set library: MSigDB_Hallmark_2020
2025-09-17 16:41:13,141 | INFO | scchatbot.workflow.nodes.planning | ✅ Planner created execution plan with 4 steps
2025-09-17 16:41:13,141 | INFO | scchatbot.workflow.nodes.planning |    • 1 process_cells steps
2025-09-17 16:41:13,141 | INFO | scchatbot.workflow.nodes.planning |    • 1 validation steps
2025-09-17 16:41:13,141 | INFO | scchatbot.workflow.nodes.planning |    • 2 analysis steps
2025-09-17 16:41:13,141 | INFO | scchatbot.workflow.node_base | ✅ Planner: Execution complete
2025-09-17 16:41:13,141 | INFO | scchatbot.workflow.nodes.planning | FINAL PLAN : 
2025-09-17 16:41:13,141 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 16:41:13,141 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 16:41:13,142 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 1: Process Immune cell to discover T cell
2025-09-17 16:41:13,142 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'process_cells'
2025-09-17 16:41:18,774 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:41:27,198 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:43:14,212 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:43:14,233 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 1 completed successfully
2025-09-17 16:43:14,233 | INFO | scchatbot.workflow.nodes.execution | 🔍 EXECUTION NODE: About to call CellTypeExtractor.extract_from_annotation_result() for process_cells step
2025-09-17 16:43:14,234 | INFO | scchatbot.workflow.nodes.execution | 🧬 Updating hierarchy manager with new cell types: ['T cell', 'B cell', 'Mononuclear phagocyte', 'Natural killer cell', 'Mast cell']
2025-09-17 16:43:14,265 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: T cell
2025-09-17 16:43:14,265 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: B cell
2025-09-17 16:43:14,265 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mononuclear phagocyte
2025-09-17 16:43:14,265 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Natural killer cell
2025-09-17 16:43:14,265 | INFO | scchatbot.workflow.nodes.execution | ✅ Discovered new cell type: Mast cell
2025-09-17 16:43:14,266 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: process_cells - Full data preserved
2025-09-17 16:43:14,266 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 2
2025-09-17 16:43:14,267 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 16:43:14,267 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 16:43:14,267 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Executing validation step...
2025-09-17 16:43:14,267 | INFO | scchatbot.workflow.node_base | 🔄 Validation: Starting execution
2025-09-17 16:43:14,267 | INFO | scchatbot.workflow.node_base |    Current message: Validating Immune cell -> ['T cell']...
2025-09-17 16:43:14,268 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Exact match found: 'T cell'
2025-09-17 16:43:14,268 | INFO | scchatbot.workflow.node_base | ✅ Validation: Execution complete
2025-09-17 16:43:14,268 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Validation passed: All 1 expected cell types found successfully
2025-09-17 16:43:14,268 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 CALLING update_remaining_steps_with_discovered_types with result status: success
2025-09-17 16:43:14,268 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Updating remaining steps: expected=['T cell'], found=['T cell'], missing=[]
2025-09-17 16:43:14,268 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Validation result full structure: {'status': 'success', 'message': 'All 1 expected cell types found successfully', 'found_children': ['T cell'], 'missing_children': [], 'available_types': ['Natural killer cell', 'Mononuclear phagocyte', 'Glial cell', 'Epithelial cell', 'Stromal cell', 'Mast cell', 'T cell', 'B cell']}
2025-09-17 16:43:14,268 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Will skip steps for missing cell types: []
2025-09-17 16:43:14,268 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Scanning 2 remaining steps...
2025-09-17 16:43:14,268 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3: perform_enrichment_analyses(cell_type='T cell')
2025-09-17 16:43:14,268 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 3 cell type 'T cell' not in missing list []
2025-09-17 16:43:14,268 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 4: display_enrichment_visualization(analysis='gsea')
2025-09-17 16:43:14,268 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 DEBUG: Step 4 cell type 'None' not in missing list []
2025-09-17 16:43:14,268 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Advanced to step 3
2025-09-17 16:43:14,268 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 16:43:14,268 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 16:43:14,269 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 3: Perform Gene Set Enrichment Analysis (GSEA) enrichment analysis on T cell.
2025-09-17 16:43:14,269 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'perform_enrichment_analyses'
2025-09-17 16:43:33,081 | INFO | sentence_transformers.SentenceTransformer | Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2025-09-17 16:43:34,575 | INFO | scchatbot.workflow.function_history | ✅ Vector database initialized at conversation_history/conversation_vectors
2025-09-17 16:43:34,578 | INFO | scchatbot.workflow.function_history | ✅ Enrichment vector database initialized at conversation_history/conversation_vectors/enrichment
2025-09-17 16:43:34,578 | INFO | scchatbot.workflow.function_history | 🔍 Starting enrichment indexing for T cell...
2025-09-17 16:43:34,578 | INFO | scchatbot.workflow.function_history | 🧬 Detected analyses: ['gsea']
2025-09-17 16:43:34,581 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/gsea_basal laminar drusen_MSigDBHallmark2020/results_summary_T cell_basal laminar drusen_MSigDB_Hallmark_2020.csv (20 terms)
2025-09-17 16:43:34,584 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/gsea_basal laminar drusen_MSigDBHallmark2020/results_raw_T cell_basal laminar drusen_MSigDB_Hallmark_2020.csv (20 terms)
2025-09-17 16:43:34,681 | INFO | scchatbot.workflow.function_history | 📝 Indexed 20 terms for gsea/all_combined
2025-09-17 16:43:34,682 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/gsea_bulk_MSigDBHallmark2020/results_summary_T cell_bulk_MSigDB_Hallmark_2020.csv (21 terms)
2025-09-17 16:43:34,683 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/gsea_bulk_MSigDBHallmark2020/results_raw_T cell_bulk_MSigDB_Hallmark_2020.csv (21 terms)
2025-09-17 16:43:34,708 | INFO | scchatbot.workflow.function_history | 📝 Indexed 21 terms for gsea/bulk
2025-09-17 16:43:34,710 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/gsea_cataract_MSigDBHallmark2020/results_summary_T cell_cataract_MSigDB_Hallmark_2020.csv (26 terms)
2025-09-17 16:43:34,710 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/gsea_cataract_MSigDBHallmark2020/results_raw_T cell_cataract_MSigDB_Hallmark_2020.csv (26 terms)
2025-09-17 16:43:34,739 | INFO | scchatbot.workflow.function_history | 📝 Indexed 26 terms for gsea/cataract
2025-09-17 16:43:34,740 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/gsea_basal laminar drusen_MSigDBHallmark2020/results_summary_T cell_basal laminar drusen_MSigDB_Hallmark_2020.csv (20 terms)
2025-09-17 16:43:34,740 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/gsea_basal laminar drusen_MSigDBHallmark2020/results_raw_T cell_basal laminar drusen_MSigDB_Hallmark_2020.csv (20 terms)
2025-09-17 16:43:34,765 | INFO | scchatbot.workflow.function_history | 📝 Indexed 20 terms for gsea/basal laminar drusen
2025-09-17 16:43:34,766 | INFO | scchatbot.workflow.function_history | 📊 Read summary CSV: scchatbot/enrichment/gsea_age related macular degeneration_MSigDBHallmark2020/results_summary_T cell_age related macular degeneration_MSigDB_Hallmark_2020.csv (21 terms)
2025-09-17 16:43:34,767 | INFO | scchatbot.workflow.function_history | 📋 Read raw CSV: scchatbot/enrichment/gsea_age related macular degeneration_MSigDBHallmark2020/results_raw_T cell_age related macular degeneration_MSigDB_Hallmark_2020.csv (21 terms)
2025-09-17 16:43:34,791 | INFO | scchatbot.workflow.function_history | 📝 Indexed 21 terms for gsea/age related macular degeneration
2025-09-17 16:43:34,791 | INFO | scchatbot.workflow.function_history | ✅ Enrichment indexing complete: 108 terms indexed for T cell
2025-09-17 16:43:34,792 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 3 completed successfully
2025-09-17 16:43:34,792 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: perform_enrichment_analyses - Full data preserved
2025-09-17 16:43:34,792 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 4
2025-09-17 16:43:34,793 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 16:43:34,793 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 16:43:34,793 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Steps still remaining (3/4), skipping post-execution evaluation
2025-09-17 16:43:34,793 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 16:43:34,793 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 16:43:34,793 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 4: Visualize the GSEA enrichment results for T cells using both barplot and dotplot.
2025-09-17 16:43:34,794 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_enrichment_visualization'
2025-09-17 16:43:34,794 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_enrichment_visualization' with step parameters: {'analysis': 'gsea', 'plot_type': 'both'}
2025-09-17 16:43:34,794 | INFO | scchatbot.workflow.nodes.execution | ✅ Found matching gsea analysis for visualization: T cell
2025-09-17 16:43:34,794 | INFO | scchatbot.workflow.nodes.execution | 📝 Updating step parameters with enhanced params for execution history tracking
2025-09-17 16:43:34,794 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_enrichment_visualization called with kwargs: {'analysis': 'gsea', 'plot_type': 'both', 'cell_type': 'T cell'}
2025-09-17 16:43:34,794 | INFO | scchatbot.multi_agent_base | 🎨 Visualization call: display_enrichment_visualization(analysis='gsea', cell_type='T cell', plot_type='both', kwargs={})
2025-09-17 16:43:34,925 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 16:43:34,926 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 16:43:34,926 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpr8bzs5io.
2025-09-17 16:43:34,926 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 16:43:34,927 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpcf14x1a7.
2025-09-17 16:43:34,927 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpcf14x1a7
2025-09-17 16:43:35,527 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpr8bzs5io/index.html
2025-09-17 16:43:35,530 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 16:43:36,055 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 16:43:36,056 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 16:43:36,056 | INFO | kaleido.kaleido | Got 4856
2025-09-17 16:43:36,056 | INFO | kaleido._kaleido_tab | Processing Top_10_GSEA_Terms___Bar_Plot_T_cell.png
2025-09-17 16:43:36,057 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GSEA_Terms___Bar_Plot_T_cell.png.
2025-09-17 16:43:36,126 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GSEA_Terms___Bar_Plot_T_cell.png.
2025-09-17 16:43:36,127 | INFO | kaleido.kaleido | Reloading tab 4856 before return.
2025-09-17 16:43:36,203 | INFO | kaleido.kaleido | Putting tab 4856 back (queue size: 0).
2025-09-17 16:43:36,203 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 16:43:36,203 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 16:43:36,204 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:36,204 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:36,204 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:43:36,204 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:43:36,204 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:43:36,205 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:36,205 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:36,205 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:43:36,205 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:43:36,205 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:43:36,295 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:36,295 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:36,297 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 16:43:36,298 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 16:43:36,298 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp9gf1nsgv.
2025-09-17 16:43:36,298 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 16:43:36,299 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpkd7rf9b4.
2025-09-17 16:43:36,299 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpkd7rf9b4
2025-09-17 16:43:36,730 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp9gf1nsgv/index.html
2025-09-17 16:43:36,731 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 16:43:37,244 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 16:43:37,244 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 16:43:37,244 | INFO | kaleido.kaleido | Got 7E0D
2025-09-17 16:43:37,244 | INFO | kaleido._kaleido_tab | Processing Top_10_GSEA_Terms___Bar_Plot_T_cell.pdf
2025-09-17 16:43:37,244 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GSEA_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 16:43:37,291 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GSEA_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 16:43:37,344 | INFO | kaleido.kaleido | Reloading tab 7E0D before return.
2025-09-17 16:43:37,427 | INFO | kaleido.kaleido | Putting tab 7E0D back (queue size: 0).
2025-09-17 16:43:37,427 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 16:43:37,427 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 16:43:37,427 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:37,427 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:37,427 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:43:37,427 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:43:37,427 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:43:37,428 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:37,429 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:37,429 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:43:37,429 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:43:37,429 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:43:37,515 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:37,515 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:37,531 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:37,532 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:37,564 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 16:43:37,567 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 16:43:37,567 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmprv5o0w8s.
2025-09-17 16:43:37,567 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 16:43:37,568 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmptkdmkjas.
2025-09-17 16:43:37,568 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmptkdmkjas
2025-09-17 16:43:38,002 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmprv5o0w8s/index.html
2025-09-17 16:43:38,003 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 16:43:38,540 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 16:43:38,541 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 16:43:38,541 | INFO | kaleido.kaleido | Got 4DAD
2025-09-17 16:43:38,541 | INFO | kaleido._kaleido_tab | Processing Top_10_GSEA_Terms___Dot_Plot_T_cell.png
2025-09-17 16:43:38,541 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GSEA_Terms___Dot_Plot_T_cell.png.
2025-09-17 16:43:38,615 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GSEA_Terms___Dot_Plot_T_cell.png.
2025-09-17 16:43:38,616 | INFO | kaleido.kaleido | Reloading tab 4DAD before return.
2025-09-17 16:43:38,696 | INFO | kaleido.kaleido | Putting tab 4DAD back (queue size: 0).
2025-09-17 16:43:38,696 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 16:43:38,696 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 16:43:38,696 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:38,696 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:38,696 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:43:38,696 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:43:38,696 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:43:38,697 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:38,697 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:38,698 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:43:38,698 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:43:38,698 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:43:38,785 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:38,786 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:38,788 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 16:43:38,789 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 16:43:38,789 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp07m5mlzb.
2025-09-17 16:43:38,790 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 16:43:38,790 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpymca2bou.
2025-09-17 16:43:38,790 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpymca2bou
2025-09-17 16:43:39,216 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp07m5mlzb/index.html
2025-09-17 16:43:39,217 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 16:43:39,763 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 16:43:39,764 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 16:43:39,764 | INFO | kaleido.kaleido | Got AF08
2025-09-17 16:43:39,765 | INFO | kaleido._kaleido_tab | Processing Top_10_GSEA_Terms___Dot_Plot_T_cell.pdf
2025-09-17 16:43:39,765 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GSEA_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 16:43:39,816 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GSEA_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 16:43:39,871 | INFO | kaleido.kaleido | Reloading tab AF08 before return.
2025-09-17 16:43:39,954 | INFO | kaleido.kaleido | Putting tab AF08 back (queue size: 0).
2025-09-17 16:43:39,954 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 16:43:39,954 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 16:43:39,955 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:39,955 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:39,955 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:43:39,955 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:43:39,955 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:43:39,957 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:39,957 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:39,957 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:43:39,957 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:43:39,957 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:43:40,048 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:40,048 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:40,059 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 4 completed successfully
2025-09-17 16:43:40,060 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_enrichment_visualization - HTML preserved
2025-09-17 16:43:40,060 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 5
2025-09-17 16:43:40,060 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 1 steps
2025-09-17 16:43:40,060 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 16:43:40,061 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (4/4), running post-execution evaluation
2025-09-17 16:43:40,061 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 16:43:40,061 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 16:43:41,474 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:43:41,484 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:41,485 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:42,102 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:43:42,121 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 16:43:42,122 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 16:43:42,744 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:43:42,754 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 16:43:43,537 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:43:43,540 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["perform_enrichment_analyses", "search_enrichment_semantic", "display_enrichment_visualization"]
```' (length: 109)
2025-09-17 16:43:43,540 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 16:43:43,540 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 16:43:43,541 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 4 entries
2025-09-17 16:43:43,541 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: perform_enrichment_analyses (execution 3)
2025-09-17 16:43:43,541 | INFO | scchatbot.workflow.nodes.evaluation |    → Enrichment analysis had 9 total significant results
2025-09-17 16:43:43,541 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['perform_enrichment_analyses']
2025-09-17 16:43:43,542 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: search_enrichment_semantic(T cell)
2025-09-17 16:43:43,542 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 Generated missing step: display_enrichment_visualization(T cell)
2025-09-17 16:43:43,543 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found 2 missing steps for T cell
2025-09-17 16:43:43,543 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 2 total supplementary steps
2025-09-17 16:43:43,543 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for pathway_analysis question
2025-09-17 16:43:43,543 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Added 2 supplementary steps to execution plan (attempt 1/2)
2025-09-17 16:43:43,543 | INFO | scchatbot.workflow.nodes.evaluation | 🔄 Marked conversation as incomplete to continue execution
2025-09-17 16:43:43,544 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 16:43:43,544 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 4
2025-09-17 16:43:43,544 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 4
2025-09-17 16:43:43,544 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 16:43:43,544 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 2
2025-09-17 16:43:43,544 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 16:43:43,544 | INFO | scchatbot.workflow.nodes.evaluation |    • Enrichment analyses: ['T cell', 'unknown']
2025-09-17 16:43:43,545 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 16:43:43,546 | INFO | scchatbot.workflow.node_base | 🔄 Executor: Starting execution
2025-09-17 16:43:43,546 | INFO | scchatbot.workflow.node_base |    Current message: Do GSEA with Hallmark to T cell...
2025-09-17 16:43:43,547 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 5: Post-evaluation: search_enrichment_semantic for T cell
2025-09-17 16:43:43,548 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'search_enrichment_semantic'
2025-09-17 16:43:43,549 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 5 completed successfully
2025-09-17 16:43:43,551 | INFO | scchatbot.workflow.nodes.execution | 📊 Structured storage: search_enrichment_semantic - Full data preserved
2025-09-17 16:43:43,551 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 6
2025-09-17 16:43:43,551 | INFO | scchatbot.workflow.nodes.execution | 🚀 Continuing execution - next step is supplementary: display_enrichment_visualization
2025-09-17 16:43:43,551 | INFO | scchatbot.workflow.nodes.execution | 🔄 Executing step 6: Post-evaluation: display_enrichment_visualization for T cell
2025-09-17 16:43:43,551 | INFO | scchatbot.workflow.nodes.execution | 🔍 STORAGE DEBUG: Original function_name from plan: 'display_enrichment_visualization'
2025-09-17 16:43:43,551 | INFO | scchatbot.workflow.nodes.execution | 🔍 STEP DEBUG: Calling visualization function 'display_enrichment_visualization' with step parameters: {'cell_type': 'T cell', 'analysis': 'gsea'}
2025-09-17 16:43:43,551 | INFO | scchatbot.multi_agent_base | 🔍 VIZ WRAPPER DEBUG: display_enrichment_visualization called with kwargs: {'cell_type': 'T cell', 'analysis': 'gsea'}
2025-09-17 16:43:43,552 | INFO | scchatbot.multi_agent_base | 🎨 Visualization call: display_enrichment_visualization(analysis='gsea', cell_type='T cell', plot_type='both', kwargs={})
2025-09-17 16:43:43,582 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 16:43:43,582 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 16:43:43,583 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp0t76ktxw.
2025-09-17 16:43:43,583 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 16:43:43,584 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpc5ntn_yj.
2025-09-17 16:43:43,584 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpc5ntn_yj
2025-09-17 16:43:44,075 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp0t76ktxw/index.html
2025-09-17 16:43:44,077 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 16:43:44,617 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 16:43:44,618 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 16:43:44,618 | INFO | kaleido.kaleido | Got 8718
2025-09-17 16:43:44,618 | INFO | kaleido._kaleido_tab | Processing Top_10_GSEA_Terms___Bar_Plot_T_cell.png
2025-09-17 16:43:44,618 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GSEA_Terms___Bar_Plot_T_cell.png.
2025-09-17 16:43:44,689 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GSEA_Terms___Bar_Plot_T_cell.png.
2025-09-17 16:43:44,691 | INFO | kaleido.kaleido | Reloading tab 8718 before return.
2025-09-17 16:43:44,766 | INFO | kaleido.kaleido | Putting tab 8718 back (queue size: 0).
2025-09-17 16:43:44,767 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 16:43:44,767 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 16:43:44,767 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:44,767 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:44,767 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:43:44,767 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:43:44,767 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:43:44,768 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:44,768 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:44,768 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:43:44,768 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:43:44,768 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:43:44,861 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:44,861 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:44,863 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 16:43:44,864 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 16:43:44,864 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpar0f1c54.
2025-09-17 16:43:44,865 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 16:43:44,865 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp1lfap2c7.
2025-09-17 16:43:44,865 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp1lfap2c7
2025-09-17 16:43:45,310 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpar0f1c54/index.html
2025-09-17 16:43:45,311 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 16:43:45,825 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 16:43:45,826 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 16:43:45,826 | INFO | kaleido.kaleido | Got C30D
2025-09-17 16:43:45,826 | INFO | kaleido._kaleido_tab | Processing Top_10_GSEA_Terms___Bar_Plot_T_cell.pdf
2025-09-17 16:43:45,826 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GSEA_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 16:43:45,872 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GSEA_Terms___Bar_Plot_T_cell.pdf.
2025-09-17 16:43:45,924 | INFO | kaleido.kaleido | Reloading tab C30D before return.
2025-09-17 16:43:46,003 | INFO | kaleido.kaleido | Putting tab C30D back (queue size: 0).
2025-09-17 16:43:46,003 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 16:43:46,003 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 16:43:46,004 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:46,004 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:46,004 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:43:46,004 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:43:46,004 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:43:46,005 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:46,005 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:46,005 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:43:46,005 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:43:46,005 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:43:46,089 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:46,089 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:46,104 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:46,104 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:46,104 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:46,105 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:46,122 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 16:43:46,122 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 16:43:46,123 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpzf5u8ixd.
2025-09-17 16:43:46,123 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 16:43:46,124 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmplbxxb_30.
2025-09-17 16:43:46,124 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmplbxxb_30
2025-09-17 16:43:46,551 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpzf5u8ixd/index.html
2025-09-17 16:43:46,553 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 16:43:47,095 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 16:43:47,095 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 16:43:47,095 | INFO | kaleido.kaleido | Got E99D
2025-09-17 16:43:47,096 | INFO | kaleido._kaleido_tab | Processing Top_10_GSEA_Terms___Dot_Plot_T_cell.png
2025-09-17 16:43:47,096 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GSEA_Terms___Dot_Plot_T_cell.png.
2025-09-17 16:43:47,165 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GSEA_Terms___Dot_Plot_T_cell.png.
2025-09-17 16:43:47,166 | INFO | kaleido.kaleido | Reloading tab E99D before return.
2025-09-17 16:43:47,241 | INFO | kaleido.kaleido | Putting tab E99D back (queue size: 0).
2025-09-17 16:43:47,241 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 16:43:47,241 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 16:43:47,242 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:47,242 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:47,242 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:43:47,242 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:43:47,242 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:43:47,242 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:47,243 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:47,243 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:43:47,243 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:43:47,243 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:43:47,334 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:47,334 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:47,336 | INFO | choreographer.browsers.chromium | Chromium init'ed with kwargs {}
2025-09-17 16:43:47,337 | INFO | choreographer.browsers.chromium | Found chromium path: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
2025-09-17 16:43:47,337 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpl6xp77k2.
2025-09-17 16:43:47,337 | INFO | choreographer.browser_async | Opening browser.
2025-09-17 16:43:47,338 | INFO | choreographer.utils._tmpfile | Temp directory created: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp2pwa_c_n.
2025-09-17 16:43:47,338 | INFO | choreographer.browsers.chromium | Temporary directory at: /var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmp2pwa_c_n
2025-09-17 16:43:47,764 | INFO | kaleido.kaleido | Conforming 1 to file:///var/folders/r_/s1247sfn6bl8ypsxp0tj3x3c0000gn/T/tmpl6xp77k2/index.html
2025-09-17 16:43:47,769 | INFO | kaleido.kaleido | Waiting on all navigates
2025-09-17 16:43:48,281 | INFO | kaleido.kaleido | All navigates done, putting them all in queue.
2025-09-17 16:43:48,281 | INFO | kaleido.kaleido | Getting tab from queue (has 1)
2025-09-17 16:43:48,281 | INFO | kaleido.kaleido | Got AAF3
2025-09-17 16:43:48,282 | INFO | kaleido._kaleido_tab | Processing Top_10_GSEA_Terms___Dot_Plot_T_cell.pdf
2025-09-17 16:43:48,282 | INFO | kaleido._kaleido_tab | Sending big command for Top_10_GSEA_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 16:43:48,282 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:48,283 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:48,330 | INFO | kaleido._kaleido_tab | Sent big command for Top_10_GSEA_Terms___Dot_Plot_T_cell.pdf.
2025-09-17 16:43:48,382 | INFO | kaleido.kaleido | Reloading tab AAF3 before return.
2025-09-17 16:43:48,458 | INFO | kaleido.kaleido | Putting tab AAF3 back (queue size: 0).
2025-09-17 16:43:48,458 | INFO | kaleido.kaleido | Waiting for all cleanups to finish.
2025-09-17 16:43:48,458 | INFO | kaleido.kaleido | Exiting Kaleido
2025-09-17 16:43:48,458 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:48,459 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:48,459 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:43:48,459 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:43:48,459 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:43:48,459 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:48,459 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:48,459 | INFO | kaleido.kaleido | Cancelling tasks.
2025-09-17 16:43:48,460 | INFO | kaleido.kaleido | Exiting Kaleido/Choreo
2025-09-17 16:43:48,460 | INFO | choreographer.browser_async | Closing browser.
2025-09-17 16:43:48,549 | INFO | choreographer.utils._tmpfile | TemporaryDirectory.cleanup() worked.
2025-09-17 16:43:48,550 | INFO | choreographer.utils._tmpfile | shutil.rmtree worked.
2025-09-17 16:43:48,560 | INFO | scchatbot.workflow.nodes.execution | ✅ Step 6 completed successfully
2025-09-17 16:43:48,561 | INFO | scchatbot.workflow.nodes.execution | 🎨 Visualization storage: display_enrichment_visualization - HTML preserved
2025-09-17 16:43:48,561 | INFO | scchatbot.workflow.nodes.execution | 🔄 Advanced to step 7
2025-09-17 16:43:48,561 | INFO | scchatbot.workflow.nodes.execution | 🛑 Stopping execution after 2 steps
2025-09-17 16:43:48,561 | INFO | scchatbot.workflow.node_base | ✅ Executor: Execution complete
2025-09-17 16:43:48,562 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (6/6), running post-execution evaluation
2025-09-17 16:43:48,562 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 16:43:48,562 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 16:43:50,275 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:43:51,072 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:43:51,075 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 16:43:51,076 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 16:43:51,838 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:43:51,843 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 16:43:52,777 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:43:52,780 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["perform_enrichment_analyses", "search_enrichment_semantic", "display_enrichment_visualization"]
```' (length: 109)
2025-09-17 16:43:52,781 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 16:43:52,781 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 16:43:52,781 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 6 entries
2025-09-17 16:43:52,781 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: perform_enrichment_analyses (execution 3)
2025-09-17 16:43:52,781 | INFO | scchatbot.workflow.nodes.evaluation |    → Enrichment analysis had 9 total significant results
2025-09-17 16:43:52,781 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: search_enrichment_semantic (execution 5)
2025-09-17 16:43:52,781 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_enrichment_visualization (execution 6)
2025-09-17 16:43:52,781 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 16:43:52,781 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-17 16:43:52,781 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-17 16:43:52,782 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for pathway_analysis question
2025-09-17 16:43:52,782 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 16:43:52,782 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 6
2025-09-17 16:43:52,782 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 6
2025-09-17 16:43:52,782 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 16:43:52,782 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 16:43:52,782 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 16:43:52,783 | INFO | scchatbot.workflow.nodes.evaluation |    • Enrichment analyses: ['T cell', 'unknown']
2025-09-17 16:43:52,783 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 16:43:52,786 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 All steps complete (6/6), running post-execution evaluation
2025-09-17 16:43:52,786 | INFO | scchatbot.workflow.nodes.evaluation | 🏁 Evaluator: Starting sophisticated post-execution evaluation...
2025-09-17 16:43:52,786 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Starting post-execution evaluation...
2025-09-17 16:43:54,927 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:43:56,093 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:43:56,106 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 16:43:56,107 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Evaluating coverage for cell type: T cell
2025-09-17 16:43:56,728 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:43:56,731 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Question classified as: pathway_analysis
2025-09-17 16:43:57,749 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:43:57,775 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 LLM raw response for T cell: '```json
["perform_enrichment_analyses", "search_enrichment_semantic", "display_enrichment_visualization"]
```' (length: 109)
2025-09-17 16:43:57,776 | INFO | scchatbot.workflow.nodes.evaluation | 🧠 LLM recommends for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 16:43:57,776 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking if 'T cell' is in unavailable list: []
2025-09-17 16:43:57,776 | INFO | scchatbot.workflow.nodes.evaluation | 🔧 DEBUG: Checking execution history with 6 entries
2025-09-17 16:43:57,776 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: perform_enrichment_analyses (execution 3)
2025-09-17 16:43:57,776 | INFO | scchatbot.workflow.nodes.evaluation |    → Enrichment analysis had 9 total significant results
2025-09-17 16:43:57,776 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: search_enrichment_semantic (execution 5)
2025-09-17 16:43:57,777 | INFO | scchatbot.workflow.nodes.evaluation | 📋 Found successful analysis for T cell: display_enrichment_visualization (execution 6)
2025-09-17 16:43:57,777 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Actually performed for T cell: ['perform_enrichment_analyses', 'search_enrichment_semantic', 'display_enrichment_visualization']
2025-09-17 16:43:57,777 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Complete coverage for T cell
2025-09-17 16:43:57,777 | INFO | scchatbot.workflow.nodes.evaluation | 🔍 Post-execution evaluation complete: 0 total supplementary steps
2025-09-17 16:43:57,777 | INFO | scchatbot.workflow.nodes.evaluation | 📝 Generated relevance hints for pathway_analysis question
2025-09-17 16:43:57,777 | INFO | scchatbot.workflow.nodes.evaluation | ✅ Execution Summary:
2025-09-17 16:43:57,777 | INFO | scchatbot.workflow.nodes.evaluation |    • Total steps executed: 6
2025-09-17 16:43:57,777 | INFO | scchatbot.workflow.nodes.evaluation |    • Successful: 6
2025-09-17 16:43:57,777 | INFO | scchatbot.workflow.nodes.evaluation |    • Failed: 0
2025-09-17 16:43:57,778 | INFO | scchatbot.workflow.nodes.evaluation |    • Supplementary steps generated: 0
2025-09-17 16:43:57,778 | INFO | scchatbot.workflow.nodes.evaluation | 📊 Available analysis results:
2025-09-17 16:43:57,778 | INFO | scchatbot.workflow.nodes.evaluation |    • Enrichment analyses: ['T cell', 'unknown']
2025-09-17 16:43:57,778 | INFO | scchatbot.workflow.nodes.evaluation | 🎯 Evaluator: Post-execution evaluation complete, ready for response generation
2025-09-17 16:43:57,779 | INFO | scchatbot.multi_agent_base | 🔄 Routing: Post-execution evaluation complete, generating response
2025-09-17 16:43:57,780 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generating LLM-synthesized response with conversation awareness...
2025-09-17 16:43:57,780 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 UNIFIED ACCESSOR: Processing 6 execution steps
2025-09-17 16:43:57,780 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 1: process_cells for Immune cell
2025-09-17 16:43:57,782 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling process_cells with ProcessCellsResultAccessor
2025-09-17 16:43:57,783 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 2: validate_processing_results for step_1
2025-09-17 16:43:57,783 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling validate_processing_results with ValidationResultAccessor
2025-09-17 16:43:57,784 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 3: perform_enrichment_analyses for T cell
2025-09-17 16:43:57,784 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling perform_enrichment_analyses with EnrichmentResultAccessor
2025-09-17 16:43:57,785 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 ENRICHMENT: Loaded 3 conditions from mapping file: ['cataract', 'basal laminar drusen', 'age related macular degeneration']
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 4: display_enrichment_visualization for step_3
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 4 function: display_enrichment_visualization
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'analysis': 'gsea', 'plot_type': 'both'}
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_enrichment_visualization with VisualizationResultAccessor
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 5: search_enrichment_semantic for T cell
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 SEMANTIC DEBUG: Step 5 parameters: {'cell_type': 'T cell'}
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling search_enrichment_semantic with SemanticSearchResultAccessor
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 SEMANTIC SEARCH DEBUG: Extracted cell_type='T cell', query='unknown'
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 SEMANTIC SEARCH DEBUG: Full parameters: {'cell_type': 'T cell'}
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.unified_result_accessor | 🔍 Step 6: display_enrichment_visualization for T cell
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Step 6 function: display_enrichment_visualization
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.unified_result_accessor | 🎨 VISUALIZATION DEBUG: Parameters: {'cell_type': 'T cell', 'analysis': 'gsea'}
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.unified_result_accessor | ✅ Handling display_enrichment_visualization with VisualizationResultAccessor
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.unified_result_accessor | ✅ UNIFIED ACCESSOR: Processed 6 successful steps
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.unified_result_accessor | 🎯 UNIFIED FORMATTER: Generated 1862 characters for synthesis
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.nodes.response | ✅ Unified results extracted and formatted successfully
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.nodes.response | ✅ Failed analyses retrieved
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Found context message (56 chars)
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.nodes.response | ✅ Conversation context processed
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.nodes.response | ✅ Discovery search completed
2025-09-17 16:43:57,798 | INFO | scchatbot.workflow.nodes.response | ✅ Synthesis prompt created with relevance hints
2025-09-17 16:44:00,950 | INFO | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-09-17 16:44:00,960 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Checking 6 execution steps
2025-09-17 16:44:00,961 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 1: process_cells, success=True, has_result=True
2025-09-17 16:44:00,961 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 2: validate_processing_results, success=True, has_result=True
2025-09-17 16:44:00,961 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 3: perform_enrichment_analyses, success=True, has_result=True
2025-09-17 16:44:00,961 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 4: display_enrichment_visualization, success=True, has_result=True
2025-09-17 16:44:00,961 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Found multiple plots structure in display_enrichment_visualization
2025-09-17 16:44:00,961 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added bar plot plot_1: Top 10 GSEA Terms - Bar Plot (T cell) (9073 chars)
2025-09-17 16:44:00,961 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added dot plot plot_2: Top 10 GSEA Terms - Dot Plot (T cell) (9217 chars)
2025-09-17 16:44:00,961 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 5: search_enrichment_semantic, success=True, has_result=True
2025-09-17 16:44:00,961 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Step 6: display_enrichment_visualization, success=True, has_result=True
2025-09-17 16:44:00,962 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Found multiple plots structure in display_enrichment_visualization
2025-09-17 16:44:00,962 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added bar plot plot_3: Top 10 GSEA Terms - Bar Plot (T cell) (9073 chars)
2025-09-17 16:44:00,962 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Added dot plot plot_4: Top 10 GSEA Terms - Dot Plot (T cell) (9217 chars)
2025-09-17 16:44:00,962 | INFO | scchatbot.workflow.nodes.response | 🎨 PLOT EXTRACTION: Successfully extracted 4 individual plots (total: 36,580 chars)
2025-09-17 16:44:00,962 | INFO | scchatbot.workflow.nodes.response | 🎨 SIZE VALIDATION: Validated 4 plots, total size: 36,580 bytes
2025-09-17 16:44:00,962 | INFO | scchatbot.workflow.nodes.response | 🎯 ResponseGeneratorNode: Found 4 individual plots
2025-09-17 16:44:00,962 | INFO | scchatbot.workflow.nodes.response | 🎨 Creating multiple messages structure: 4 plots + 1 text (plots first)
2025-09-17 16:44:00,963 | INFO | scchatbot.workflow.nodes.response | 🎨 Created multiple messages structure with 5 total messages (plots first, then text)
2025-09-17 16:44:00,964 | INFO | scchatbot.workflow.nodes.response | 🎯 UNIFIED: Generated response (825 chars)
2025-09-17 16:44:01,055 | INFO | scchatbot.multi_agent_base | ✅ Conversation recorded in vector database
2025-09-17 16:44:01,055 | INFO | scchatbot.multi_agent_base | 💾 Session state saved for 'b05944ce' with 8 available cell types
